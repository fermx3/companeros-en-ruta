# Esquema Actual de la Base de Datos en Supabase
## 1. Inventario de tablas

| schemaname | tablename                 | tableowner          |
| ---------- | ------------------------- | ------------------- |
| auth       | audit_log_entries         | supabase_auth_admin |
| auth       | flow_state                | supabase_auth_admin |
| auth       | identities                | supabase_auth_admin |
| auth       | instances                 | supabase_auth_admin |
| auth       | mfa_amr_claims            | supabase_auth_admin |
| auth       | mfa_challenges            | supabase_auth_admin |
| auth       | mfa_factors               | supabase_auth_admin |
| auth       | oauth_authorizations      | supabase_auth_admin |
| auth       | oauth_client_states       | supabase_auth_admin |
| auth       | oauth_clients             | supabase_auth_admin |
| auth       | oauth_consents            | supabase_auth_admin |
| auth       | one_time_tokens           | supabase_auth_admin |
| auth       | refresh_tokens            | supabase_auth_admin |
| auth       | saml_providers            | supabase_auth_admin |
| auth       | saml_relay_states         | supabase_auth_admin |
| auth       | schema_migrations         | supabase_auth_admin |
| auth       | sessions                  | supabase_auth_admin |
| auth       | sso_domains               | supabase_auth_admin |
| auth       | sso_providers             | supabase_auth_admin |
| auth       | users                     | supabase_auth_admin |
| public     | brands                    | postgres            |
| public     | campaigns                 | postgres            |
| public     | client_brand_memberships  | postgres            |
| public     | client_invoice_data       | postgres            |
| public     | client_tier_assignments   | postgres            |
| public     | client_types              | postgres            |
| public     | clients                   | postgres            |
| public     | commercial_structures     | postgres            |
| public     | markets                   | postgres            |
| public     | order_items               | postgres            |
| public     | orders                    | postgres            |
| public     | points_transactions       | postgres            |
| public     | product_categories        | postgres            |
| public     | product_variants          | postgres            |
| public     | products                  | postgres            |
| public     | promotion_redemptions     | postgres            |
| public     | promotion_rules           | postgres            |
| public     | promotions                | postgres            |
| public     | reward_redemptions        | postgres            |
| public     | rewards                   | postgres            |
| public     | tenants                   | postgres            |
| public     | tiers                     | postgres            |
| public     | user_profiles             | postgres            |
| public     | user_roles                | postgres            |
| public     | visit_assessments         | postgres            |
| public     | visit_communication_plans | postgres            |
| public     | visit_inventories         | postgres            |
| public     | visit_order_items         | postgres            |
| public     | visit_orders              | postgres            |
| public     | visits                    | postgres            |
| public     | zones                     | postgres            |

## 2. Columnas por tabla

| table_schema | table_name                       | column_name                         | data_type                | is_nullable | column_default                                         |
| ------------ | -------------------------------- | ----------------------------------- | ------------------------ | ----------- | ------------------------------------------------------ |
| public       | active_brands                    | id                                  | uuid                     | YES         | null                                                   |
| public       | active_brands                    | public_id                           | character varying        | YES         | null                                                   |
| public       | active_brands                    | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_brands                    | name                                | character varying        | YES         | null                                                   |
| public       | active_brands                    | slug                                | character varying        | YES         | null                                                   |
| public       | active_brands                    | description                         | text                     | YES         | null                                                   |
| public       | active_brands                    | logo_url                            | character varying        | YES         | null                                                   |
| public       | active_brands                    | brand_color_primary                 | character varying        | YES         | null                                                   |
| public       | active_brands                    | brand_color_secondary               | character varying        | YES         | null                                                   |
| public       | active_brands                    | contact_email                       | character varying        | YES         | null                                                   |
| public       | active_brands                    | contact_phone                       | character varying        | YES         | null                                                   |
| public       | active_brands                    | website                             | character varying        | YES         | null                                                   |
| public       | active_brands                    | status                              | USER-DEFINED             | YES         | null                                                   |
| public       | active_brands                    | settings                            | jsonb                    | YES         | null                                                   |
| public       | active_brands                    | dashboard_metrics                   | jsonb                    | YES         | null                                                   |
| public       | active_brands                    | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_brands                    | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_brands                    | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_campaigns                 | id                                  | uuid                     | YES         | null                                                   |
| public       | active_campaigns                 | public_id                           | character varying        | YES         | null                                                   |
| public       | active_campaigns                 | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_campaigns                 | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_campaigns                 | name                                | character varying        | YES         | null                                                   |
| public       | active_campaigns                 | description                         | text                     | YES         | null                                                   |
| public       | active_campaigns                 | campaign_type                       | USER-DEFINED             | YES         | null                                                   |
| public       | active_campaigns                 | status                              | USER-DEFINED             | YES         | null                                                   |
| public       | active_campaigns                 | start_date                          | date                     | YES         | null                                                   |
| public       | active_campaigns                 | end_date                            | date                     | YES         | null                                                   |
| public       | active_campaigns                 | budget_total                        | numeric                  | YES         | null                                                   |
| public       | active_campaigns                 | budget_spent                        | numeric                  | YES         | null                                                   |
| public       | active_campaigns                 | target_audience                     | jsonb                    | YES         | null                                                   |
| public       | active_campaigns                 | campaign_objectives                 | jsonb                    | YES         | null                                                   |
| public       | active_campaigns                 | key_messages                        | jsonb                    | YES         | null                                                   |
| public       | active_campaigns                 | channels                            | jsonb                    | YES         | null                                                   |
| public       | active_campaigns                 | geographic_scope                    | jsonb                    | YES         | null                                                   |
| public       | active_campaigns                 | created_by                          | uuid                     | YES         | null                                                   |
| public       | active_campaigns                 | approved_by                         | uuid                     | YES         | null                                                   |
| public       | active_campaigns                 | approved_at                         | timestamp with time zone | YES         | null                                                   |
| public       | active_campaigns                 | approval_notes                      | text                     | YES         | null                                                   |
| public       | active_campaigns                 | launch_ready                        | boolean                  | YES         | null                                                   |
| public       | active_campaigns                 | launch_checklist                    | jsonb                    | YES         | null                                                   |
| public       | active_campaigns                 | performance_metrics                 | jsonb                    | YES         | null                                                   |
| public       | active_campaigns                 | roi_target                          | numeric                  | YES         | null                                                   |
| public       | active_campaigns                 | roi_actual                          | numeric                  | YES         | null                                                   |
| public       | active_campaigns                 | campaign_tags                       | jsonb                    | YES         | null                                                   |
| public       | active_campaigns                 | competitive_context                 | text                     | YES         | null                                                   |
| public       | active_campaigns                 | success_criteria                    | jsonb                    | YES         | null                                                   |
| public       | active_campaigns                 | post_campaign_analysis              | text                     | YES         | null                                                   |
| public       | active_campaigns                 | lessons_learned                     | text                     | YES         | null                                                   |
| public       | active_campaigns                 | attachments                         | jsonb                    | YES         | null                                                   |
| public       | active_campaigns                 | is_template                         | boolean                  | YES         | null                                                   |
| public       | active_campaigns                 | template_name                       | character varying        | YES         | null                                                   |
| public       | active_campaigns                 | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_campaigns                 | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_campaigns                 | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_campaigns                 | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_campaigns                 | brand_slug                          | character varying        | YES         | null                                                   |
| public       | active_campaigns                 | created_by_first_name               | character varying        | YES         | null                                                   |
| public       | active_campaigns                 | created_by_last_name                | character varying        | YES         | null                                                   |
| public       | active_campaigns                 | approved_by_first_name              | character varying        | YES         | null                                                   |
| public       | active_campaigns                 | approved_by_last_name               | character varying        | YES         | null                                                   |
| public       | active_campaigns                 | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_campaigns                 | campaign_display_status             | text                     | YES         | null                                                   |
| public       | active_campaigns                 | campaign_duration_days              | integer                  | YES         | null                                                   |
| public       | active_campaigns                 | days_since_start                    | integer                  | YES         | null                                                   |
| public       | active_campaigns                 | days_until_end                      | integer                  | YES         | null                                                   |
| public       | active_campaigns                 | campaign_progress_percentage        | numeric                  | YES         | null                                                   |
| public       | active_campaigns                 | budget_utilization_percentage       | numeric                  | YES         | null                                                   |
| public       | active_campaigns                 | budget_remaining                    | numeric                  | YES         | null                                                   |
| public       | active_campaigns                 | roi_variance                        | numeric                  | YES         | null                                                   |
| public       | active_campaigns                 | attachments_count                   | integer                  | YES         | null                                                   |
| public       | active_campaigns                 | tags_count                          | integer                  | YES         | null                                                   |
| public       | active_client_brand_memberships  | id                                  | uuid                     | YES         | null                                                   |
| public       | active_client_brand_memberships  | public_id                           | character varying        | YES         | null                                                   |
| public       | active_client_brand_memberships  | client_id                           | uuid                     | YES         | null                                                   |
| public       | active_client_brand_memberships  | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_client_brand_memberships  | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_client_brand_memberships  | membership_status                   | USER-DEFINED             | YES         | null                                                   |
| public       | active_client_brand_memberships  | joined_date                         | date                     | YES         | null                                                   |
| public       | active_client_brand_memberships  | approved_by                         | uuid                     | YES         | null                                                   |
| public       | active_client_brand_memberships  | approved_date                       | date                     | YES         | null                                                   |
| public       | active_client_brand_memberships  | current_tier_id                     | uuid                     | YES         | null                                                   |
| public       | active_client_brand_memberships  | lifetime_points                     | numeric                  | YES         | null                                                   |
| public       | active_client_brand_memberships  | points_balance                      | numeric                  | YES         | null                                                   |
| public       | active_client_brand_memberships  | last_purchase_date                  | date                     | YES         | null                                                   |
| public       | active_client_brand_memberships  | last_points_earned_date             | date                     | YES         | null                                                   |
| public       | active_client_brand_memberships  | membership_preferences              | jsonb                    | YES         | null                                                   |
| public       | active_client_brand_memberships  | terms_accepted_date                 | timestamp with time zone | YES         | null                                                   |
| public       | active_client_brand_memberships  | terms_version                       | character varying        | YES         | null                                                   |
| public       | active_client_brand_memberships  | is_primary_brand                    | boolean                  | YES         | null                                                   |
| public       | active_client_brand_memberships  | communication_preferences           | jsonb                    | YES         | null                                                   |
| public       | active_client_brand_memberships  | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_client_brand_memberships  | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_client_brand_memberships  | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_client_brand_memberships  | client_business_name                | character varying        | YES         | null                                                   |
| public       | active_client_brand_memberships  | client_owner_name                   | character varying        | YES         | null                                                   |
| public       | active_client_brand_memberships  | client_email                        | character varying        | YES         | null                                                   |
| public       | active_client_brand_memberships  | client_status                       | USER-DEFINED             | YES         | null                                                   |
| public       | active_client_brand_memberships  | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_client_brand_memberships  | brand_slug                          | character varying        | YES         | null                                                   |
| public       | active_client_brand_memberships  | brand_status                        | USER-DEFINED             | YES         | null                                                   |
| public       | active_client_brand_memberships  | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_client_brand_memberships  | tenant_slug                         | character varying        | YES         | null                                                   |
| public       | active_client_brand_memberships  | approved_by_first_name              | character varying        | YES         | null                                                   |
| public       | active_client_brand_memberships  | approved_by_last_name               | character varying        | YES         | null                                                   |
| public       | active_client_brand_memberships  | points_utilization_rate             | numeric                  | YES         | null                                                   |
| public       | active_client_brand_memberships  | days_since_last_purchase            | integer                  | YES         | null                                                   |
| public       | active_client_brand_memberships  | membership_days                     | integer                  | YES         | null                                                   |
| public       | active_client_invoice_data       | id                                  | uuid                     | YES         | null                                                   |
| public       | active_client_invoice_data       | public_id                           | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_client_invoice_data       | client_id                           | uuid                     | YES         | null                                                   |
| public       | active_client_invoice_data       | person_type                         | USER-DEFINED             | YES         | null                                                   |
| public       | active_client_invoice_data       | invoice_name                        | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | rfc                                 | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | business_name                       | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | address_street                      | text                     | YES         | null                                                   |
| public       | active_client_invoice_data       | address_neighborhood                | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | address_city                        | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | address_state                       | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | address_postal_code                 | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | address_country                     | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | cfdi_use                            | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | payment_form                        | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | payment_method                      | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | email_invoice                       | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | is_preferred                        | boolean                  | YES         | null                                                   |
| public       | active_client_invoice_data       | is_active                           | boolean                  | YES         | null                                                   |
| public       | active_client_invoice_data       | tax_regime                          | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | notes                               | text                     | YES         | null                                                   |
| public       | active_client_invoice_data       | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_client_invoice_data       | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_client_invoice_data       | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_client_invoice_data       | client_business_name                | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | client_owner_name                   | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | client_email                        | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | person_type_description             | text                     | YES         | null                                                   |
| public       | active_client_invoice_data       | full_address                        | text                     | YES         | null                                                   |
| public       | active_client_invoice_data       | cfdi_use_description                | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | payment_form_description            | character varying        | YES         | null                                                   |
| public       | active_client_invoice_data       | payment_method_description          | character varying        | YES         | null                                                   |
| public       | active_client_tier_assignments   | id                                  | uuid                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | public_id                           | character varying        | YES         | null                                                   |
| public       | active_client_tier_assignments   | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | client_brand_membership_id          | uuid                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | tier_id                             | uuid                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | assignment_type                     | USER-DEFINED             | YES         | null                                                   |
| public       | active_client_tier_assignments   | assigned_by                         | uuid                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | assigned_date                       | date                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | effective_from                      | date                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | effective_until                     | date                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | previous_tier_id                    | uuid                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | reason                              | text                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | points_at_assignment                | numeric                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | visits_at_assignment                | integer                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | purchases_at_assignment             | integer                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | purchase_amount_at_assignment       | numeric                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | evaluation_period_start             | date                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | evaluation_period_end               | date                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | is_current                          | boolean                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | auto_assignment_rule_id             | uuid                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | notification_sent                   | boolean                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | notification_sent_at                | timestamp with time zone | YES         | null                                                   |
| public       | active_client_tier_assignments   | client_acknowledgment               | boolean                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | benefits_activated                  | boolean                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | assignment_notes                    | text                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | metadata                            | jsonb                    | YES         | null                                                   |
| public       | active_client_tier_assignments   | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_client_tier_assignments   | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_client_tier_assignments   | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_client_tier_assignments   | client_id                           | uuid                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | membership_status                   | USER-DEFINED             | YES         | null                                                   |
| public       | active_client_tier_assignments   | joined_date                         | date                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | lifetime_points                     | numeric                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | points_balance                      | numeric                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | client_business_name                | character varying        | YES         | null                                                   |
| public       | active_client_tier_assignments   | client_owner_name                   | character varying        | YES         | null                                                   |
| public       | active_client_tier_assignments   | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_client_tier_assignments   | tier_name                           | character varying        | YES         | null                                                   |
| public       | active_client_tier_assignments   | tier_level                          | integer                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | points_multiplier                   | numeric                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | discount_percentage                 | numeric                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | previous_tier_name                  | character varying        | YES         | null                                                   |
| public       | active_client_tier_assignments   | previous_tier_level                 | integer                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | assigned_by_first_name              | character varying        | YES         | null                                                   |
| public       | active_client_tier_assignments   | assigned_by_last_name               | character varying        | YES         | null                                                   |
| public       | active_client_tier_assignments   | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_client_tier_assignments   | assignment_duration_days            | integer                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | assignment_status                   | text                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | tier_movement_type                  | text                     | YES         | null                                                   |
| public       | active_client_tier_assignments   | days_since_assignment               | integer                  | YES         | null                                                   |
| public       | active_client_tier_assignments   | notification_status                 | text                     | YES         | null                                                   |
| public       | active_client_types              | id                                  | uuid                     | YES         | null                                                   |
| public       | active_client_types              | public_id                           | character varying        | YES         | null                                                   |
| public       | active_client_types              | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_client_types              | name                                | character varying        | YES         | null                                                   |
| public       | active_client_types              | code                                | character varying        | YES         | null                                                   |
| public       | active_client_types              | category                            | USER-DEFINED             | YES         | null                                                   |
| public       | active_client_types              | description                         | text                     | YES         | null                                                   |
| public       | active_client_types              | requires_assessment                 | boolean                  | YES         | null                                                   |
| public       | active_client_types              | requires_inventory                  | boolean                  | YES         | null                                                   |
| public       | active_client_types              | assessment_frequency_days           | integer                  | YES         | null                                                   |
| public       | active_client_types              | default_visit_frequency_days        | integer                  | YES         | null                                                   |
| public       | active_client_types              | characteristics                     | jsonb                    | YES         | null                                                   |
| public       | active_client_types              | kpi_targets                         | jsonb                    | YES         | null                                                   |
| public       | active_client_types              | is_active                           | boolean                  | YES         | null                                                   |
| public       | active_client_types              | sort_order                          | integer                  | YES         | null                                                   |
| public       | active_client_types              | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_client_types              | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_client_types              | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_client_types              | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_client_types              | tenant_slug                         | character varying        | YES         | null                                                   |
| public       | active_client_types              | total_client_count                  | integer                  | YES         | null                                                   |
| public       | active_client_types              | active_client_count                 | integer                  | YES         | null                                                   |
| public       | active_client_types              | prospect_client_count               | integer                  | YES         | null                                                   |
| public       | active_client_types              | zone_distribution                   | jsonb                    | YES         | null                                                   |
| public       | active_client_types              | market_distribution                 | jsonb                    | YES         | null                                                   |
| public       | active_client_types              | avg_effective_visit_frequency       | numeric                  | YES         | null                                                   |
| public       | active_client_types              | avg_effective_assessment_frequency  | numeric                  | YES         | null                                                   |
| public       | active_client_types              | avg_monthly_visits                  | integer                  | YES         | null                                                   |
| public       | active_client_types              | avg_assessment_compliance_rate      | numeric                  | YES         | null                                                   |
| public       | active_client_types              | avg_satisfaction_score              | numeric                  | YES         | null                                                   |
| public       | active_commercial_structures     | id                                  | uuid                     | YES         | null                                                   |
| public       | active_commercial_structures     | public_id                           | character varying        | YES         | null                                                   |
| public       | active_commercial_structures     | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_commercial_structures     | name                                | character varying        | YES         | null                                                   |
| public       | active_commercial_structures     | code                                | character varying        | YES         | null                                                   |
| public       | active_commercial_structures     | structure_type                      | USER-DEFINED             | YES         | null                                                   |
| public       | active_commercial_structures     | description                         | text                     | YES         | null                                                   |
| public       | active_commercial_structures     | contact_company                     | character varying        | YES         | null                                                   |
| public       | active_commercial_structures     | contact_name                        | character varying        | YES         | null                                                   |
| public       | active_commercial_structures     | contact_email                       | character varying        | YES         | null                                                   |
| public       | active_commercial_structures     | contact_phone                       | character varying        | YES         | null                                                   |
| public       | active_commercial_structures     | coverage_zones                      | jsonb                    | YES         | null                                                   |
| public       | active_commercial_structures     | supported_markets                   | jsonb                    | YES         | null                                                   |
| public       | active_commercial_structures     | payment_terms                       | character varying        | YES         | null                                                   |
| public       | active_commercial_structures     | minimum_order                       | numeric                  | YES         | null                                                   |
| public       | active_commercial_structures     | delivery_time_days                  | integer                  | YES         | null                                                   |
| public       | active_commercial_structures     | commission_structure                | jsonb                    | YES         | null                                                   |
| public       | active_commercial_structures     | is_active                           | boolean                  | YES         | null                                                   |
| public       | active_commercial_structures     | sort_order                          | integer                  | YES         | null                                                   |
| public       | active_commercial_structures     | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_commercial_structures     | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_commercial_structures     | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_commercial_structures     | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_commercial_structures     | client_count                        | integer                  | YES         | null                                                   |
| public       | active_commercial_structures     | coverage_zones_details              | jsonb                    | YES         | null                                                   |
| public       | active_commercial_structures     | supported_markets_details           | jsonb                    | YES         | null                                                   |
| public       | active_markets                   | id                                  | uuid                     | YES         | null                                                   |
| public       | active_markets                   | public_id                           | character varying        | YES         | null                                                   |
| public       | active_markets                   | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_markets                   | name                                | character varying        | YES         | null                                                   |
| public       | active_markets                   | code                                | character varying        | YES         | null                                                   |
| public       | active_markets                   | description                         | text                     | YES         | null                                                   |
| public       | active_markets                   | characteristics                     | jsonb                    | YES         | null                                                   |
| public       | active_markets                   | target_volume_min                   | numeric                  | YES         | null                                                   |
| public       | active_markets                   | target_volume_max                   | numeric                  | YES         | null                                                   |
| public       | active_markets                   | is_active                           | boolean                  | YES         | null                                                   |
| public       | active_markets                   | sort_order                          | integer                  | YES         | null                                                   |
| public       | active_markets                   | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_markets                   | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_markets                   | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_markets                   | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_markets                   | tenant_slug                         | character varying        | YES         | null                                                   |
| public       | active_markets                   | total_client_count                  | integer                  | YES         | null                                                   |
| public       | active_markets                   | active_client_count                 | integer                  | YES         | null                                                   |
| public       | active_markets                   | prospect_client_count               | integer                  | YES         | null                                                   |
| public       | active_markets                   | zone_distribution                   | jsonb                    | YES         | null                                                   |
| public       | active_markets                   | client_type_distribution            | jsonb                    | YES         | null                                                   |
| public       | active_markets                   | commercial_structure_distribution   | jsonb                    | YES         | null                                                   |
| public       | active_markets                   | avg_client_credit_limit             | numeric                  | YES         | null                                                   |
| public       | active_markets                   | first_client_registered             | date                     | YES         | null                                                   |
| public       | active_markets                   | last_client_registered              | date                     | YES         | null                                                   |
| public       | active_markets                   | last_visit_recorded                 | date                     | YES         | null                                                   |
| public       | active_order_items               | id                                  | uuid                     | YES         | null                                                   |
| public       | active_order_items               | public_id                           | character varying        | YES         | null                                                   |
| public       | active_order_items               | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_order_items               | order_id                            | uuid                     | YES         | null                                                   |
| public       | active_order_items               | product_id                          | uuid                     | YES         | null                                                   |
| public       | active_order_items               | product_variant_id                  | uuid                     | YES         | null                                                   |
| public       | active_order_items               | line_number                         | integer                  | YES         | null                                                   |
| public       | active_order_items               | quantity_ordered                    | integer                  | YES         | null                                                   |
| public       | active_order_items               | quantity_confirmed                  | integer                  | YES         | null                                                   |
| public       | active_order_items               | quantity_delivered                  | integer                  | YES         | null                                                   |
| public       | active_order_items               | unit_price                          | numeric                  | YES         | null                                                   |
| public       | active_order_items               | unit_cost                           | numeric                  | YES         | null                                                   |
| public       | active_order_items               | line_subtotal                       | numeric                  | YES         | null                                                   |
| public       | active_order_items               | line_discount_amount                | numeric                  | YES         | null                                                   |
| public       | active_order_items               | line_discount_percentage            | numeric                  | YES         | null                                                   |
| public       | active_order_items               | line_total                          | numeric                  | YES         | null                                                   |
| public       | active_order_items               | tax_rate                            | numeric                  | YES         | null                                                   |
| public       | active_order_items               | tax_amount                          | numeric                  | YES         | null                                                   |
| public       | active_order_items               | unit_type                           | USER-DEFINED             | YES         | null                                                   |
| public       | active_order_items               | weight_per_unit_grams               | numeric                  | YES         | null                                                   |
| public       | active_order_items               | volume_per_unit_ml                  | numeric                  | YES         | null                                                   |
| public       | active_order_items               | expiration_date_requested           | date                     | YES         | null                                                   |
| public       | active_order_items               | batch_number                        | character varying        | YES         | null                                                   |
| public       | active_order_items               | expiration_date_delivered           | date                     | YES         | null                                                   |
| public       | active_order_items               | item_status                         | USER-DEFINED             | YES         | null                                                   |
| public       | active_order_items               | substitution_reason                 | text                     | YES         | null                                                   |
| public       | active_order_items               | substitute_product_id               | uuid                     | YES         | null                                                   |
| public       | active_order_items               | substitute_variant_id               | uuid                     | YES         | null                                                   |
| public       | active_order_items               | delivery_notes                      | text                     | YES         | null                                                   |
| public       | active_order_items               | quality_rating                      | integer                  | YES         | null                                                   |
| public       | active_order_items               | quality_notes                       | text                     | YES         | null                                                   |
| public       | active_order_items               | return_reason                       | text                     | YES         | null                                                   |
| public       | active_order_items               | returned_quantity                   | integer                  | YES         | null                                                   |
| public       | active_order_items               | refund_amount                       | numeric                  | YES         | null                                                   |
| public       | active_order_items               | commission_rate                     | numeric                  | YES         | null                                                   |
| public       | active_order_items               | commission_amount                   | numeric                  | YES         | null                                                   |
| public       | active_order_items               | promotion_applied                   | boolean                  | YES         | null                                                   |
| public       | active_order_items               | free_item                           | boolean                  | YES         | null                                                   |
| public       | active_order_items               | item_notes                          | text                     | YES         | null                                                   |
| public       | active_order_items               | metadata                            | jsonb                    | YES         | null                                                   |
| public       | active_order_items               | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_order_items               | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_order_items               | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_order_items               | order_number                        | character varying        | YES         | null                                                   |
| public       | active_order_items               | parent_order_status                 | USER-DEFINED             | YES         | null                                                   |
| public       | active_order_items               | client_id                           | uuid                     | YES         | null                                                   |
| public       | active_order_items               | order_brand_id                      | uuid                     | YES         | null                                                   |
| public       | active_order_items               | product_name                        | character varying        | YES         | null                                                   |
| public       | active_order_items               | product_code                        | character varying        | YES         | null                                                   |
| public       | active_order_items               | variant_name                        | character varying        | YES         | null                                                   |
| public       | active_order_items               | variant_code                        | character varying        | YES         | null                                                   |
| public       | active_orders                    | id                                  | uuid                     | YES         | null                                                   |
| public       | active_orders                    | public_id                           | character varying        | YES         | null                                                   |
| public       | active_orders                    | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_orders                    | client_id                           | uuid                     | YES         | null                                                   |
| public       | active_orders                    | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_orders                    | order_number                        | character varying        | YES         | null                                                   |
| public       | active_orders                    | order_type                          | USER-DEFINED             | YES         | null                                                   |
| public       | active_orders                    | order_status                        | USER-DEFINED             | YES         | null                                                   |
| public       | active_orders                    | order_date                          | date                     | YES         | null                                                   |
| public       | active_orders                    | requested_delivery_date             | date                     | YES         | null                                                   |
| public       | active_orders                    | confirmed_delivery_date             | date                     | YES         | null                                                   |
| public       | active_orders                    | actual_delivery_date                | date                     | YES         | null                                                   |
| public       | active_orders                    | delivery_time_slot                  | character varying        | YES         | null                                                   |
| public       | active_orders                    | delivery_address                    | text                     | YES         | null                                                   |
| public       | active_orders                    | delivery_instructions               | text                     | YES         | null                                                   |
| public       | active_orders                    | commercial_structure_id             | uuid                     | YES         | null                                                   |
| public       | active_orders                    | payment_method                      | USER-DEFINED             | YES         | null                                                   |
| public       | active_orders                    | payment_status                      | USER-DEFINED             | YES         | null                                                   |
| public       | active_orders                    | payment_terms                       | character varying        | YES         | null                                                   |
| public       | active_orders                    | subtotal                            | numeric                  | YES         | null                                                   |
| public       | active_orders                    | discount_amount                     | numeric                  | YES         | null                                                   |
| public       | active_orders                    | tax_amount                          | numeric                  | YES         | null                                                   |
| public       | active_orders                    | shipping_cost                       | numeric                  | YES         | null                                                   |
| public       | active_orders                    | total_amount                        | numeric                  | YES         | null                                                   |
| public       | active_orders                    | currency                            | character varying        | YES         | null                                                   |
| public       | active_orders                    | priority                            | USER-DEFINED             | YES         | null                                                   |
| public       | active_orders                    | source_channel                      | USER-DEFINED             | YES         | null                                                   |
| public       | active_orders                    | invoice_required                    | boolean                  | YES         | null                                                   |
| public       | active_orders                    | client_invoice_data_id              | uuid                     | YES         | null                                                   |
| public       | active_orders                    | assigned_to                         | uuid                     | YES         | null                                                   |
| public       | active_orders                    | internal_notes                      | text                     | YES         | null                                                   |
| public       | active_orders                    | client_notes                        | text                     | YES         | null                                                   |
| public       | active_orders                    | tracking_number                     | character varying        | YES         | null                                                   |
| public       | active_orders                    | estimated_delivery_time             | interval                 | YES         | null                                                   |
| public       | active_orders                    | cancellation_reason                 | text                     | YES         | null                                                   |
| public       | active_orders                    | cancelled_by                        | uuid                     | YES         | null                                                   |
| public       | active_orders                    | cancelled_at                        | timestamp with time zone | YES         | null                                                   |
| public       | active_orders                    | order_attachments                   | jsonb                    | YES         | null                                                   |
| public       | active_orders                    | delivery_confirmation               | jsonb                    | YES         | null                                                   |
| public       | active_orders                    | customer_rating                     | integer                  | YES         | null                                                   |
| public       | active_orders                    | customer_feedback                   | text                     | YES         | null                                                   |
| public       | active_orders                    | metadata                            | jsonb                    | YES         | null                                                   |
| public       | active_orders                    | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_orders                    | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_orders                    | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_orders                    | client_business_name                | character varying        | YES         | null                                                   |
| public       | active_orders                    | client_owner_name                   | character varying        | YES         | null                                                   |
| public       | active_orders                    | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_orders                    | brand_slug                          | character varying        | YES         | null                                                   |
| public       | active_orders                    | commercial_structure_name           | character varying        | YES         | null                                                   |
| public       | active_orders                    | structure_type                      | USER-DEFINED             | YES         | null                                                   |
| public       | active_orders                    | invoice_name                        | character varying        | YES         | null                                                   |
| public       | active_orders                    | assigned_to_first_name              | character varying        | YES         | null                                                   |
| public       | active_orders                    | assigned_to_last_name               | character varying        | YES         | null                                                   |
| public       | active_orders                    | cancelled_by_first_name             | character varying        | YES         | null                                                   |
| public       | active_orders                    | cancelled_by_last_name              | character varying        | YES         | null                                                   |
| public       | active_orders                    | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_orders                    | order_display_status                | text                     | YES         | null                                                   |
| public       | active_orders                    | days_since_order                    | integer                  | YES         | null                                                   |
| public       | active_orders                    | days_until_requested_delivery       | integer                  | YES         | null                                                   |
| public       | active_orders                    | days_until_confirmed_delivery       | integer                  | YES         | null                                                   |
| public       | active_orders                    | delivery_status                     | text                     | YES         | null                                                   |
| public       | active_orders                    | discount_percentage                 | numeric                  | YES         | null                                                   |
| public       | active_orders                    | revenue_amount                      | numeric                  | YES         | null                                                   |
| public       | active_orders                    | processing_days                     | integer                  | YES         | null                                                   |
| public       | active_orders                    | satisfaction_level                  | text                     | YES         | null                                                   |
| public       | active_points_transactions       | id                                  | uuid                     | YES         | null                                                   |
| public       | active_points_transactions       | public_id                           | character varying        | YES         | null                                                   |
| public       | active_points_transactions       | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_points_transactions       | client_brand_membership_id          | uuid                     | YES         | null                                                   |
| public       | active_points_transactions       | transaction_type                    | USER-DEFINED             | YES         | null                                                   |
| public       | active_points_transactions       | points                              | numeric                  | YES         | null                                                   |
| public       | active_points_transactions       | transaction_date                    | date                     | YES         | null                                                   |
| public       | active_points_transactions       | source_type                         | USER-DEFINED             | YES         | null                                                   |
| public       | active_points_transactions       | source_id                           | character varying        | YES         | null                                                   |
| public       | active_points_transactions       | source_description                  | text                     | YES         | null                                                   |
| public       | active_points_transactions       | points_rule_id                      | uuid                     | YES         | null                                                   |
| public       | active_points_transactions       | multiplier_applied                  | numeric                  | YES         | null                                                   |
| public       | active_points_transactions       | base_points                         | numeric                  | YES         | null                                                   |
| public       | active_points_transactions       | expiration_date                     | date                     | YES         | null                                                   |
| public       | active_points_transactions       | is_expired                          | boolean                  | YES         | null                                                   |
| public       | active_points_transactions       | expired_date                        | date                     | YES         | null                                                   |
| public       | active_points_transactions       | balance_after                       | numeric                  | YES         | null                                                   |
| public       | active_points_transactions       | processed_by                        | uuid                     | YES         | null                                                   |
| public       | active_points_transactions       | approval_required                   | boolean                  | YES         | null                                                   |
| public       | active_points_transactions       | approved_by                         | uuid                     | YES         | null                                                   |
| public       | active_points_transactions       | approved_at                         | timestamp with time zone | YES         | null                                                   |
| public       | active_points_transactions       | reversal_of                         | uuid                     | YES         | null                                                   |
| public       | active_points_transactions       | reversed_by                         | uuid                     | YES         | null                                                   |
| public       | active_points_transactions       | campaign_id                         | uuid                     | YES         | null                                                   |
| public       | active_points_transactions       | promotion_id                        | uuid                     | YES         | null                                                   |
| public       | active_points_transactions       | notes                               | text                     | YES         | null                                                   |
| public       | active_points_transactions       | metadata                            | jsonb                    | YES         | null                                                   |
| public       | active_points_transactions       | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_points_transactions       | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_points_transactions       | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_points_transactions       | client_id                           | uuid                     | YES         | null                                                   |
| public       | active_points_transactions       | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_points_transactions       | membership_status                   | USER-DEFINED             | YES         | null                                                   |
| public       | active_points_transactions       | client_business_name                | character varying        | YES         | null                                                   |
| public       | active_points_transactions       | client_owner_name                   | character varying        | YES         | null                                                   |
| public       | active_points_transactions       | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_points_transactions       | processed_by_first_name             | character varying        | YES         | null                                                   |
| public       | active_points_transactions       | processed_by_last_name              | character varying        | YES         | null                                                   |
| public       | active_points_transactions       | approved_by_first_name              | character varying        | YES         | null                                                   |
| public       | active_points_transactions       | approved_by_last_name               | character varying        | YES         | null                                                   |
| public       | active_points_transactions       | reversal_of_public_id               | character varying        | YES         | null                                                   |
| public       | active_points_transactions       | reversed_by_public_id               | character varying        | YES         | null                                                   |
| public       | active_points_transactions       | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_points_transactions       | transaction_status                  | text                     | YES         | null                                                   |
| public       | active_points_transactions       | days_until_expiration               | integer                  | YES         | null                                                   |
| public       | active_points_transactions       | days_since_transaction              | integer                  | YES         | null                                                   |
| public       | active_points_transactions       | points_classification               | text                     | YES         | null                                                   |
| public       | active_points_transactions       | points_absolute                     | numeric                  | YES         | null                                                   |
| public       | active_points_transactions       | effective_multiplier                | numeric                  | YES         | null                                                   |
| public       | active_product_categories        | id                                  | uuid                     | YES         | null                                                   |
| public       | active_product_categories        | public_id                           | character varying        | YES         | null                                                   |
| public       | active_product_categories        | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_product_categories        | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_product_categories        | name                                | character varying        | YES         | null                                                   |
| public       | active_product_categories        | code                                | character varying        | YES         | null                                                   |
| public       | active_product_categories        | description                         | text                     | YES         | null                                                   |
| public       | active_product_categories        | parent_category_id                  | uuid                     | YES         | null                                                   |
| public       | active_product_categories        | category_level                      | integer                  | YES         | null                                                   |
| public       | active_product_categories        | icon_url                            | character varying        | YES         | null                                                   |
| public       | active_product_categories        | color_hex                           | character varying        | YES         | null                                                   |
| public       | active_product_categories        | characteristics                     | jsonb                    | YES         | null                                                   |
| public       | active_product_categories        | is_active                           | boolean                  | YES         | null                                                   |
| public       | active_product_categories        | sort_order                          | integer                  | YES         | null                                                   |
| public       | active_product_categories        | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_product_categories        | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_product_categories        | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_product_categories        | full_path                           | text                     | YES         | null                                                   |
| public       | active_product_categories        | level_depth                         | integer                  | YES         | null                                                   |
| public       | active_product_categories        | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_product_categories        | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_product_categories        | brand_slug                          | character varying        | YES         | null                                                   |
| public       | active_product_categories        | product_count                       | integer                  | YES         | null                                                   |
| public       | active_product_variants          | id                                  | uuid                     | YES         | null                                                   |
| public       | active_product_variants          | public_id                           | character varying        | YES         | null                                                   |
| public       | active_product_variants          | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_product_variants          | product_id                          | uuid                     | YES         | null                                                   |
| public       | active_product_variants          | variant_name                        | character varying        | YES         | null                                                   |
| public       | active_product_variants          | variant_code                        | character varying        | YES         | null                                                   |
| public       | active_product_variants          | barcode                             | character varying        | YES         | null                                                   |
| public       | active_product_variants          | price                               | numeric                  | YES         | null                                                   |
| public       | active_product_variants          | cost                                | numeric                  | YES         | null                                                   |
| public       | active_product_variants          | size_value                          | numeric                  | YES         | null                                                   |
| public       | active_product_variants          | size_unit                           | USER-DEFINED             | YES         | null                                                   |
| public       | active_product_variants          | package_type                        | character varying        | YES         | null                                                   |
| public       | active_product_variants          | package_material                    | character varying        | YES         | null                                                   |
| public       | active_product_variants          | weight_grams                        | numeric                  | YES         | null                                                   |
| public       | active_product_variants          | dimensions                          | jsonb                    | YES         | null                                                   |
| public       | active_product_variants          | units_per_case                      | integer                  | YES         | null                                                   |
| public       | active_product_variants          | case_dimensions                     | jsonb                    | YES         | null                                                   |
| public       | active_product_variants          | case_weight_kg                      | numeric                  | YES         | null                                                   |
| public       | active_product_variants          | is_default                          | boolean                  | YES         | null                                                   |
| public       | active_product_variants          | is_active                           | boolean                  | YES         | null                                                   |
| public       | active_product_variants          | launch_date                         | date                     | YES         | null                                                   |
| public       | active_product_variants          | discontinue_date                    | date                     | YES         | null                                                   |
| public       | active_product_variants          | variant_image_url                   | character varying        | YES         | null                                                   |
| public       | active_product_variants          | sort_order                          | integer                  | YES         | null                                                   |
| public       | active_product_variants          | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_product_variants          | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_product_variants          | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_product_variants          | product_name                        | character varying        | YES         | null                                                   |
| public       | active_product_variants          | product_code                        | character varying        | YES         | null                                                   |
| public       | active_product_variants          | product_base_price                  | numeric                  | YES         | null                                                   |
| public       | active_product_variants          | product_unit_type                   | USER-DEFINED             | YES         | null                                                   |
| public       | active_product_variants          | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_product_variants          | brand_slug                          | character varying        | YES         | null                                                   |
| public       | active_product_variants          | category_name                       | character varying        | YES         | null                                                   |
| public       | active_product_variants          | category_code                       | character varying        | YES         | null                                                   |
| public       | active_product_variants          | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_product_variants          | variant_margin                      | numeric                  | YES         | null                                                   |
| public       | active_product_variants          | price_vs_base_percent               | numeric                  | YES         | null                                                   |
| public       | active_product_variants          | price_per_unit                      | numeric                  | YES         | null                                                   |
| public       | active_product_variants          | variant_status                      | text                     | YES         | null                                                   |
| public       | active_product_variants          | full_package_description            | text                     | YES         | null                                                   |
| public       | active_products                  | id                                  | uuid                     | YES         | null                                                   |
| public       | active_products                  | public_id                           | character varying        | YES         | null                                                   |
| public       | active_products                  | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_products                  | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_products                  | category_id                         | uuid                     | YES         | null                                                   |
| public       | active_products                  | name                                | character varying        | YES         | null                                                   |
| public       | active_products                  | code                                | character varying        | YES         | null                                                   |
| public       | active_products                  | description                         | text                     | YES         | null                                                   |
| public       | active_products                  | barcode                             | character varying        | YES         | null                                                   |
| public       | active_products                  | base_price                          | numeric                  | YES         | null                                                   |
| public       | active_products                  | cost                                | numeric                  | YES         | null                                                   |
| public       | active_products                  | margin_target                       | numeric                  | YES         | null                                                   |
| public       | active_products                  | unit_type                           | USER-DEFINED             | YES         | null                                                   |
| public       | active_products                  | weight_grams                        | numeric                  | YES         | null                                                   |
| public       | active_products                  | volume_ml                           | numeric                  | YES         | null                                                   |
| public       | active_products                  | dimensions                          | jsonb                    | YES         | null                                                   |
| public       | active_products                  | requires_refrigeration              | boolean                  | YES         | null                                                   |
| public       | active_products                  | shelf_life_days                     | integer                  | YES         | null                                                   |
| public       | active_products                  | minimum_stock                       | integer                  | YES         | null                                                   |
| public       | active_products                  | maximum_stock                       | integer                  | YES         | null                                                   |
| public       | active_products                  | is_active                           | boolean                  | YES         | null                                                   |
| public       | active_products                  | is_featured                         | boolean                  | YES         | null                                                   |
| public       | active_products                  | launch_date                         | date                     | YES         | null                                                   |
| public       | active_products                  | discontinue_date                    | date                     | YES         | null                                                   |
| public       | active_products                  | product_image_url                   | character varying        | YES         | null                                                   |
| public       | active_products                  | gallery_urls                        | jsonb                    | YES         | null                                                   |
| public       | active_products                  | specifications                      | jsonb                    | YES         | null                                                   |
| public       | active_products                  | marketing_tags                      | jsonb                    | YES         | null                                                   |
| public       | active_products                  | sort_order                          | integer                  | YES         | null                                                   |
| public       | active_products                  | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_products                  | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_products                  | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_products                  | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_products                  | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_products                  | brand_slug                          | character varying        | YES         | null                                                   |
| public       | active_products                  | category_name                       | character varying        | YES         | null                                                   |
| public       | active_products                  | category_code                       | character varying        | YES         | null                                                   |
| public       | active_products                  | category_full_path                  | text                     | YES         | null                                                   |
| public       | active_products                  | current_margin                      | numeric                  | YES         | null                                                   |
| public       | active_products                  | margin_gap                          | numeric                  | YES         | null                                                   |
| public       | active_products                  | product_status                      | text                     | YES         | null                                                   |
| public       | active_products                  | days_until_discontinuation          | integer                  | YES         | null                                                   |
| public       | active_products                  | days_since_launch                   | integer                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | id                                  | uuid                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | public_id                           | character varying        | YES         | null                                                   |
| public       | active_promotion_redemptions     | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | client_brand_membership_id          | uuid                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | promotion_id                        | uuid                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | order_type                          | USER-DEFINED             | YES         | null                                                   |
| public       | active_promotion_redemptions     | order_id                            | character varying        | YES         | null                                                   |
| public       | active_promotion_redemptions     | redemption_date                     | date                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | redemption_status                   | USER-DEFINED             | YES         | null                                                   |
| public       | active_promotion_redemptions     | promotion_type_applied              | USER-DEFINED             | YES         | null                                                   |
| public       | active_promotion_redemptions     | original_promotion_value            | numeric                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | applied_discount_amount             | numeric                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | applied_percentage                  | numeric                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | free_items_quantity                 | integer                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | points_multiplier_applied           | numeric                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | bonus_points_awarded                | numeric                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | order_subtotal_at_application       | numeric                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | minimum_met                         | boolean                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | maximum_discount_reached            | boolean                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | rules_validation                    | jsonb                    | YES         | null                                                   |
| public       | active_promotion_redemptions     | auto_applied                        | boolean                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | applied_by                          | uuid                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | validation_required                 | boolean                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | validated_by                        | uuid                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | validated_at                        | timestamp with time zone | YES         | null                                                   |
| public       | active_promotion_redemptions     | reversal_reason                     | text                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | reversed_by                         | uuid                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | reversed_at                         | timestamp with time zone | YES         | null                                                   |
| public       | active_promotion_redemptions     | client_notification_sent            | boolean                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | internal_notes                      | text                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | metadata                            | jsonb                    | YES         | null                                                   |
| public       | active_promotion_redemptions     | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_promotion_redemptions     | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_promotion_redemptions     | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_promotion_redemptions     | client_id                           | uuid                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | client_business_name                | character varying        | YES         | null                                                   |
| public       | active_promotion_redemptions     | client_owner_name                   | character varying        | YES         | null                                                   |
| public       | active_promotion_redemptions     | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_promotion_redemptions     | promotion_name                      | character varying        | YES         | null                                                   |
| public       | active_promotion_redemptions     | promotion_type                      | USER-DEFINED             | YES         | null                                                   |
| public       | active_promotion_redemptions     | promotion_status                    | USER-DEFINED             | YES         | null                                                   |
| public       | active_promotion_redemptions     | applied_by_first_name               | character varying        | YES         | null                                                   |
| public       | active_promotion_redemptions     | applied_by_last_name                | character varying        | YES         | null                                                   |
| public       | active_promotion_redemptions     | validated_by_first_name             | character varying        | YES         | null                                                   |
| public       | active_promotion_redemptions     | validated_by_last_name              | character varying        | YES         | null                                                   |
| public       | active_promotion_redemptions     | reversed_by_first_name              | character varying        | YES         | null                                                   |
| public       | active_promotion_redemptions     | reversed_by_last_name               | character varying        | YES         | null                                                   |
| public       | active_promotion_redemptions     | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_promotion_redemptions     | redemption_display_status           | text                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | days_since_redemption               | integer                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | discount_percentage_effective       | numeric                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | total_benefit_value                 | numeric                  | YES         | null                                                   |
| public       | active_promotion_redemptions     | application_type                    | text                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | validation_status                   | text                     | YES         | null                                                   |
| public       | active_promotion_redemptions     | order_source_description            | text                     | YES         | null                                                   |
| public       | active_promotion_rules           | id                                  | uuid                     | YES         | null                                                   |
| public       | active_promotion_rules           | public_id                           | character varying        | YES         | null                                                   |
| public       | active_promotion_rules           | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_promotion_rules           | promotion_id                        | uuid                     | YES         | null                                                   |
| public       | active_promotion_rules           | rule_type                           | USER-DEFINED             | YES         | null                                                   |
| public       | active_promotion_rules           | rule_name                           | character varying        | YES         | null                                                   |
| public       | active_promotion_rules           | is_inclusion                        | boolean                  | YES         | null                                                   |
| public       | active_promotion_rules           | apply_to_all                        | boolean                  | YES         | null                                                   |
| public       | active_promotion_rules           | target_zones                        | jsonb                    | YES         | null                                                   |
| public       | active_promotion_rules           | target_states                       | jsonb                    | YES         | null                                                   |
| public       | active_promotion_rules           | target_markets                      | jsonb                    | YES         | null                                                   |
| public       | active_promotion_rules           | target_commercial_structures        | jsonb                    | YES         | null                                                   |
| public       | active_promotion_rules           | target_client_types                 | jsonb                    | YES         | null                                                   |
| public       | active_promotion_rules           | target_clients                      | jsonb                    | YES         | null                                                   |
| public       | active_promotion_rules           | target_products                     | jsonb                    | YES         | null                                                   |
| public       | active_promotion_rules           | target_categories                   | jsonb                    | YES         | null                                                   |
| public       | active_promotion_rules           | target_tiers                        | jsonb                    | YES         | null                                                   |
| public       | active_promotion_rules           | custom_conditions                   | jsonb                    | YES         | null                                                   |
| public       | active_promotion_rules           | effective_from                      | date                     | YES         | null                                                   |
| public       | active_promotion_rules           | effective_until                     | date                     | YES         | null                                                   |
| public       | active_promotion_rules           | priority                            | integer                  | YES         | null                                                   |
| public       | active_promotion_rules           | estimated_reach                     | integer                  | YES         | null                                                   |
| public       | active_promotion_rules           | actual_reach                        | integer                  | YES         | null                                                   |
| public       | active_promotion_rules           | rule_description                    | text                     | YES         | null                                                   |
| public       | active_promotion_rules           | validation_query                    | text                     | YES         | null                                                   |
| public       | active_promotion_rules           | is_active                           | boolean                  | YES         | null                                                   |
| public       | active_promotion_rules           | created_by                          | uuid                     | YES         | null                                                   |
| public       | active_promotion_rules           | last_calculated_at                  | timestamp with time zone | YES         | null                                                   |
| public       | active_promotion_rules           | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_promotion_rules           | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_promotion_rules           | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_promotion_rules           | promotion_name                      | character varying        | YES         | null                                                   |
| public       | active_promotion_rules           | promotion_type                      | USER-DEFINED             | YES         | null                                                   |
| public       | active_promotion_rules           | promotion_status                    | USER-DEFINED             | YES         | null                                                   |
| public       | active_promotion_rules           | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_promotion_rules           | created_by_first_name               | character varying        | YES         | null                                                   |
| public       | active_promotion_rules           | created_by_last_name                | character varying        | YES         | null                                                   |
| public       | active_promotion_rules           | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_promotion_rules           | rule_display_status                 | text                     | YES         | null                                                   |
| public       | active_promotion_rules           | reach_accuracy_percentage           | numeric                  | YES         | null                                                   |
| public       | active_promotion_rules           | days_until_expiration               | integer                  | YES         | null                                                   |
| public       | active_promotion_rules           | days_until_activation               | integer                  | YES         | null                                                   |
| public       | active_promotion_rules           | segmentation_type                   | text                     | YES         | null                                                   |
| public       | active_promotions                | id                                  | uuid                     | YES         | null                                                   |
| public       | active_promotions                | public_id                           | character varying        | YES         | null                                                   |
| public       | active_promotions                | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_promotions                | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_promotions                | campaign_id                         | uuid                     | YES         | null                                                   |
| public       | active_promotions                | name                                | character varying        | YES         | null                                                   |
| public       | active_promotions                | description                         | text                     | YES         | null                                                   |
| public       | active_promotions                | promotion_type                      | USER-DEFINED             | YES         | null                                                   |
| public       | active_promotions                | status                              | USER-DEFINED             | YES         | null                                                   |
| public       | active_promotions                | start_date                          | date                     | YES         | null                                                   |
| public       | active_promotions                | end_date                            | date                     | YES         | null                                                   |
| public       | active_promotions                | start_time                          | time without time zone   | YES         | null                                                   |
| public       | active_promotions                | end_time                            | time without time zone   | YES         | null                                                   |
| public       | active_promotions                | days_of_week                        | jsonb                    | YES         | null                                                   |
| public       | active_promotions                | discount_percentage                 | numeric                  | YES         | null                                                   |
| public       | active_promotions                | discount_amount                     | numeric                  | YES         | null                                                   |
| public       | active_promotions                | min_purchase_amount                 | numeric                  | YES         | null                                                   |
| public       | active_promotions                | max_discount_amount                 | numeric                  | YES         | null                                                   |
| public       | active_promotions                | buy_quantity                        | integer                  | YES         | null                                                   |
| public       | active_promotions                | get_quantity                        | integer                  | YES         | null                                                   |
| public       | active_promotions                | points_multiplier                   | numeric                  | YES         | null                                                   |
| public       | active_promotions                | usage_limit_per_client              | integer                  | YES         | null                                                   |
| public       | active_promotions                | usage_limit_total                   | integer                  | YES         | null                                                   |
| public       | active_promotions                | usage_count_total                   | integer                  | YES         | null                                                   |
| public       | active_promotions                | budget_allocated                    | numeric                  | YES         | null                                                   |
| public       | active_promotions                | budget_spent                        | numeric                  | YES         | null                                                   |
| public       | active_promotions                | priority                            | integer                  | YES         | null                                                   |
| public       | active_promotions                | stackable                           | boolean                  | YES         | null                                                   |
| public       | active_promotions                | auto_apply                          | boolean                  | YES         | null                                                   |
| public       | active_promotions                | requires_code                       | boolean                  | YES         | null                                                   |
| public       | active_promotions                | promo_code                          | character varying        | YES         | null                                                   |
| public       | active_promotions                | created_by                          | uuid                     | YES         | null                                                   |
| public       | active_promotions                | approved_by                         | uuid                     | YES         | null                                                   |
| public       | active_promotions                | approved_at                         | timestamp with time zone | YES         | null                                                   |
| public       | active_promotions                | approval_notes                      | text                     | YES         | null                                                   |
| public       | active_promotions                | performance_metrics                 | jsonb                    | YES         | null                                                   |
| public       | active_promotions                | creative_assets                     | jsonb                    | YES         | null                                                   |
| public       | active_promotions                | terms_and_conditions                | text                     | YES         | null                                                   |
| public       | active_promotions                | internal_notes                      | text                     | YES         | null                                                   |
| public       | active_promotions                | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_promotions                | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_promotions                | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_promotions                | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_promotions                | brand_slug                          | character varying        | YES         | null                                                   |
| public       | active_promotions                | campaign_name                       | character varying        | YES         | null                                                   |
| public       | active_promotions                | campaign_type                       | USER-DEFINED             | YES         | null                                                   |
| public       | active_promotions                | created_by_first_name               | character varying        | YES         | null                                                   |
| public       | active_promotions                | created_by_last_name                | character varying        | YES         | null                                                   |
| public       | active_promotions                | approved_by_first_name              | character varying        | YES         | null                                                   |
| public       | active_promotions                | approved_by_last_name               | character varying        | YES         | null                                                   |
| public       | active_promotions                | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_promotions                | promotion_display_status            | text                     | YES         | null                                                   |
| public       | active_promotions                | promotion_duration_days             | integer                  | YES         | null                                                   |
| public       | active_promotions                | days_until_end                      | integer                  | YES         | null                                                   |
| public       | active_promotions                | promotion_progress_percentage       | numeric                  | YES         | null                                                   |
| public       | active_promotions                | usage_percentage                    | numeric                  | YES         | null                                                   |
| public       | active_promotions                | remaining_usage                     | integer                  | YES         | null                                                   |
| public       | active_promotions                | budget_utilization_percentage       | numeric                  | YES         | null                                                   |
| public       | active_promotions                | budget_remaining                    | numeric                  | YES         | null                                                   |
| public       | active_promotions                | valid_today                         | boolean                  | YES         | null                                                   |
| public       | active_promotions                | valid_now                           | boolean                  | YES         | null                                                   |
| public       | active_reward_redemptions        | id                                  | uuid                     | YES         | null                                                   |
| public       | active_reward_redemptions        | public_id                           | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_reward_redemptions        | client_brand_membership_id          | uuid                     | YES         | null                                                   |
| public       | active_reward_redemptions        | reward_id                           | uuid                     | YES         | null                                                   |
| public       | active_reward_redemptions        | points_transaction_id               | uuid                     | YES         | null                                                   |
| public       | active_reward_redemptions        | redemption_date                     | date                     | YES         | null                                                   |
| public       | active_reward_redemptions        | redemption_status                   | USER-DEFINED             | YES         | null                                                   |
| public       | active_reward_redemptions        | applied_to_order_id                 | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | applied_amount                      | numeric                  | YES         | null                                                   |
| public       | active_reward_redemptions        | original_reward_value               | numeric                  | YES         | null                                                   |
| public       | active_reward_redemptions        | expiration_date                     | date                     | YES         | null                                                   |
| public       | active_reward_redemptions        | used_date                           | date                     | YES         | null                                                   |
| public       | active_reward_redemptions        | redemption_code                     | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | redeemed_by                         | uuid                     | YES         | null                                                   |
| public       | active_reward_redemptions        | validated_by                        | uuid                     | YES         | null                                                   |
| public       | active_reward_redemptions        | validation_notes                    | text                     | YES         | null                                                   |
| public       | active_reward_redemptions        | client_notes                        | text                     | YES         | null                                                   |
| public       | active_reward_redemptions        | cancellation_reason                 | text                     | YES         | null                                                   |
| public       | active_reward_redemptions        | cancelled_by                        | uuid                     | YES         | null                                                   |
| public       | active_reward_redemptions        | cancelled_at                        | timestamp with time zone | YES         | null                                                   |
| public       | active_reward_redemptions        | refund_transaction_id               | uuid                     | YES         | null                                                   |
| public       | active_reward_redemptions        | notification_sent                   | boolean                  | YES         | null                                                   |
| public       | active_reward_redemptions        | notification_sent_at                | timestamp with time zone | YES         | null                                                   |
| public       | active_reward_redemptions        | usage_instructions                  | text                     | YES         | null                                                   |
| public       | active_reward_redemptions        | metadata                            | jsonb                    | YES         | null                                                   |
| public       | active_reward_redemptions        | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_reward_redemptions        | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_reward_redemptions        | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_reward_redemptions        | client_id                           | uuid                     | YES         | null                                                   |
| public       | active_reward_redemptions        | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_reward_redemptions        | membership_status                   | USER-DEFINED             | YES         | null                                                   |
| public       | active_reward_redemptions        | client_business_name                | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | client_owner_name                   | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | reward_name                         | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | reward_type                         | USER-DEFINED             | YES         | null                                                   |
| public       | active_reward_redemptions        | reward_points_cost                  | numeric                  | YES         | null                                                   |
| public       | active_reward_redemptions        | redeemed_by_first_name              | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | redeemed_by_last_name               | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | validated_by_first_name             | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | validated_by_last_name              | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | cancelled_by_first_name             | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | cancelled_by_last_name              | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | points_deducted                     | numeric                  | YES         | null                                                   |
| public       | active_reward_redemptions        | points_refunded                     | numeric                  | YES         | null                                                   |
| public       | active_reward_redemptions        | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_reward_redemptions        | redemption_display_status           | text                     | YES         | null                                                   |
| public       | active_reward_redemptions        | days_until_expiration               | integer                  | YES         | null                                                   |
| public       | active_reward_redemptions        | days_since_redemption               | integer                  | YES         | null                                                   |
| public       | active_reward_redemptions        | days_to_use                         | integer                  | YES         | null                                                   |
| public       | active_reward_redemptions        | value_utilization_percentage        | numeric                  | YES         | null                                                   |
| public       | active_reward_redemptions        | actual_savings                      | numeric                  | YES         | null                                                   |
| public       | active_rewards                   | id                                  | uuid                     | YES         | null                                                   |
| public       | active_rewards                   | public_id                           | character varying        | YES         | null                                                   |
| public       | active_rewards                   | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_rewards                   | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_rewards                   | name                                | character varying        | YES         | null                                                   |
| public       | active_rewards                   | description                         | text                     | YES         | null                                                   |
| public       | active_rewards                   | reward_type                         | USER-DEFINED             | YES         | null                                                   |
| public       | active_rewards                   | points_cost                         | numeric                  | YES         | null                                                   |
| public       | active_rewards                   | monetary_value                      | numeric                  | YES         | null                                                   |
| public       | active_rewards                   | discount_percentage                 | numeric                  | YES         | null                                                   |
| public       | active_rewards                   | discount_amount                     | numeric                  | YES         | null                                                   |
| public       | active_rewards                   | product_id                          | uuid                     | YES         | null                                                   |
| public       | active_rewards                   | product_variant_id                  | uuid                     | YES         | null                                                   |
| public       | active_rewards                   | min_purchase_amount                 | numeric                  | YES         | null                                                   |
| public       | active_rewards                   | max_discount_amount                 | numeric                  | YES         | null                                                   |
| public       | active_rewards                   | usage_limit_per_client              | integer                  | YES         | null                                                   |
| public       | active_rewards                   | usage_limit_total                   | integer                  | YES         | null                                                   |
| public       | active_rewards                   | usage_count_total                   | integer                  | YES         | null                                                   |
| public       | active_rewards                   | valid_from                          | date                     | YES         | null                                                   |
| public       | active_rewards                   | valid_until                         | date                     | YES         | null                                                   |
| public       | active_rewards                   | tier_requirements                   | jsonb                    | YES         | null                                                   |
| public       | active_rewards                   | applicable_products                 | jsonb                    | YES         | null                                                   |
| public       | active_rewards                   | applicable_categories               | jsonb                    | YES         | null                                                   |
| public       | active_rewards                   | redemption_instructions             | text                     | YES         | null                                                   |
| public       | active_rewards                   | terms_and_conditions                | text                     | YES         | null                                                   |
| public       | active_rewards                   | reward_image_url                    | character varying        | YES         | null                                                   |
| public       | active_rewards                   | is_featured                         | boolean                  | YES         | null                                                   |
| public       | active_rewards                   | is_active                           | boolean                  | YES         | null                                                   |
| public       | active_rewards                   | auto_apply                          | boolean                  | YES         | null                                                   |
| public       | active_rewards                   | notification_message                | text                     | YES         | null                                                   |
| public       | active_rewards                   | sort_order                          | integer                  | YES         | null                                                   |
| public       | active_rewards                   | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_rewards                   | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_rewards                   | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_rewards                   | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_rewards                   | brand_slug                          | character varying        | YES         | null                                                   |
| public       | active_rewards                   | product_name                        | character varying        | YES         | null                                                   |
| public       | active_rewards                   | product_code                        | character varying        | YES         | null                                                   |
| public       | active_rewards                   | variant_name                        | character varying        | YES         | null                                                   |
| public       | active_rewards                   | variant_code                        | character varying        | YES         | null                                                   |
| public       | active_rewards                   | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_rewards                   | reward_status                       | text                     | YES         | null                                                   |
| public       | active_rewards                   | days_until_expiration               | integer                  | YES         | null                                                   |
| public       | active_rewards                   | days_until_activation               | integer                  | YES         | null                                                   |
| public       | active_rewards                   | remaining_usage                     | integer                  | YES         | null                                                   |
| public       | active_rewards                   | usage_percentage                    | numeric                  | YES         | null                                                   |
| public       | active_rewards                   | value_per_point                     | numeric                  | YES         | null                                                   |
| public       | active_rewards                   | cost_category                       | text                     | YES         | null                                                   |
| public       | active_rewards                   | restriction_type                    | text                     | YES         | null                                                   |
| public       | active_tenants                   | id                                  | uuid                     | YES         | null                                                   |
| public       | active_tenants                   | public_id                           | character varying        | YES         | null                                                   |
| public       | active_tenants                   | name                                | character varying        | YES         | null                                                   |
| public       | active_tenants                   | slug                                | character varying        | YES         | null                                                   |
| public       | active_tenants                   | email                               | character varying        | YES         | null                                                   |
| public       | active_tenants                   | phone                               | character varying        | YES         | null                                                   |
| public       | active_tenants                   | address                             | text                     | YES         | null                                                   |
| public       | active_tenants                   | country                             | character varying        | YES         | null                                                   |
| public       | active_tenants                   | timezone                            | character varying        | YES         | null                                                   |
| public       | active_tenants                   | status                              | USER-DEFINED             | YES         | null                                                   |
| public       | active_tenants                   | subscription_plan                   | USER-DEFINED             | YES         | null                                                   |
| public       | active_tenants                   | trial_ends_at                       | timestamp with time zone | YES         | null                                                   |
| public       | active_tenants                   | settings                            | jsonb                    | YES         | null                                                   |
| public       | active_tenants                   | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_tenants                   | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_tenants                   | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_tiers                     | id                                  | uuid                     | YES         | null                                                   |
| public       | active_tiers                     | public_id                           | character varying        | YES         | null                                                   |
| public       | active_tiers                     | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_tiers                     | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_tiers                     | name                                | character varying        | YES         | null                                                   |
| public       | active_tiers                     | code                                | character varying        | YES         | null                                                   |
| public       | active_tiers                     | description                         | text                     | YES         | null                                                   |
| public       | active_tiers                     | tier_level                          | integer                  | YES         | null                                                   |
| public       | active_tiers                     | min_points_required                 | numeric                  | YES         | null                                                   |
| public       | active_tiers                     | min_visits_required                 | integer                  | YES         | null                                                   |
| public       | active_tiers                     | min_purchases_required              | integer                  | YES         | null                                                   |
| public       | active_tiers                     | min_purchase_amount                 | numeric                  | YES         | null                                                   |
| public       | active_tiers                     | evaluation_period_months            | integer                  | YES         | null                                                   |
| public       | active_tiers                     | points_multiplier                   | numeric                  | YES         | null                                                   |
| public       | active_tiers                     | discount_percentage                 | numeric                  | YES         | null                                                   |
| public       | active_tiers                     | benefits                            | jsonb                    | YES         | null                                                   |
| public       | active_tiers                     | requirements                        | jsonb                    | YES         | null                                                   |
| public       | active_tiers                     | tier_color                          | character varying        | YES         | null                                                   |
| public       | active_tiers                     | tier_icon_url                       | character varying        | YES         | null                                                   |
| public       | active_tiers                     | badge_image_url                     | character varying        | YES         | null                                                   |
| public       | active_tiers                     | is_default                          | boolean                  | YES         | null                                                   |
| public       | active_tiers                     | is_active                           | boolean                  | YES         | null                                                   |
| public       | active_tiers                     | auto_assignment_enabled             | boolean                  | YES         | null                                                   |
| public       | active_tiers                     | auto_assignment_rules               | jsonb                    | YES         | null                                                   |
| public       | active_tiers                     | retention_period_months             | integer                  | YES         | null                                                   |
| public       | active_tiers                     | downgrade_enabled                   | boolean                  | YES         | null                                                   |
| public       | active_tiers                     | upgrade_notification                | boolean                  | YES         | null                                                   |
| public       | active_tiers                     | sort_order                          | integer                  | YES         | null                                                   |
| public       | active_tiers                     | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_tiers                     | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_tiers                     | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_tiers                     | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_tiers                     | brand_slug                          | character varying        | YES         | null                                                   |
| public       | active_tiers                     | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_tiers                     | total_members                       | bigint                   | YES         | null                                                   |
| public       | active_tiers                     | active_members                      | bigint                   | YES         | null                                                   |
| public       | active_tiers                     | previous_tier_min_points            | numeric                  | YES         | null                                                   |
| public       | active_tiers                     | next_tier_min_points                | numeric                  | YES         | null                                                   |
| public       | active_tiers                     | benefits_count                      | integer                  | YES         | null                                                   |
| public       | active_tiers                     | tier_status                         | text                     | YES         | null                                                   |
| public       | active_tiers                     | display_color                       | character varying        | YES         | null                                                   |
| public       | active_tiers                     | tier_value_level                    | text                     | YES         | null                                                   |
| public       | active_user_profiles             | id                                  | uuid                     | YES         | null                                                   |
| public       | active_user_profiles             | user_id                             | uuid                     | YES         | null                                                   |
| public       | active_user_profiles             | public_id                           | character varying        | YES         | null                                                   |
| public       | active_user_profiles             | employee_code                       | character varying        | YES         | null                                                   |
| public       | active_user_profiles             | first_name                          | character varying        | YES         | null                                                   |
| public       | active_user_profiles             | last_name                           | character varying        | YES         | null                                                   |
| public       | active_user_profiles             | email                               | character varying        | YES         | null                                                   |
| public       | active_user_profiles             | phone                               | character varying        | YES         | null                                                   |
| public       | active_user_profiles             | avatar_url                          | character varying        | YES         | null                                                   |
| public       | active_user_profiles             | position                            | character varying        | YES         | null                                                   |
| public       | active_user_profiles             | department                          | character varying        | YES         | null                                                   |
| public       | active_user_profiles             | hire_date                           | date                     | YES         | null                                                   |
| public       | active_user_profiles             | manager_id                          | uuid                     | YES         | null                                                   |
| public       | active_user_profiles             | status                              | USER-DEFINED             | YES         | null                                                   |
| public       | active_user_profiles             | preferences                         | jsonb                    | YES         | null                                                   |
| public       | active_user_profiles             | last_login_at                       | timestamp with time zone | YES         | null                                                   |
| public       | active_user_profiles             | timezone                            | character varying        | YES         | null                                                   |
| public       | active_user_profiles             | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_user_profiles             | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_user_profiles             | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_user_roles                | id                                  | uuid                     | YES         | null                                                   |
| public       | active_user_roles                | user_profile_id                     | uuid                     | YES         | null                                                   |
| public       | active_user_roles                | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_user_roles                | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_user_roles                | role                                | USER-DEFINED             | YES         | null                                                   |
| public       | active_user_roles                | scope                               | USER-DEFINED             | YES         | null                                                   |
| public       | active_user_roles                | is_primary                          | boolean                  | YES         | null                                                   |
| public       | active_user_roles                | granted_by                          | uuid                     | YES         | null                                                   |
| public       | active_user_roles                | granted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_user_roles                | expires_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_user_roles                | status                              | USER-DEFINED             | YES         | null                                                   |
| public       | active_user_roles                | permissions                         | jsonb                    | YES         | null                                                   |
| public       | active_user_roles                | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_user_roles                | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_user_roles                | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_user_roles                | is_currently_active                 | boolean                  | YES         | null                                                   |
| public       | active_visit_assessments         | id                                  | uuid                     | YES         | null                                                   |
| public       | active_visit_assessments         | public_id                           | character varying        | YES         | null                                                   |
| public       | active_visit_assessments         | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_visit_assessments         | visit_id                            | uuid                     | YES         | null                                                   |
| public       | active_visit_assessments         | product_id                          | uuid                     | YES         | null                                                   |
| public       | active_visit_assessments         | product_variant_id                  | uuid                     | YES         | null                                                   |
| public       | active_visit_assessments         | assessment_type                     | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_assessments         | is_present                          | boolean                  | YES         | null                                                   |
| public       | active_visit_assessments         | stock_level                         | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_assessments         | stock_quantity                      | integer                  | YES         | null                                                   |
| public       | active_visit_assessments         | current_price                       | numeric                  | YES         | null                                                   |
| public       | active_visit_assessments         | suggested_price                     | numeric                  | YES         | null                                                   |
| public       | active_visit_assessments         | price_variance_percent              | numeric                  | YES         | null                                                   |
| public       | active_visit_assessments         | package_condition                   | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_assessments         | expiration_date                     | date                     | YES         | null                                                   |
| public       | active_visit_assessments         | shelf_position                      | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_assessments         | shelf_space_cm                      | integer                  | YES         | null                                                   |
| public       | active_visit_assessments         | facing_count                        | integer                  | YES         | null                                                   |
| public       | active_visit_assessments         | competitor_present                  | boolean                  | YES         | null                                                   |
| public       | active_visit_assessments         | competitor_products                 | jsonb                    | YES         | null                                                   |
| public       | active_visit_assessments         | competitor_prices                   | jsonb                    | YES         | null                                                   |
| public       | active_visit_assessments         | display_quality                     | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_assessments         | promotional_materials               | jsonb                    | YES         | null                                                   |
| public       | active_visit_assessments         | assessment_notes                    | text                     | YES         | null                                                   |
| public       | active_visit_assessments         | photo_evidence_urls                 | jsonb                    | YES         | null                                                   |
| public       | active_visit_assessments         | requires_action                     | boolean                  | YES         | null                                                   |
| public       | active_visit_assessments         | recommended_actions                 | jsonb                    | YES         | null                                                   |
| public       | active_visit_assessments         | assessment_score                    | numeric                  | YES         | null                                                   |
| public       | active_visit_assessments         | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_assessments         | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_assessments         | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_assessments         | visit_date                          | date                     | YES         | null                                                   |
| public       | active_visit_assessments         | visit_status                        | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_assessments         | visit_workflow_status               | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_assessments         | advisor_first_name                  | character varying        | YES         | null                                                   |
| public       | active_visit_assessments         | advisor_last_name                   | character varying        | YES         | null                                                   |
| public       | active_visit_assessments         | client_business_name                | character varying        | YES         | null                                                   |
| public       | active_visit_assessments         | product_name                        | character varying        | YES         | null                                                   |
| public       | active_visit_assessments         | product_code                        | character varying        | YES         | null                                                   |
| public       | active_visit_assessments         | variant_name                        | character varying        | YES         | null                                                   |
| public       | active_visit_assessments         | variant_code                        | character varying        | YES         | null                                                   |
| public       | active_visit_assessments         | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_visit_assessments         | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_visit_assessments         | calculated_price_variance           | numeric                  | YES         | null                                                   |
| public       | active_visit_assessments         | assessment_status                   | text                     | YES         | null                                                   |
| public       | active_visit_assessments         | competitor_count                    | integer                  | YES         | null                                                   |
| public       | active_visit_communication_plans | id                                  | uuid                     | YES         | null                                                   |
| public       | active_visit_communication_plans | public_id                           | character varying        | YES         | null                                                   |
| public       | active_visit_communication_plans | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_visit_communication_plans | visit_id                            | uuid                     | YES         | null                                                   |
| public       | active_visit_communication_plans | brand_id                            | uuid                     | YES         | null                                                   |
| public       | active_visit_communication_plans | material_type                       | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_communication_plans | material_name                       | character varying        | YES         | null                                                   |
| public       | active_visit_communication_plans | material_description                | text                     | YES         | null                                                   |
| public       | active_visit_communication_plans | current_status                      | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_communication_plans | planned_action                      | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_communication_plans | installation_location               | character varying        | YES         | null                                                   |
| public       | active_visit_communication_plans | material_size                       | character varying        | YES         | null                                                   |
| public       | active_visit_communication_plans | quantity_current                    | integer                  | YES         | null                                                   |
| public       | active_visit_communication_plans | quantity_planned                    | integer                  | YES         | null                                                   |
| public       | active_visit_communication_plans | installation_date_planned           | date                     | YES         | null                                                   |
| public       | active_visit_communication_plans | installation_date_actual            | date                     | YES         | null                                                   |
| public       | active_visit_communication_plans | installed_by                        | uuid                     | YES         | null                                                   |
| public       | active_visit_communication_plans | material_cost                       | numeric                  | YES         | null                                                   |
| public       | active_visit_communication_plans | installation_cost                   | numeric                  | YES         | null                                                   |
| public       | active_visit_communication_plans | campaign_id                         | uuid                     | YES         | null                                                   |
| public       | active_visit_communication_plans | campaign_duration                   | jsonb                    | YES         | null                                                   |
| public       | active_visit_communication_plans | target_audience                     | character varying        | YES         | null                                                   |
| public       | active_visit_communication_plans | key_message                         | text                     | YES         | null                                                   |
| public       | active_visit_communication_plans | client_approval                     | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_communication_plans | client_approval_notes               | text                     | YES         | null                                                   |
| public       | active_visit_communication_plans | material_condition_notes            | text                     | YES         | null                                                   |
| public       | active_visit_communication_plans | effectiveness_rating                | integer                  | YES         | null                                                   |
| public       | active_visit_communication_plans | photo_before_urls                   | jsonb                    | YES         | null                                                   |
| public       | active_visit_communication_plans | photo_after_urls                    | jsonb                    | YES         | null                                                   |
| public       | active_visit_communication_plans | implementation_notes                | text                     | YES         | null                                                   |
| public       | active_visit_communication_plans | follow_up_required                  | boolean                  | YES         | null                                                   |
| public       | active_visit_communication_plans | follow_up_date                      | date                     | YES         | null                                                   |
| public       | active_visit_communication_plans | follow_up_reason                    | text                     | YES         | null                                                   |
| public       | active_visit_communication_plans | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_communication_plans | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_communication_plans | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_communication_plans | visit_date                          | date                     | YES         | null                                                   |
| public       | active_visit_communication_plans | visit_status                        | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_communication_plans | visit_workflow_status               | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_communication_plans | visit_advisor_first_name            | character varying        | YES         | null                                                   |
| public       | active_visit_communication_plans | visit_advisor_last_name             | character varying        | YES         | null                                                   |
| public       | active_visit_communication_plans | installed_by_first_name             | character varying        | YES         | null                                                   |
| public       | active_visit_communication_plans | installed_by_last_name              | character varying        | YES         | null                                                   |
| public       | active_visit_communication_plans | client_business_name                | character varying        | YES         | null                                                   |
| public       | active_visit_communication_plans | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_visit_communication_plans | brand_slug                          | character varying        | YES         | null                                                   |
| public       | active_visit_communication_plans | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_visit_communication_plans | plan_status                         | text                     | YES         | null                                                   |
| public       | active_visit_communication_plans | campaign_end_date                   | date                     | YES         | null                                                   |
| public       | active_visit_communication_plans | days_until_follow_up                | integer                  | YES         | null                                                   |
| public       | active_visit_communication_plans | total_cost                          | numeric                  | YES         | null                                                   |
| public       | active_visit_communication_plans | photo_before_count                  | integer                  | YES         | null                                                   |
| public       | active_visit_communication_plans | photo_after_count                   | integer                  | YES         | null                                                   |
| public       | active_visit_communication_plans | effectiveness_category              | text                     | YES         | null                                                   |
| public       | active_visit_inventories         | id                                  | uuid                     | YES         | null                                                   |
| public       | active_visit_inventories         | public_id                           | character varying        | YES         | null                                                   |
| public       | active_visit_inventories         | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_visit_inventories         | visit_id                            | uuid                     | YES         | null                                                   |
| public       | active_visit_inventories         | product_id                          | uuid                     | YES         | null                                                   |
| public       | active_visit_inventories         | product_variant_id                  | uuid                     | YES         | null                                                   |
| public       | active_visit_inventories         | current_stock                       | integer                  | YES         | null                                                   |
| public       | active_visit_inventories         | unit_type                           | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_inventories         | location_in_store                   | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_inventories         | expiration_dates                    | jsonb                    | YES         | null                                                   |
| public       | active_visit_inventories         | batch_numbers                       | jsonb                    | YES         | null                                                   |
| public       | active_visit_inventories         | condition_notes                     | text                     | YES         | null                                                   |
| public       | active_visit_inventories         | restock_needed                      | boolean                  | YES         | null                                                   |
| public       | active_visit_inventories         | restock_quantity                    | integer                  | YES         | null                                                   |
| public       | active_visit_inventories         | restock_priority                    | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_inventories         | last_delivery_date                  | date                     | YES         | null                                                   |
| public       | active_visit_inventories         | next_delivery_expected              | date                     | YES         | null                                                   |
| public       | active_visit_inventories         | rotation_quality                    | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_inventories         | storage_conditions                  | jsonb                    | YES         | null                                                   |
| public       | active_visit_inventories         | photo_evidence_urls                 | jsonb                    | YES         | null                                                   |
| public       | active_visit_inventories         | notes                               | text                     | YES         | null                                                   |
| public       | active_visit_inventories         | counted_by                          | uuid                     | YES         | null                                                   |
| public       | active_visit_inventories         | verified_by                         | uuid                     | YES         | null                                                   |
| public       | active_visit_inventories         | count_accuracy                      | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_inventories         | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_inventories         | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_inventories         | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_inventories         | visit_date                          | date                     | YES         | null                                                   |
| public       | active_visit_inventories         | visit_status                        | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_inventories         | visit_workflow_status               | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_inventories         | counted_by_first_name               | character varying        | YES         | null                                                   |
| public       | active_visit_inventories         | counted_by_last_name                | character varying        | YES         | null                                                   |
| public       | active_visit_inventories         | verified_by_first_name              | character varying        | YES         | null                                                   |
| public       | active_visit_inventories         | verified_by_last_name               | character varying        | YES         | null                                                   |
| public       | active_visit_inventories         | client_business_name                | character varying        | YES         | null                                                   |
| public       | active_visit_inventories         | product_name                        | character varying        | YES         | null                                                   |
| public       | active_visit_inventories         | product_code                        | character varying        | YES         | null                                                   |
| public       | active_visit_inventories         | product_minimum_stock               | integer                  | YES         | null                                                   |
| public       | active_visit_inventories         | product_maximum_stock               | integer                  | YES         | null                                                   |
| public       | active_visit_inventories         | variant_name                        | character varying        | YES         | null                                                   |
| public       | active_visit_inventories         | variant_code                        | character varying        | YES         | null                                                   |
| public       | active_visit_inventories         | brand_name                          | character varying        | YES         | null                                                   |
| public       | active_visit_inventories         | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_visit_inventories         | stock_status_vs_product_limits      | text                     | YES         | null                                                   |
| public       | active_visit_inventories         | restock_status                      | text                     | YES         | null                                                   |
| public       | active_visit_inventories         | count_verification_status           | text                     | YES         | null                                                   |
| public       | active_visit_inventories         | nearest_expiration_date             | date                     | YES         | null                                                   |
| public       | active_visit_order_items         | id                                  | uuid                     | YES         | null                                                   |
| public       | active_visit_order_items         | public_id                           | character varying        | YES         | null                                                   |
| public       | active_visit_order_items         | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_visit_order_items         | visit_order_id                      | uuid                     | YES         | null                                                   |
| public       | active_visit_order_items         | product_id                          | uuid                     | YES         | null                                                   |
| public       | active_visit_order_items         | product_variant_id                  | uuid                     | YES         | null                                                   |
| public       | active_visit_order_items         | line_number                         | integer                  | YES         | null                                                   |
| public       | active_visit_order_items         | quantity_ordered                    | integer                  | YES         | null                                                   |
| public       | active_visit_order_items         | quantity_available                  | integer                  | YES         | null                                                   |
| public       | active_visit_order_items         | quantity_confirmed                  | integer                  | YES         | null                                                   |
| public       | active_visit_order_items         | unit_price                          | numeric                  | YES         | null                                                   |
| public       | active_visit_order_items         | suggested_price                     | numeric                  | YES         | null                                                   |
| public       | active_visit_order_items         | unit_cost                           | numeric                  | YES         | null                                                   |
| public       | active_visit_order_items         | line_subtotal                       | numeric                  | YES         | null                                                   |
| public       | active_visit_order_items         | line_discount_amount                | numeric                  | YES         | null                                                   |
| public       | active_visit_order_items         | line_discount_percentage            | numeric                  | YES         | null                                                   |
| public       | active_visit_order_items         | line_total                          | numeric                  | YES         | null                                                   |
| public       | active_visit_order_items         | tax_rate                            | numeric                  | YES         | null                                                   |
| public       | active_visit_order_items         | tax_amount                          | numeric                  | YES         | null                                                   |
| public       | active_visit_order_items         | unit_type                           | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_order_items         | item_source                         | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_order_items         | price_negotiated                    | boolean                  | YES         | null                                                   |
| public       | active_visit_order_items         | original_price                      | numeric                  | YES         | null                                                   |
| public       | active_visit_order_items         | negotiation_reason                  | text                     | YES         | null                                                   |
| public       | active_visit_order_items         | advisor_notes                       | text                     | YES         | null                                                   |
| public       | active_visit_order_items         | client_notes                        | text                     | YES         | null                                                   |
| public       | active_visit_order_items         | delivery_preference                 | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_order_items         | delivery_date_requested             | date                     | YES         | null                                                   |
| public       | active_visit_order_items         | item_priority                       | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_order_items         | item_urgency_notes                  | text                     | YES         | null                                                   |
| public       | active_visit_order_items         | quality_requirements                | text                     | YES         | null                                                   |
| public       | active_visit_order_items         | requires_approval                   | boolean                  | YES         | null                                                   |
| public       | active_visit_order_items         | approved_by                         | uuid                     | YES         | null                                                   |
| public       | active_visit_order_items         | approval_notes                      | text                     | YES         | null                                                   |
| public       | active_visit_order_items         | promotion_manually_applied          | boolean                  | YES         | null                                                   |
| public       | active_visit_order_items         | promotion_suggested_by_system       | boolean                  | YES         | null                                                   |
| public       | active_visit_order_items         | free_item_reason                    | text                     | YES         | null                                                   |
| public       | active_visit_order_items         | sample_item                         | boolean                  | YES         | null                                                   |
| public       | active_visit_order_items         | commission_rate                     | numeric                  | YES         | null                                                   |
| public       | active_visit_order_items         | commission_amount                   | numeric                  | YES         | null                                                   |
| public       | active_visit_order_items         | cross_sell_item                     | boolean                  | YES         | null                                                   |
| public       | active_visit_order_items         | upsell_item                         | boolean                  | YES         | null                                                   |
| public       | active_visit_order_items         | metadata                            | jsonb                    | YES         | null                                                   |
| public       | active_visit_order_items         | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_order_items         | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_order_items         | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_order_items         | visit_order_number                  | character varying        | YES         | null                                                   |
| public       | active_visit_order_items         | parent_order_status                 | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_order_items         | client_id                           | uuid                     | YES         | null                                                   |
| public       | active_visit_order_items         | advisor_id                          | uuid                     | YES         | null                                                   |
| public       | active_visit_order_items         | visit_public_id                     | character varying        | YES         | null                                                   |
| public       | active_visit_order_items         | product_name                        | character varying        | YES         | null                                                   |
| public       | active_visit_order_items         | product_code                        | character varying        | YES         | null                                                   |
| public       | active_visit_order_items         | variant_name                        | character varying        | YES         | null                                                   |
| public       | active_visit_order_items         | variant_code                        | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | id                                  | uuid                     | YES         | null                                                   |
| public       | active_visit_orders              | public_id                           | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_visit_orders              | visit_id                            | uuid                     | YES         | null                                                   |
| public       | active_visit_orders              | client_id                           | uuid                     | YES         | null                                                   |
| public       | active_visit_orders              | advisor_id                          | uuid                     | YES         | null                                                   |
| public       | active_visit_orders              | order_number                        | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | order_type                          | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_orders              | order_status                        | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_orders              | order_date                          | date                     | YES         | null                                                   |
| public       | active_visit_orders              | delivery_date                       | date                     | YES         | null                                                   |
| public       | active_visit_orders              | delivery_address                    | text                     | YES         | null                                                   |
| public       | active_visit_orders              | payment_method                      | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_orders              | payment_terms                       | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | subtotal                            | numeric                  | YES         | null                                                   |
| public       | active_visit_orders              | discount_amount                     | numeric                  | YES         | null                                                   |
| public       | active_visit_orders              | tax_amount                          | numeric                  | YES         | null                                                   |
| public       | active_visit_orders              | total_amount                        | numeric                  | YES         | null                                                   |
| public       | active_visit_orders              | currency                            | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | exchange_rate                       | numeric                  | YES         | null                                                   |
| public       | active_visit_orders              | requires_approval                   | boolean                  | YES         | null                                                   |
| public       | active_visit_orders              | approved_by                         | uuid                     | YES         | null                                                   |
| public       | active_visit_orders              | approved_at                         | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_orders              | invoice_required                    | boolean                  | YES         | null                                                   |
| public       | active_visit_orders              | client_invoice_data_id              | uuid                     | YES         | null                                                   |
| public       | active_visit_orders              | delivery_instructions               | text                     | YES         | null                                                   |
| public       | active_visit_orders              | order_notes                         | text                     | YES         | null                                                   |
| public       | active_visit_orders              | external_order_id                   | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | commission_rate                     | numeric                  | YES         | null                                                   |
| public       | active_visit_orders              | commission_amount                   | numeric                  | YES         | null                                                   |
| public       | active_visit_orders              | order_attachments                   | jsonb                    | YES         | null                                                   |
| public       | active_visit_orders              | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_orders              | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_orders              | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visit_orders              | visit_date                          | date                     | YES         | null                                                   |
| public       | active_visit_orders              | visit_status                        | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_orders              | visit_workflow_status               | USER-DEFINED             | YES         | null                                                   |
| public       | active_visit_orders              | advisor_first_name                  | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | advisor_last_name                   | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | approved_by_first_name              | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | approved_by_last_name               | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | client_business_name                | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | client_owner_name                   | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | invoice_business_name               | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | invoice_rfc                         | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_visit_orders              | order_display_status                | text                     | YES         | null                                                   |
| public       | active_visit_orders              | days_until_delivery                 | integer                  | YES         | null                                                   |
| public       | active_visit_orders              | calculated_commission               | numeric                  | YES         | null                                                   |
| public       | active_visit_orders              | attachment_count                    | integer                  | YES         | null                                                   |
| public       | active_visit_orders              | total_amount_mxn                    | numeric                  | YES         | null                                                   |
| public       | active_visits                    | id                                  | uuid                     | YES         | null                                                   |
| public       | active_visits                    | public_id                           | character varying        | YES         | null                                                   |
| public       | active_visits                    | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_visits                    | advisor_id                          | uuid                     | YES         | null                                                   |
| public       | active_visits                    | client_id                           | uuid                     | YES         | null                                                   |
| public       | active_visits                    | visit_date                          | date                     | YES         | null                                                   |
| public       | active_visits                    | visit_time_start                    | time without time zone   | YES         | null                                                   |
| public       | active_visits                    | visit_time_end                      | time without time zone   | YES         | null                                                   |
| public       | active_visits                    | visit_type                          | USER-DEFINED             | YES         | null                                                   |
| public       | active_visits                    | visit_status                        | USER-DEFINED             | YES         | null                                                   |
| public       | active_visits                    | workflow_status                     | USER-DEFINED             | YES         | null                                                   |
| public       | active_visits                    | location_coordinates                | point                    | YES         | null                                                   |
| public       | active_visits                    | check_in_time                       | timestamp with time zone | YES         | null                                                   |
| public       | active_visits                    | check_out_time                      | timestamp with time zone | YES         | null                                                   |
| public       | active_visits                    | duration_minutes                    | integer                  | YES         | null                                                   |
| public       | active_visits                    | visit_objective                     | text                     | YES         | null                                                   |
| public       | active_visits                    | visit_notes                         | text                     | YES         | null                                                   |
| public       | active_visits                    | next_visit_date                     | date                     | YES         | null                                                   |
| public       | active_visits                    | client_satisfaction_rating          | integer                  | YES         | null                                                   |
| public       | active_visits                    | advisor_notes                       | text                     | YES         | null                                                   |
| public       | active_visits                    | supervisor_notes                    | text                     | YES         | null                                                   |
| public       | active_visits                    | requires_follow_up                  | boolean                  | YES         | null                                                   |
| public       | active_visits                    | follow_up_reason                    | text                     | YES         | null                                                   |
| public       | active_visits                    | weather_conditions                  | character varying        | YES         | null                                                   |
| public       | active_visits                    | visit_attachments                   | jsonb                    | YES         | null                                                   |
| public       | active_visits                    | metadata                            | jsonb                    | YES         | null                                                   |
| public       | active_visits                    | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visits                    | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visits                    | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_visits                    | tenant_name                         | character varying        | YES         | null                                                   |
| public       | active_visits                    | advisor_first_name                  | character varying        | YES         | null                                                   |
| public       | active_visits                    | advisor_last_name                   | character varying        | YES         | null                                                   |
| public       | active_visits                    | advisor_email                       | character varying        | YES         | null                                                   |
| public       | active_visits                    | client_business_name                | character varying        | YES         | null                                                   |
| public       | active_visits                    | client_owner_name                   | character varying        | YES         | null                                                   |
| public       | active_visits                    | client_zone_name                    | character varying        | YES         | null                                                   |
| public       | active_visits                    | client_market_name                  | character varying        | YES         | null                                                   |
| public       | active_visits                    | supervisor_first_name               | character varying        | YES         | null                                                   |
| public       | active_visits                    | supervisor_last_name                | character varying        | YES         | null                                                   |
| public       | active_visits                    | effective_duration_minutes          | numeric                  | YES         | null                                                   |
| public       | active_visits                    | overall_status                      | text                     | YES         | null                                                   |
| public       | active_visits                    | days_since_visit                    | integer                  | YES         | null                                                   |
| public       | active_visits                    | days_until_next_visit               | integer                  | YES         | null                                                   |
| public       | active_zones                     | id                                  | uuid                     | YES         | null                                                   |
| public       | active_zones                     | public_id                           | character varying        | YES         | null                                                   |
| public       | active_zones                     | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | active_zones                     | name                                | character varying        | YES         | null                                                   |
| public       | active_zones                     | code                                | character varying        | YES         | null                                                   |
| public       | active_zones                     | description                         | text                     | YES         | null                                                   |
| public       | active_zones                     | country                             | character varying        | YES         | null                                                   |
| public       | active_zones                     | state                               | character varying        | YES         | null                                                   |
| public       | active_zones                     | cities                              | jsonb                    | YES         | null                                                   |
| public       | active_zones                     | postal_codes                        | jsonb                    | YES         | null                                                   |
| public       | active_zones                     | coordinates                         | jsonb                    | YES         | null                                                   |
| public       | active_zones                     | parent_zone_id                      | uuid                     | YES         | null                                                   |
| public       | active_zones                     | zone_type                           | USER-DEFINED             | YES         | null                                                   |
| public       | active_zones                     | is_active                           | boolean                  | YES         | null                                                   |
| public       | active_zones                     | sort_order                          | integer                  | YES         | null                                                   |
| public       | active_zones                     | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_zones                     | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_zones                     | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | active_zones                     | full_path                           | text                     | YES         | null                                                   |
| public       | active_zones                     | level                               | integer                  | YES         | null                                                   |
| public       | active_zones                     | tenant_name                         | character varying        | YES         | null                                                   |
| public       | brand_membership_stats           | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | brand_membership_stats           | brand_id                            | uuid                     | YES         | null                                                   |
| public       | brand_membership_stats           | brand_name                          | character varying        | YES         | null                                                   |
| public       | brand_membership_stats           | brand_public_id                     | character varying        | YES         | null                                                   |
| public       | brand_membership_stats           | tenant_name                         | character varying        | YES         | null                                                   |
| public       | brand_membership_stats           | total_memberships                   | bigint                   | YES         | null                                                   |
| public       | brand_membership_stats           | active_memberships                  | bigint                   | YES         | null                                                   |
| public       | brand_membership_stats           | pending_memberships                 | bigint                   | YES         | null                                                   |
| public       | brand_membership_stats           | suspended_memberships               | bigint                   | YES         | null                                                   |
| public       | brand_membership_stats           | inactive_memberships                | bigint                   | YES         | null                                                   |
| public       | brand_membership_stats           | rejected_memberships                | bigint                   | YES         | null                                                   |
| public       | brand_membership_stats           | primary_brand_memberships           | bigint                   | YES         | null                                                   |
| public       | brand_membership_stats           | avg_lifetime_points                 | numeric                  | YES         | null                                                   |
| public       | brand_membership_stats           | avg_points_balance                  | numeric                  | YES         | null                                                   |
| public       | brand_membership_stats           | total_lifetime_points               | numeric                  | YES         | null                                                   |
| public       | brand_membership_stats           | total_points_balance                | numeric                  | YES         | null                                                   |
| public       | brand_membership_stats           | first_membership_date               | date                     | YES         | null                                                   |
| public       | brand_membership_stats           | last_membership_date                | date                     | YES         | null                                                   |
| public       | brand_membership_stats           | last_purchase_recorded              | date                     | YES         | null                                                   |
| public       | brand_product_stats              | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | brand_product_stats              | brand_id                            | uuid                     | YES         | null                                                   |
| public       | brand_product_stats              | brand_name                          | character varying        | YES         | null                                                   |
| public       | brand_product_stats              | brand_public_id                     | character varying        | YES         | null                                                   |
| public       | brand_product_stats              | total_products                      | bigint                   | YES         | null                                                   |
| public       | brand_product_stats              | active_products                     | bigint                   | YES         | null                                                   |
| public       | brand_product_stats              | featured_products                   | bigint                   | YES         | null                                                   |
| public       | brand_product_stats              | discontinued_products               | bigint                   | YES         | null                                                   |
| public       | brand_product_stats              | upcoming_products                   | bigint                   | YES         | null                                                   |
| public       | brand_product_stats              | refrigerated_products               | bigint                   | YES         | null                                                   |
| public       | brand_product_stats              | categories_used                     | bigint                   | YES         | null                                                   |
| public       | brand_product_stats              | avg_base_price                      | numeric                  | YES         | null                                                   |
| public       | brand_product_stats              | min_base_price                      | numeric                  | YES         | null                                                   |
| public       | brand_product_stats              | max_base_price                      | numeric                  | YES         | null                                                   |
| public       | brand_product_stats              | avg_current_margin                  | numeric                  | YES         | null                                                   |
| public       | brand_product_stats              | avg_target_margin                   | numeric                  | YES         | null                                                   |
| public       | brand_product_stats              | products_with_cost_data             | bigint                   | YES         | null                                                   |
| public       | brand_product_stats              | products_with_barcode               | bigint                   | YES         | null                                                   |
| public       | brand_tier_member_distribution   | brand_id                            | uuid                     | YES         | null                                                   |
| public       | brand_tier_member_distribution   | brand_name                          | character varying        | YES         | null                                                   |
| public       | brand_tier_member_distribution   | tier_id                             | uuid                     | YES         | null                                                   |
| public       | brand_tier_member_distribution   | tier_name                           | character varying        | YES         | null                                                   |
| public       | brand_tier_member_distribution   | tier_level                          | integer                  | YES         | null                                                   |
| public       | brand_tier_member_distribution   | active_members                      | bigint                   | YES         | null                                                   |
| public       | brand_tier_member_distribution   | total_members                       | bigint                   | YES         | null                                                   |
| public       | brand_tier_stats                 | brand_id                            | uuid                     | YES         | null                                                   |
| public       | brand_tier_stats                 | brand_name                          | character varying        | YES         | null                                                   |
| public       | brand_tier_stats                 | tenant_name                         | character varying        | YES         | null                                                   |
| public       | brand_tier_stats                 | total_tiers                         | bigint                   | YES         | null                                                   |
| public       | brand_tier_stats                 | active_tiers                        | bigint                   | YES         | null                                                   |
| public       | brand_tier_stats                 | auto_assignment_tiers               | bigint                   | YES         | null                                                   |
| public       | brand_tier_stats                 | lowest_tier_points                  | numeric                  | YES         | null                                                   |
| public       | brand_tier_stats                 | highest_tier_points                 | numeric                  | YES         | null                                                   |
| public       | brand_tier_stats                 | avg_points_multiplier               | numeric                  | YES         | null                                                   |
| public       | brand_tier_stats                 | avg_discount_percentage             | numeric                  | YES         | null                                                   |
| public       | brand_tier_stats                 | total_active_members                | bigint                   | YES         | null                                                   |
| public       | brands                           | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | brands                           | public_id                           | character varying        | NO          | generate_brand_public_id()                             |
| public       | brands                           | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | brands                           | name                                | character varying        | NO          | null                                                   |
| public       | brands                           | slug                                | character varying        | NO          | null                                                   |
| public       | brands                           | description                         | text                     | YES         | null                                                   |
| public       | brands                           | logo_url                            | character varying        | YES         | null                                                   |
| public       | brands                           | brand_color_primary                 | character varying        | YES         | null                                                   |
| public       | brands                           | brand_color_secondary               | character varying        | YES         | null                                                   |
| public       | brands                           | contact_email                       | character varying        | YES         | null                                                   |
| public       | brands                           | contact_phone                       | character varying        | YES         | null                                                   |
| public       | brands                           | website                             | character varying        | YES         | null                                                   |
| public       | brands                           | status                              | USER-DEFINED             | YES         | 'draft'::brand_status_enum                             |
| public       | brands                           | settings                            | jsonb                    | YES         | null                                                   |
| public       | brands                           | dashboard_metrics                   | jsonb                    | YES         | null                                                   |
| public       | brands                           | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | brands                           | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | brands                           | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | campaigns                        | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | campaigns                        | public_id                           | character varying        | NO          | generate_campaign_public_id()                          |
| public       | campaigns                        | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | campaigns                        | brand_id                            | uuid                     | NO          | null                                                   |
| public       | campaigns                        | name                                | character varying        | NO          | null                                                   |
| public       | campaigns                        | description                         | text                     | YES         | null                                                   |
| public       | campaigns                        | campaign_type                       | USER-DEFINED             | NO          | null                                                   |
| public       | campaigns                        | status                              | USER-DEFINED             | YES         | 'draft'::campaign_status_enum                          |
| public       | campaigns                        | start_date                          | date                     | NO          | null                                                   |
| public       | campaigns                        | end_date                            | date                     | NO          | null                                                   |
| public       | campaigns                        | budget_total                        | numeric                  | YES         | null                                                   |
| public       | campaigns                        | budget_spent                        | numeric                  | YES         | 0.00                                                   |
| public       | campaigns                        | target_audience                     | jsonb                    | YES         | null                                                   |
| public       | campaigns                        | campaign_objectives                 | jsonb                    | YES         | null                                                   |
| public       | campaigns                        | key_messages                        | jsonb                    | YES         | null                                                   |
| public       | campaigns                        | channels                            | jsonb                    | YES         | null                                                   |
| public       | campaigns                        | geographic_scope                    | jsonb                    | YES         | null                                                   |
| public       | campaigns                        | created_by                          | uuid                     | NO          | null                                                   |
| public       | campaigns                        | approved_by                         | uuid                     | YES         | null                                                   |
| public       | campaigns                        | approved_at                         | timestamp with time zone | YES         | null                                                   |
| public       | campaigns                        | approval_notes                      | text                     | YES         | null                                                   |
| public       | campaigns                        | launch_ready                        | boolean                  | YES         | false                                                  |
| public       | campaigns                        | launch_checklist                    | jsonb                    | YES         | null                                                   |
| public       | campaigns                        | performance_metrics                 | jsonb                    | YES         | null                                                   |
| public       | campaigns                        | roi_target                          | numeric                  | YES         | null                                                   |
| public       | campaigns                        | roi_actual                          | numeric                  | YES         | null                                                   |
| public       | campaigns                        | campaign_tags                       | jsonb                    | YES         | null                                                   |
| public       | campaigns                        | competitive_context                 | text                     | YES         | null                                                   |
| public       | campaigns                        | success_criteria                    | jsonb                    | YES         | null                                                   |
| public       | campaigns                        | post_campaign_analysis              | text                     | YES         | null                                                   |
| public       | campaigns                        | lessons_learned                     | text                     | YES         | null                                                   |
| public       | campaigns                        | attachments                         | jsonb                    | YES         | null                                                   |
| public       | campaigns                        | is_template                         | boolean                  | YES         | false                                                  |
| public       | campaigns                        | template_name                       | character varying        | YES         | null                                                   |
| public       | campaigns                        | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | campaigns                        | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | campaigns                        | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | client_brand_memberships         | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | client_brand_memberships         | public_id                           | character varying        | NO          | generate_client_brand_membership_public_id()           |
| public       | client_brand_memberships         | client_id                           | uuid                     | NO          | null                                                   |
| public       | client_brand_memberships         | brand_id                            | uuid                     | NO          | null                                                   |
| public       | client_brand_memberships         | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | client_brand_memberships         | membership_status                   | USER-DEFINED             | YES         | 'pending'::membership_status_enum                      |
| public       | client_brand_memberships         | joined_date                         | date                     | YES         | null                                                   |
| public       | client_brand_memberships         | approved_by                         | uuid                     | YES         | null                                                   |
| public       | client_brand_memberships         | approved_date                       | date                     | YES         | null                                                   |
| public       | client_brand_memberships         | current_tier_id                     | uuid                     | YES         | null                                                   |
| public       | client_brand_memberships         | lifetime_points                     | numeric                  | YES         | 0.00                                                   |
| public       | client_brand_memberships         | points_balance                      | numeric                  | YES         | 0.00                                                   |
| public       | client_brand_memberships         | last_purchase_date                  | date                     | YES         | null                                                   |
| public       | client_brand_memberships         | last_points_earned_date             | date                     | YES         | null                                                   |
| public       | client_brand_memberships         | membership_preferences              | jsonb                    | YES         | null                                                   |
| public       | client_brand_memberships         | terms_accepted_date                 | timestamp with time zone | YES         | null                                                   |
| public       | client_brand_memberships         | terms_version                       | character varying        | YES         | null                                                   |
| public       | client_brand_memberships         | is_primary_brand                    | boolean                  | YES         | false                                                  |
| public       | client_brand_memberships         | communication_preferences           | jsonb                    | YES         | null                                                   |
| public       | client_brand_memberships         | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | client_brand_memberships         | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | client_brand_memberships         | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | client_invoice_data              | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | client_invoice_data              | public_id                           | character varying        | NO          | generate_client_invoice_data_public_id()               |
| public       | client_invoice_data              | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | client_invoice_data              | client_id                           | uuid                     | NO          | null                                                   |
| public       | client_invoice_data              | person_type                         | USER-DEFINED             | NO          | null                                                   |
| public       | client_invoice_data              | invoice_name                        | character varying        | NO          | null                                                   |
| public       | client_invoice_data              | rfc                                 | character varying        | NO          | null                                                   |
| public       | client_invoice_data              | business_name                       | character varying        | NO          | null                                                   |
| public       | client_invoice_data              | address_street                      | text                     | YES         | null                                                   |
| public       | client_invoice_data              | address_neighborhood                | character varying        | YES         | null                                                   |
| public       | client_invoice_data              | address_city                        | character varying        | YES         | null                                                   |
| public       | client_invoice_data              | address_state                       | character varying        | YES         | null                                                   |
| public       | client_invoice_data              | address_postal_code                 | character varying        | NO          | null                                                   |
| public       | client_invoice_data              | address_country                     | character varying        | YES         | 'MX'::character varying                                |
| public       | client_invoice_data              | cfdi_use                            | character varying        | YES         | 'G03'::character varying                               |
| public       | client_invoice_data              | payment_form                        | character varying        | YES         | '01'::character varying                                |
| public       | client_invoice_data              | payment_method                      | character varying        | YES         | 'PUE'::character varying                               |
| public       | client_invoice_data              | email_invoice                       | character varying        | YES         | null                                                   |
| public       | client_invoice_data              | is_preferred                        | boolean                  | YES         | false                                                  |
| public       | client_invoice_data              | is_active                           | boolean                  | YES         | true                                                   |
| public       | client_invoice_data              | tax_regime                          | character varying        | YES         | null                                                   |
| public       | client_invoice_data              | notes                               | text                     | YES         | null                                                   |
| public       | client_invoice_data              | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | client_invoice_data              | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | client_invoice_data              | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | client_tier_assignments          | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | client_tier_assignments          | public_id                           | character varying        | NO          | generate_client_tier_assignment_public_id()            |
| public       | client_tier_assignments          | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | client_tier_assignments          | client_brand_membership_id          | uuid                     | NO          | null                                                   |
| public       | client_tier_assignments          | tier_id                             | uuid                     | NO          | null                                                   |
| public       | client_tier_assignments          | assignment_type                     | USER-DEFINED             | NO          | null                                                   |
| public       | client_tier_assignments          | assigned_by                         | uuid                     | YES         | null                                                   |
| public       | client_tier_assignments          | assigned_date                       | date                     | NO          | null                                                   |
| public       | client_tier_assignments          | effective_from                      | date                     | NO          | null                                                   |
| public       | client_tier_assignments          | effective_until                     | date                     | YES         | null                                                   |
| public       | client_tier_assignments          | previous_tier_id                    | uuid                     | YES         | null                                                   |
| public       | client_tier_assignments          | reason                              | text                     | YES         | null                                                   |
| public       | client_tier_assignments          | points_at_assignment                | numeric                  | YES         | null                                                   |
| public       | client_tier_assignments          | visits_at_assignment                | integer                  | YES         | null                                                   |
| public       | client_tier_assignments          | purchases_at_assignment             | integer                  | YES         | null                                                   |
| public       | client_tier_assignments          | purchase_amount_at_assignment       | numeric                  | YES         | null                                                   |
| public       | client_tier_assignments          | evaluation_period_start             | date                     | YES         | null                                                   |
| public       | client_tier_assignments          | evaluation_period_end               | date                     | YES         | null                                                   |
| public       | client_tier_assignments          | is_current                          | boolean                  | YES         | true                                                   |
| public       | client_tier_assignments          | auto_assignment_rule_id             | uuid                     | YES         | null                                                   |
| public       | client_tier_assignments          | notification_sent                   | boolean                  | YES         | false                                                  |
| public       | client_tier_assignments          | notification_sent_at                | timestamp with time zone | YES         | null                                                   |
| public       | client_tier_assignments          | client_acknowledgment               | boolean                  | YES         | false                                                  |
| public       | client_tier_assignments          | benefits_activated                  | boolean                  | YES         | true                                                   |
| public       | client_tier_assignments          | assignment_notes                    | text                     | YES         | null                                                   |
| public       | client_tier_assignments          | metadata                            | jsonb                    | YES         | null                                                   |
| public       | client_tier_assignments          | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | client_tier_assignments          | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | client_tier_assignments          | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | client_type_kpi_analysis         | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | client_type_kpi_analysis         | client_type_id                      | uuid                     | YES         | null                                                   |
| public       | client_type_kpi_analysis         | client_type_public_id               | character varying        | YES         | null                                                   |
| public       | client_type_kpi_analysis         | client_type_name                    | character varying        | YES         | null                                                   |
| public       | client_type_kpi_analysis         | client_type_code                    | character varying        | YES         | null                                                   |
| public       | client_type_kpi_analysis         | category                            | USER-DEFINED             | YES         | null                                                   |
| public       | client_type_kpi_analysis         | requires_assessment                 | boolean                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | requires_inventory                  | boolean                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | tenant_name                         | character varying        | YES         | null                                                   |
| public       | client_type_kpi_analysis         | kpi_targets                         | jsonb                    | YES         | null                                                   |
| public       | client_type_kpi_analysis         | target_monthly_visits               | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | target_conversion_rate              | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | target_satisfaction_score           | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | target_assessment_compliance        | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | target_inventory_accuracy           | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | target_average_order_value          | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | total_clients                       | bigint                   | YES         | null                                                   |
| public       | client_type_kpi_analysis         | active_clients                      | bigint                   | YES         | null                                                   |
| public       | client_type_kpi_analysis         | prospect_clients                    | bigint                   | YES         | null                                                   |
| public       | client_type_kpi_analysis         | suspended_clients                   | bigint                   | YES         | null                                                   |
| public       | client_type_kpi_analysis         | inactive_clients                    | bigint                   | YES         | null                                                   |
| public       | client_type_kpi_analysis         | avg_effective_visit_frequency       | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | avg_effective_assessment_frequency  | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | avg_credit_limit                    | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | zones_covered                       | bigint                   | YES         | null                                                   |
| public       | client_type_kpi_analysis         | markets_covered                     | bigint                   | YES         | null                                                   |
| public       | client_type_kpi_analysis         | commercial_structures_used          | bigint                   | YES         | null                                                   |
| public       | client_type_kpi_analysis         | first_client_registered             | date                     | YES         | null                                                   |
| public       | client_type_kpi_analysis         | last_client_registered              | date                     | YES         | null                                                   |
| public       | client_type_kpi_analysis         | last_visit_recorded                 | date                     | YES         | null                                                   |
| public       | client_type_kpi_analysis         | actual_monthly_visits               | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | actual_conversion_rate              | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | actual_satisfaction_score           | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | actual_assessment_compliance        | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | actual_inventory_accuracy           | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | actual_average_order_value          | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | monthly_visits_gap                  | numeric                  | YES         | null                                                   |
| public       | client_type_kpi_analysis         | conversion_rate_gap                 | numeric                  | YES         | null                                                   |
| public       | client_type_tenant_summary       | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | client_type_tenant_summary       | tenant_name                         | character varying        | YES         | null                                                   |
| public       | client_type_tenant_summary       | tenant_public_id                    | character varying        | YES         | null                                                   |
| public       | client_type_tenant_summary       | total_client_types                  | bigint                   | YES         | null                                                   |
| public       | client_type_tenant_summary       | active_client_types                 | bigint                   | YES         | null                                                   |
| public       | client_type_tenant_summary       | total_clients_across_types          | numeric                  | YES         | null                                                   |
| public       | client_type_tenant_summary       | active_clients_across_types         | numeric                  | YES         | null                                                   |
| public       | client_type_tenant_summary       | avg_default_visit_frequency         | numeric                  | YES         | null                                                   |
| public       | client_type_tenant_summary       | avg_assessment_frequency            | numeric                  | YES         | null                                                   |
| public       | client_type_tenant_summary       | retail_types                        | bigint                   | YES         | null                                                   |
| public       | client_type_tenant_summary       | wholesale_types                     | bigint                   | YES         | null                                                   |
| public       | client_type_tenant_summary       | institutional_types                 | bigint                   | YES         | null                                                   |
| public       | client_type_tenant_summary       | online_types                        | bigint                   | YES         | null                                                   |
| public       | client_type_tenant_summary       | hybrid_types                        | bigint                   | YES         | null                                                   |
| public       | client_type_tenant_summary       | types_requiring_assessment          | bigint                   | YES         | null                                                   |
| public       | client_type_tenant_summary       | types_requiring_inventory           | bigint                   | YES         | null                                                   |
| public       | client_types                     | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | client_types                     | public_id                           | character varying        | NO          | generate_client_type_public_id()                       |
| public       | client_types                     | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | client_types                     | name                                | character varying        | NO          | null                                                   |
| public       | client_types                     | code                                | character varying        | NO          | null                                                   |
| public       | client_types                     | category                            | USER-DEFINED             | NO          | null                                                   |
| public       | client_types                     | description                         | text                     | YES         | null                                                   |
| public       | client_types                     | requires_assessment                 | boolean                  | YES         | true                                                   |
| public       | client_types                     | requires_inventory                  | boolean                  | YES         | false                                                  |
| public       | client_types                     | assessment_frequency_days           | integer                  | YES         | 30                                                     |
| public       | client_types                     | default_visit_frequency_days        | integer                  | YES         | 15                                                     |
| public       | client_types                     | characteristics                     | jsonb                    | YES         | null                                                   |
| public       | client_types                     | kpi_targets                         | jsonb                    | YES         | null                                                   |
| public       | client_types                     | is_active                           | boolean                  | YES         | true                                                   |
| public       | client_types                     | sort_order                          | integer                  | YES         | 0                                                      |
| public       | client_types                     | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | client_types                     | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | client_types                     | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | clients                          | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | clients                          | public_id                           | character varying        | NO          | generate_client_public_id()                            |
| public       | clients                          | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | clients                          | user_id                             | uuid                     | YES         | null                                                   |
| public       | clients                          | business_name                       | character varying        | NO          | null                                                   |
| public       | clients                          | legal_name                          | character varying        | YES         | null                                                   |
| public       | clients                          | owner_name                          | character varying        | NO          | null                                                   |
| public       | clients                          | email                               | character varying        | YES         | null                                                   |
| public       | clients                          | phone                               | character varying        | YES         | null                                                   |
| public       | clients                          | whatsapp                            | character varying        | YES         | null                                                   |
| public       | clients                          | tax_id                              | character varying        | YES         | null                                                   |
| public       | clients                          | zone_id                             | uuid                     | NO          | null                                                   |
| public       | clients                          | market_id                           | uuid                     | NO          | null                                                   |
| public       | clients                          | client_type_id                      | uuid                     | NO          | null                                                   |
| public       | clients                          | commercial_structure_id             | uuid                     | NO          | null                                                   |
| public       | clients                          | address_street                      | text                     | NO          | null                                                   |
| public       | clients                          | address_neighborhood                | character varying        | YES         | null                                                   |
| public       | clients                          | address_city                        | character varying        | NO          | null                                                   |
| public       | clients                          | address_state                       | character varying        | NO          | null                                                   |
| public       | clients                          | address_postal_code                 | character varying        | YES         | null                                                   |
| public       | clients                          | address_country                     | character varying        | YES         | 'MX'::character varying                                |
| public       | clients                          | coordinates                         | point                    | YES         | null                                                   |
| public       | clients                          | visit_frequency_days                | integer                  | YES         | null                                                   |
| public       | clients                          | assessment_frequency_days           | integer                  | YES         | null                                                   |
| public       | clients                          | payment_terms                       | character varying        | YES         | null                                                   |
| public       | clients                          | minimum_order                       | numeric                  | YES         | null                                                   |
| public       | clients                          | credit_limit                        | numeric                  | YES         | 0.00                                                   |
| public       | clients                          | status                              | USER-DEFINED             | YES         | 'prospect'::client_status_enum                         |
| public       | clients                          | registration_date                   | date                     | YES         | null                                                   |
| public       | clients                          | last_visit_date                     | date                     | YES         | null                                                   |
| public       | clients                          | notes                               | text                     | YES         | null                                                   |
| public       | clients                          | metadata                            | jsonb                    | YES         | null                                                   |
| public       | clients                          | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | clients                          | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | clients                          | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | clients_with_inherited_values    | id                                  | uuid                     | YES         | null                                                   |
| public       | clients_with_inherited_values    | public_id                           | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | clients_with_inherited_values    | user_id                             | uuid                     | YES         | null                                                   |
| public       | clients_with_inherited_values    | business_name                       | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | legal_name                          | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | owner_name                          | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | email                               | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | phone                               | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | whatsapp                            | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | tax_id                              | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | zone_id                             | uuid                     | YES         | null                                                   |
| public       | clients_with_inherited_values    | market_id                           | uuid                     | YES         | null                                                   |
| public       | clients_with_inherited_values    | client_type_id                      | uuid                     | YES         | null                                                   |
| public       | clients_with_inherited_values    | commercial_structure_id             | uuid                     | YES         | null                                                   |
| public       | clients_with_inherited_values    | address_street                      | text                     | YES         | null                                                   |
| public       | clients_with_inherited_values    | address_neighborhood                | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | address_city                        | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | address_state                       | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | address_postal_code                 | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | address_country                     | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | coordinates                         | point                    | YES         | null                                                   |
| public       | clients_with_inherited_values    | visit_frequency_days                | integer                  | YES         | null                                                   |
| public       | clients_with_inherited_values    | assessment_frequency_days           | integer                  | YES         | null                                                   |
| public       | clients_with_inherited_values    | payment_terms                       | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | minimum_order                       | numeric                  | YES         | null                                                   |
| public       | clients_with_inherited_values    | credit_limit                        | numeric                  | YES         | null                                                   |
| public       | clients_with_inherited_values    | status                              | USER-DEFINED             | YES         | null                                                   |
| public       | clients_with_inherited_values    | registration_date                   | date                     | YES         | null                                                   |
| public       | clients_with_inherited_values    | last_visit_date                     | date                     | YES         | null                                                   |
| public       | clients_with_inherited_values    | notes                               | text                     | YES         | null                                                   |
| public       | clients_with_inherited_values    | metadata                            | jsonb                    | YES         | null                                                   |
| public       | clients_with_inherited_values    | created_at                          | timestamp with time zone | YES         | null                                                   |
| public       | clients_with_inherited_values    | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | clients_with_inherited_values    | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | clients_with_inherited_values    | tenant_name                         | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | zone_name                           | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | zone_code                           | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | market_name                         | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | market_code                         | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | client_type_name                    | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | client_type_code                    | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | commercial_structure_name           | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | commercial_structure_code           | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | effective_visit_frequency_days      | integer                  | YES         | null                                                   |
| public       | clients_with_inherited_values    | effective_assessment_frequency_days | integer                  | YES         | null                                                   |
| public       | clients_with_inherited_values    | effective_payment_terms             | character varying        | YES         | null                                                   |
| public       | clients_with_inherited_values    | effective_minimum_order             | numeric                  | YES         | null                                                   |
| public       | clients_with_inherited_values    | inherits_visit_frequency            | boolean                  | YES         | null                                                   |
| public       | clients_with_inherited_values    | inherits_assessment_frequency       | boolean                  | YES         | null                                                   |
| public       | clients_with_inherited_values    | inherits_payment_terms              | boolean                  | YES         | null                                                   |
| public       | clients_with_inherited_values    | inherits_minimum_order              | boolean                  | YES         | null                                                   |
| public       | commercial_structures            | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | commercial_structures            | public_id                           | character varying        | NO          | generate_commercial_structure_public_id()              |
| public       | commercial_structures            | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | commercial_structures            | name                                | character varying        | NO          | null                                                   |
| public       | commercial_structures            | code                                | character varying        | NO          | null                                                   |
| public       | commercial_structures            | structure_type                      | USER-DEFINED             | NO          | null                                                   |
| public       | commercial_structures            | description                         | text                     | YES         | null                                                   |
| public       | commercial_structures            | contact_company                     | character varying        | YES         | null                                                   |
| public       | commercial_structures            | contact_name                        | character varying        | YES         | null                                                   |
| public       | commercial_structures            | contact_email                       | character varying        | YES         | null                                                   |
| public       | commercial_structures            | contact_phone                       | character varying        | YES         | null                                                   |
| public       | commercial_structures            | coverage_zones                      | jsonb                    | YES         | null                                                   |
| public       | commercial_structures            | supported_markets                   | jsonb                    | YES         | null                                                   |
| public       | commercial_structures            | payment_terms                       | character varying        | YES         | null                                                   |
| public       | commercial_structures            | minimum_order                       | numeric                  | YES         | null                                                   |
| public       | commercial_structures            | delivery_time_days                  | integer                  | YES         | null                                                   |
| public       | commercial_structures            | commission_structure                | jsonb                    | YES         | null                                                   |
| public       | commercial_structures            | is_active                           | boolean                  | YES         | true                                                   |
| public       | commercial_structures            | sort_order                          | integer                  | YES         | 0                                                      |
| public       | commercial_structures            | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | commercial_structures            | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | commercial_structures            | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | market_stats                     | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | market_stats                     | market_id                           | uuid                     | YES         | null                                                   |
| public       | market_stats                     | market_public_id                    | character varying        | YES         | null                                                   |
| public       | market_stats                     | market_name                         | character varying        | YES         | null                                                   |
| public       | market_stats                     | market_code                         | character varying        | YES         | null                                                   |
| public       | market_stats                     | target_volume_min                   | numeric                  | YES         | null                                                   |
| public       | market_stats                     | target_volume_max                   | numeric                  | YES         | null                                                   |
| public       | market_stats                     | characteristics                     | jsonb                    | YES         | null                                                   |
| public       | market_stats                     | tenant_name                         | character varying        | YES         | null                                                   |
| public       | market_stats                     | total_clients                       | bigint                   | YES         | null                                                   |
| public       | market_stats                     | active_clients                      | bigint                   | YES         | null                                                   |
| public       | market_stats                     | prospect_clients                    | bigint                   | YES         | null                                                   |
| public       | market_stats                     | suspended_clients                   | bigint                   | YES         | null                                                   |
| public       | market_stats                     | inactive_clients                    | bigint                   | YES         | null                                                   |
| public       | market_stats                     | zones_covered                       | bigint                   | YES         | null                                                   |
| public       | market_stats                     | client_types_present                | bigint                   | YES         | null                                                   |
| public       | market_stats                     | commercial_structures_used          | bigint                   | YES         | null                                                   |
| public       | market_stats                     | avg_credit_limit                    | numeric                  | YES         | null                                                   |
| public       | market_stats                     | avg_effective_visit_frequency       | numeric                  | YES         | null                                                   |
| public       | market_stats                     | avg_effective_assessment_frequency  | numeric                  | YES         | null                                                   |
| public       | market_stats                     | target_volume_range                 | numeric                  | YES         | null                                                   |
| public       | market_stats                     | target_volume_midpoint              | numeric                  | YES         | null                                                   |
| public       | market_stats                     | first_client_registered             | date                     | YES         | null                                                   |
| public       | market_stats                     | last_client_registered              | date                     | YES         | null                                                   |
| public       | market_stats                     | last_visit_recorded                 | date                     | YES         | null                                                   |
| public       | market_stats                     | actual_monthly_volume               | numeric                  | YES         | null                                                   |
| public       | market_stats                     | actual_average_order_value          | numeric                  | YES         | null                                                   |
| public       | market_stats                     | total_visits_this_month             | integer                  | YES         | null                                                   |
| public       | market_stats                     | total_assessments_this_month        | integer                  | YES         | null                                                   |
| public       | market_stats                     | visit_compliance_rate               | numeric                  | YES         | null                                                   |
| public       | market_stats                     | assessment_compliance_rate          | numeric                  | YES         | null                                                   |
| public       | market_stats                     | volume_gap_to_min_target            | numeric                  | YES         | null                                                   |
| public       | market_stats                     | volume_excess_over_max_target       | numeric                  | YES         | null                                                   |
| public       | market_tenant_summary            | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | market_tenant_summary            | tenant_name                         | character varying        | YES         | null                                                   |
| public       | market_tenant_summary            | tenant_public_id                    | character varying        | YES         | null                                                   |
| public       | market_tenant_summary            | total_markets                       | bigint                   | YES         | null                                                   |
| public       | market_tenant_summary            | active_markets                      | bigint                   | YES         | null                                                   |
| public       | market_tenant_summary            | total_clients_across_markets        | numeric                  | YES         | null                                                   |
| public       | market_tenant_summary            | active_clients_across_markets       | numeric                  | YES         | null                                                   |
| public       | market_tenant_summary            | avg_target_volume_min               | numeric                  | YES         | null                                                   |
| public       | market_tenant_summary            | avg_target_volume_max               | numeric                  | YES         | null                                                   |
| public       | market_tenant_summary            | min_target_volume_across_markets    | numeric                  | YES         | null                                                   |
| public       | market_tenant_summary            | max_target_volume_across_markets    | numeric                  | YES         | null                                                   |
| public       | market_tenant_summary            | total_zones_covered                 | bigint                   | YES         | null                                                   |
| public       | market_tenant_summary            | total_client_types_present          | bigint                   | YES         | null                                                   |
| public       | markets                          | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | markets                          | public_id                           | character varying        | NO          | generate_market_public_id()                            |
| public       | markets                          | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | markets                          | name                                | character varying        | NO          | null                                                   |
| public       | markets                          | code                                | character varying        | NO          | null                                                   |
| public       | markets                          | description                         | text                     | YES         | null                                                   |
| public       | markets                          | characteristics                     | jsonb                    | YES         | null                                                   |
| public       | markets                          | target_volume_min                   | numeric                  | YES         | null                                                   |
| public       | markets                          | target_volume_max                   | numeric                  | YES         | null                                                   |
| public       | markets                          | is_active                           | boolean                  | YES         | true                                                   |
| public       | markets                          | sort_order                          | integer                  | YES         | 0                                                      |
| public       | markets                          | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | markets                          | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | markets                          | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | order_items                      | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | order_items                      | public_id                           | character varying        | NO          | generate_order_item_public_id()                        |
| public       | order_items                      | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | order_items                      | order_id                            | uuid                     | NO          | null                                                   |
| public       | order_items                      | product_id                          | uuid                     | NO          | null                                                   |
| public       | order_items                      | product_variant_id                  | uuid                     | YES         | null                                                   |
| public       | order_items                      | line_number                         | integer                  | NO          | null                                                   |
| public       | order_items                      | quantity_ordered                    | integer                  | NO          | null                                                   |
| public       | order_items                      | quantity_confirmed                  | integer                  | YES         | null                                                   |
| public       | order_items                      | quantity_delivered                  | integer                  | YES         | 0                                                      |
| public       | order_items                      | unit_price                          | numeric                  | NO          | null                                                   |
| public       | order_items                      | unit_cost                           | numeric                  | YES         | null                                                   |
| public       | order_items                      | line_subtotal                       | numeric                  | NO          | null                                                   |
| public       | order_items                      | line_discount_amount                | numeric                  | YES         | 0.00                                                   |
| public       | order_items                      | line_discount_percentage            | numeric                  | YES         | 0.00                                                   |
| public       | order_items                      | line_total                          | numeric                  | NO          | null                                                   |
| public       | order_items                      | tax_rate                            | numeric                  | YES         | 0.0000                                                 |
| public       | order_items                      | tax_amount                          | numeric                  | YES         | 0.00                                                   |
| public       | order_items                      | unit_type                           | USER-DEFINED             | NO          | null                                                   |
| public       | order_items                      | weight_per_unit_grams               | numeric                  | YES         | null                                                   |
| public       | order_items                      | volume_per_unit_ml                  | numeric                  | YES         | null                                                   |
| public       | order_items                      | expiration_date_requested           | date                     | YES         | null                                                   |
| public       | order_items                      | batch_number                        | character varying        | YES         | null                                                   |
| public       | order_items                      | expiration_date_delivered           | date                     | YES         | null                                                   |
| public       | order_items                      | item_status                         | USER-DEFINED             | YES         | 'pending'::order_item_status_enum                      |
| public       | order_items                      | substitution_reason                 | text                     | YES         | null                                                   |
| public       | order_items                      | substitute_product_id               | uuid                     | YES         | null                                                   |
| public       | order_items                      | substitute_variant_id               | uuid                     | YES         | null                                                   |
| public       | order_items                      | delivery_notes                      | text                     | YES         | null                                                   |
| public       | order_items                      | quality_rating                      | integer                  | YES         | null                                                   |
| public       | order_items                      | quality_notes                       | text                     | YES         | null                                                   |
| public       | order_items                      | return_reason                       | text                     | YES         | null                                                   |
| public       | order_items                      | returned_quantity                   | integer                  | YES         | 0                                                      |
| public       | order_items                      | refund_amount                       | numeric                  | YES         | 0.00                                                   |
| public       | order_items                      | commission_rate                     | numeric                  | YES         | null                                                   |
| public       | order_items                      | commission_amount                   | numeric                  | YES         | null                                                   |
| public       | order_items                      | promotion_applied                   | boolean                  | YES         | false                                                  |
| public       | order_items                      | free_item                           | boolean                  | YES         | false                                                  |
| public       | order_items                      | item_notes                          | text                     | YES         | null                                                   |
| public       | order_items                      | metadata                            | jsonb                    | YES         | '{}'::jsonb                                            |
| public       | order_items                      | created_at                          | timestamp with time zone | NO          | now()                                                  |
| public       | order_items                      | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | order_items                      | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | orders                           | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | orders                           | public_id                           | character varying        | NO          | generate_order_public_id()                             |
| public       | orders                           | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | orders                           | client_id                           | uuid                     | NO          | null                                                   |
| public       | orders                           | brand_id                            | uuid                     | NO          | null                                                   |
| public       | orders                           | order_number                        | character varying        | NO          | null                                                   |
| public       | orders                           | order_type                          | USER-DEFINED             | YES         | 'standard'::order_type_enum                            |
| public       | orders                           | order_status                        | USER-DEFINED             | YES         | 'draft'::order_status_enum                             |
| public       | orders                           | order_date                          | date                     | NO          | null                                                   |
| public       | orders                           | requested_delivery_date             | date                     | YES         | null                                                   |
| public       | orders                           | confirmed_delivery_date             | date                     | YES         | null                                                   |
| public       | orders                           | actual_delivery_date                | date                     | YES         | null                                                   |
| public       | orders                           | delivery_time_slot                  | character varying        | YES         | null                                                   |
| public       | orders                           | delivery_address                    | text                     | YES         | null                                                   |
| public       | orders                           | delivery_instructions               | text                     | YES         | null                                                   |
| public       | orders                           | commercial_structure_id             | uuid                     | NO          | null                                                   |
| public       | orders                           | payment_method                      | USER-DEFINED             | YES         | 'cash'::order_payment_method_enum                      |
| public       | orders                           | payment_status                      | USER-DEFINED             | YES         | 'pending'::order_payment_status_enum                   |
| public       | orders                           | payment_terms                       | character varying        | YES         | null                                                   |
| public       | orders                           | subtotal                            | numeric                  | NO          | 0.00                                                   |
| public       | orders                           | discount_amount                     | numeric                  | YES         | 0.00                                                   |
| public       | orders                           | tax_amount                          | numeric                  | YES         | 0.00                                                   |
| public       | orders                           | shipping_cost                       | numeric                  | YES         | 0.00                                                   |
| public       | orders                           | total_amount                        | numeric                  | NO          | 0.00                                                   |
| public       | orders                           | currency                            | character varying        | YES         | 'MXN'::character varying                               |
| public       | orders                           | priority                            | USER-DEFINED             | YES         | 'normal'::order_priority_enum                          |
| public       | orders                           | source_channel                      | USER-DEFINED             | YES         | 'client_portal'::order_source_channel_enum             |
| public       | orders                           | invoice_required                    | boolean                  | YES         | false                                                  |
| public       | orders                           | client_invoice_data_id              | uuid                     | YES         | null                                                   |
| public       | orders                           | assigned_to                         | uuid                     | YES         | null                                                   |
| public       | orders                           | internal_notes                      | text                     | YES         | null                                                   |
| public       | orders                           | client_notes                        | text                     | YES         | null                                                   |
| public       | orders                           | tracking_number                     | character varying        | YES         | null                                                   |
| public       | orders                           | estimated_delivery_time             | interval                 | YES         | null                                                   |
| public       | orders                           | cancellation_reason                 | text                     | YES         | null                                                   |
| public       | orders                           | cancelled_by                        | uuid                     | YES         | null                                                   |
| public       | orders                           | cancelled_at                        | timestamp with time zone | YES         | null                                                   |
| public       | orders                           | order_attachments                   | jsonb                    | YES         | null                                                   |
| public       | orders                           | delivery_confirmation               | jsonb                    | YES         | null                                                   |
| public       | orders                           | customer_rating                     | integer                  | YES         | null                                                   |
| public       | orders                           | customer_feedback                   | text                     | YES         | null                                                   |
| public       | orders                           | metadata                            | jsonb                    | YES         | null                                                   |
| public       | orders                           | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | orders                           | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | orders                           | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | points_transactions              | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | points_transactions              | public_id                           | character varying        | NO          | generate_points_transaction_public_id()                |
| public       | points_transactions              | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | points_transactions              | client_brand_membership_id          | uuid                     | NO          | null                                                   |
| public       | points_transactions              | transaction_type                    | USER-DEFINED             | NO          | null                                                   |
| public       | points_transactions              | points                              | numeric                  | NO          | null                                                   |
| public       | points_transactions              | transaction_date                    | date                     | NO          | null                                                   |
| public       | points_transactions              | source_type                         | USER-DEFINED             | NO          | null                                                   |
| public       | points_transactions              | source_id                           | character varying        | YES         | null                                                   |
| public       | points_transactions              | source_description                  | text                     | YES         | null                                                   |
| public       | points_transactions              | points_rule_id                      | uuid                     | YES         | null                                                   |
| public       | points_transactions              | multiplier_applied                  | numeric                  | YES         | 1.00                                                   |
| public       | points_transactions              | base_points                         | numeric                  | YES         | null                                                   |
| public       | points_transactions              | expiration_date                     | date                     | YES         | null                                                   |
| public       | points_transactions              | is_expired                          | boolean                  | YES         | false                                                  |
| public       | points_transactions              | expired_date                        | date                     | YES         | null                                                   |
| public       | points_transactions              | balance_after                       | numeric                  | NO          | null                                                   |
| public       | points_transactions              | processed_by                        | uuid                     | YES         | null                                                   |
| public       | points_transactions              | approval_required                   | boolean                  | YES         | false                                                  |
| public       | points_transactions              | approved_by                         | uuid                     | YES         | null                                                   |
| public       | points_transactions              | approved_at                         | timestamp with time zone | YES         | null                                                   |
| public       | points_transactions              | reversal_of                         | uuid                     | YES         | null                                                   |
| public       | points_transactions              | reversed_by                         | uuid                     | YES         | null                                                   |
| public       | points_transactions              | campaign_id                         | uuid                     | YES         | null                                                   |
| public       | points_transactions              | promotion_id                        | uuid                     | YES         | null                                                   |
| public       | points_transactions              | notes                               | text                     | YES         | null                                                   |
| public       | points_transactions              | metadata                            | jsonb                    | YES         | null                                                   |
| public       | points_transactions              | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | points_transactions              | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | points_transactions              | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | product_categories               | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | product_categories               | public_id                           | character varying        | NO          | generate_product_category_public_id()                  |
| public       | product_categories               | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | product_categories               | brand_id                            | uuid                     | YES         | null                                                   |
| public       | product_categories               | name                                | character varying        | NO          | null                                                   |
| public       | product_categories               | code                                | character varying        | NO          | null                                                   |
| public       | product_categories               | description                         | text                     | YES         | null                                                   |
| public       | product_categories               | parent_category_id                  | uuid                     | YES         | null                                                   |
| public       | product_categories               | category_level                      | integer                  | YES         | 1                                                      |
| public       | product_categories               | icon_url                            | character varying        | YES         | null                                                   |
| public       | product_categories               | color_hex                           | character varying        | YES         | null                                                   |
| public       | product_categories               | characteristics                     | jsonb                    | YES         | null                                                   |
| public       | product_categories               | is_active                           | boolean                  | YES         | true                                                   |
| public       | product_categories               | sort_order                          | integer                  | YES         | 0                                                      |
| public       | product_categories               | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | product_categories               | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | product_categories               | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | product_category_stats           | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | product_category_stats           | tenant_name                         | character varying        | YES         | null                                                   |
| public       | product_category_stats           | brand_id                            | uuid                     | YES         | null                                                   |
| public       | product_category_stats           | brand_name                          | character varying        | YES         | null                                                   |
| public       | product_category_stats           | total_categories                    | bigint                   | YES         | null                                                   |
| public       | product_category_stats           | active_categories                   | bigint                   | YES         | null                                                   |
| public       | product_category_stats           | root_categories                     | bigint                   | YES         | null                                                   |
| public       | product_category_stats           | level_2_categories                  | bigint                   | YES         | null                                                   |
| public       | product_category_stats           | level_3_categories                  | bigint                   | YES         | null                                                   |
| public       | product_category_stats           | level_4_categories                  | bigint                   | YES         | null                                                   |
| public       | product_category_stats           | level_5_categories                  | bigint                   | YES         | null                                                   |
| public       | product_category_stats           | max_level_depth                     | integer                  | YES         | null                                                   |
| public       | product_category_stats           | global_categories                   | bigint                   | YES         | null                                                   |
| public       | product_category_stats           | brand_specific_categories           | bigint                   | YES         | null                                                   |
| public       | product_variant_stats            | tenant_id                           | uuid                     | YES         | null                                                   |
| public       | product_variant_stats            | product_id                          | uuid                     | YES         | null                                                   |
| public       | product_variant_stats            | product_name                        | character varying        | YES         | null                                                   |
| public       | product_variant_stats            | product_code                        | character varying        | YES         | null                                                   |
| public       | product_variant_stats            | brand_name                          | character varying        | YES         | null                                                   |
| public       | product_variant_stats            | total_variants                      | bigint                   | YES         | null                                                   |
| public       | product_variant_stats            | active_variants                     | bigint                   | YES         | null                                                   |
| public       | product_variant_stats            | default_variants                    | bigint                   | YES         | null                                                   |
| public       | product_variant_stats            | discontinued_variants               | bigint                   | YES         | null                                                   |
| public       | product_variant_stats            | upcoming_variants                   | bigint                   | YES         | null                                                   |
| public       | product_variant_stats            | size_units_used                     | bigint                   | YES         | null                                                   |
| public       | product_variant_stats            | package_types_used                  | bigint                   | YES         | null                                                   |
| public       | product_variant_stats            | min_variant_price                   | numeric                  | YES         | null                                                   |
| public       | product_variant_stats            | max_variant_price                   | numeric                  | YES         | null                                                   |
| public       | product_variant_stats            | avg_variant_price                   | numeric                  | YES         | null                                                   |
| public       | product_variant_stats            | min_size_value                      | numeric                  | YES         | null                                                   |
| public       | product_variant_stats            | max_size_value                      | numeric                  | YES         | null                                                   |
| public       | product_variant_stats            | avg_size_value                      | numeric                  | YES         | null                                                   |
| public       | product_variant_stats            | avg_variant_margin                  | numeric                  | YES         | null                                                   |
| public       | product_variant_stats            | variants_with_cost_data             | bigint                   | YES         | null                                                   |
| public       | product_variant_stats            | variants_with_barcode               | bigint                   | YES         | null                                                   |
| public       | product_variants                 | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | product_variants                 | public_id                           | character varying        | NO          | generate_product_variant_public_id()                   |
| public       | product_variants                 | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | product_variants                 | product_id                          | uuid                     | NO          | null                                                   |
| public       | product_variants                 | variant_name                        | character varying        | NO          | null                                                   |
| public       | product_variants                 | variant_code                        | character varying        | NO          | null                                                   |
| public       | product_variants                 | barcode                             | character varying        | YES         | null                                                   |
| public       | product_variants                 | price                               | numeric                  | NO          | null                                                   |
| public       | product_variants                 | cost                                | numeric                  | YES         | null                                                   |
| public       | product_variants                 | size_value                          | numeric                  | NO          | null                                                   |
| public       | product_variants                 | size_unit                           | USER-DEFINED             | NO          | null                                                   |
| public       | product_variants                 | package_type                        | character varying        | YES         | null                                                   |
| public       | product_variants                 | package_material                    | character varying        | YES         | null                                                   |
| public       | product_variants                 | weight_grams                        | numeric                  | YES         | null                                                   |
| public       | product_variants                 | dimensions                          | jsonb                    | YES         | null                                                   |
| public       | product_variants                 | units_per_case                      | integer                  | YES         | null                                                   |
| public       | product_variants                 | case_dimensions                     | jsonb                    | YES         | null                                                   |
| public       | product_variants                 | case_weight_kg                      | numeric                  | YES         | null                                                   |
| public       | product_variants                 | is_default                          | boolean                  | YES         | false                                                  |
| public       | product_variants                 | is_active                           | boolean                  | YES         | true                                                   |
| public       | product_variants                 | launch_date                         | date                     | YES         | null                                                   |
| public       | product_variants                 | discontinue_date                    | date                     | YES         | null                                                   |
| public       | product_variants                 | variant_image_url                   | character varying        | YES         | null                                                   |
| public       | product_variants                 | sort_order                          | integer                  | YES         | 0                                                      |
| public       | product_variants                 | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | product_variants                 | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | product_variants                 | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | products                         | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | products                         | public_id                           | character varying        | NO          | generate_product_public_id()                           |
| public       | products                         | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | products                         | brand_id                            | uuid                     | NO          | null                                                   |
| public       | products                         | category_id                         | uuid                     | NO          | null                                                   |
| public       | products                         | name                                | character varying        | NO          | null                                                   |
| public       | products                         | code                                | character varying        | NO          | null                                                   |
| public       | products                         | description                         | text                     | YES         | null                                                   |
| public       | products                         | barcode                             | character varying        | YES         | null                                                   |
| public       | products                         | base_price                          | numeric                  | NO          | null                                                   |
| public       | products                         | cost                                | numeric                  | YES         | null                                                   |
| public       | products                         | margin_target                       | numeric                  | YES         | null                                                   |
| public       | products                         | unit_type                           | USER-DEFINED             | YES         | 'pieza'::product_unit_type_enum                        |
| public       | products                         | weight_grams                        | numeric                  | YES         | null                                                   |
| public       | products                         | volume_ml                           | numeric                  | YES         | null                                                   |
| public       | products                         | dimensions                          | jsonb                    | YES         | null                                                   |
| public       | products                         | requires_refrigeration              | boolean                  | YES         | false                                                  |
| public       | products                         | shelf_life_days                     | integer                  | YES         | null                                                   |
| public       | products                         | minimum_stock                       | integer                  | YES         | 0                                                      |
| public       | products                         | maximum_stock                       | integer                  | YES         | null                                                   |
| public       | products                         | is_active                           | boolean                  | YES         | true                                                   |
| public       | products                         | is_featured                         | boolean                  | YES         | false                                                  |
| public       | products                         | launch_date                         | date                     | YES         | null                                                   |
| public       | products                         | discontinue_date                    | date                     | YES         | null                                                   |
| public       | products                         | product_image_url                   | character varying        | YES         | null                                                   |
| public       | products                         | gallery_urls                        | jsonb                    | YES         | null                                                   |
| public       | products                         | specifications                      | jsonb                    | YES         | null                                                   |
| public       | products                         | marketing_tags                      | jsonb                    | YES         | null                                                   |
| public       | products                         | sort_order                          | integer                  | YES         | 0                                                      |
| public       | products                         | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | products                         | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | products                         | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | promotion_redemptions            | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | promotion_redemptions            | public_id                           | character varying        | NO          | generate_promotion_redemption_public_id()              |
| public       | promotion_redemptions            | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | promotion_redemptions            | client_brand_membership_id          | uuid                     | NO          | null                                                   |
| public       | promotion_redemptions            | promotion_id                        | uuid                     | NO          | null                                                   |
| public       | promotion_redemptions            | order_type                          | USER-DEFINED             | NO          | null                                                   |
| public       | promotion_redemptions            | order_id                            | character varying        | NO          | null                                                   |
| public       | promotion_redemptions            | redemption_date                     | date                     | NO          | null                                                   |
| public       | promotion_redemptions            | redemption_status                   | USER-DEFINED             | YES         | 'applied'::promotion_redemption_status_enum            |
| public       | promotion_redemptions            | promotion_type_applied              | USER-DEFINED             | NO          | null                                                   |
| public       | promotion_redemptions            | original_promotion_value            | numeric                  | YES         | null                                                   |
| public       | promotion_redemptions            | applied_discount_amount             | numeric                  | YES         | 0.00                                                   |
| public       | promotion_redemptions            | applied_percentage                  | numeric                  | YES         | null                                                   |
| public       | promotion_redemptions            | free_items_quantity                 | integer                  | YES         | 0                                                      |
| public       | promotion_redemptions            | points_multiplier_applied           | numeric                  | YES         | 1.00                                                   |
| public       | promotion_redemptions            | bonus_points_awarded                | numeric                  | YES         | 0.00                                                   |
| public       | promotion_redemptions            | order_subtotal_at_application       | numeric                  | YES         | null                                                   |
| public       | promotion_redemptions            | minimum_met                         | boolean                  | YES         | true                                                   |
| public       | promotion_redemptions            | maximum_discount_reached            | boolean                  | YES         | false                                                  |
| public       | promotion_redemptions            | rules_validation                    | jsonb                    | YES         | null                                                   |
| public       | promotion_redemptions            | auto_applied                        | boolean                  | YES         | false                                                  |
| public       | promotion_redemptions            | applied_by                          | uuid                     | YES         | null                                                   |
| public       | promotion_redemptions            | validation_required                 | boolean                  | YES         | false                                                  |
| public       | promotion_redemptions            | validated_by                        | uuid                     | YES         | null                                                   |
| public       | promotion_redemptions            | validated_at                        | timestamp with time zone | YES         | null                                                   |
| public       | promotion_redemptions            | reversal_reason                     | text                     | YES         | null                                                   |
| public       | promotion_redemptions            | reversed_by                         | uuid                     | YES         | null                                                   |
| public       | promotion_redemptions            | reversed_at                         | timestamp with time zone | YES         | null                                                   |
| public       | promotion_redemptions            | client_notification_sent            | boolean                  | YES         | false                                                  |
| public       | promotion_redemptions            | internal_notes                      | text                     | YES         | null                                                   |
| public       | promotion_redemptions            | metadata                            | jsonb                    | YES         | null                                                   |
| public       | promotion_redemptions            | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | promotion_redemptions            | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | promotion_redemptions            | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | promotion_rules                  | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | promotion_rules                  | public_id                           | character varying        | NO          | generate_promotion_rule_public_id()                    |
| public       | promotion_rules                  | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | promotion_rules                  | promotion_id                        | uuid                     | NO          | null                                                   |
| public       | promotion_rules                  | rule_type                           | USER-DEFINED             | NO          | null                                                   |
| public       | promotion_rules                  | rule_name                           | character varying        | NO          | null                                                   |
| public       | promotion_rules                  | is_inclusion                        | boolean                  | YES         | true                                                   |
| public       | promotion_rules                  | apply_to_all                        | boolean                  | YES         | false                                                  |
| public       | promotion_rules                  | target_zones                        | jsonb                    | YES         | null                                                   |
| public       | promotion_rules                  | target_states                       | jsonb                    | YES         | null                                                   |
| public       | promotion_rules                  | target_markets                      | jsonb                    | YES         | null                                                   |
| public       | promotion_rules                  | target_commercial_structures        | jsonb                    | YES         | null                                                   |
| public       | promotion_rules                  | target_client_types                 | jsonb                    | YES         | null                                                   |
| public       | promotion_rules                  | target_clients                      | jsonb                    | YES         | null                                                   |
| public       | promotion_rules                  | target_products                     | jsonb                    | YES         | null                                                   |
| public       | promotion_rules                  | target_categories                   | jsonb                    | YES         | null                                                   |
| public       | promotion_rules                  | target_tiers                        | jsonb                    | YES         | null                                                   |
| public       | promotion_rules                  | custom_conditions                   | jsonb                    | YES         | null                                                   |
| public       | promotion_rules                  | effective_from                      | date                     | YES         | null                                                   |
| public       | promotion_rules                  | effective_until                     | date                     | YES         | null                                                   |
| public       | promotion_rules                  | priority                            | integer                  | YES         | 0                                                      |
| public       | promotion_rules                  | estimated_reach                     | integer                  | YES         | null                                                   |
| public       | promotion_rules                  | actual_reach                        | integer                  | YES         | null                                                   |
| public       | promotion_rules                  | rule_description                    | text                     | YES         | null                                                   |
| public       | promotion_rules                  | validation_query                    | text                     | YES         | null                                                   |
| public       | promotion_rules                  | is_active                           | boolean                  | YES         | true                                                   |
| public       | promotion_rules                  | created_by                          | uuid                     | NO          | null                                                   |
| public       | promotion_rules                  | last_calculated_at                  | timestamp with time zone | YES         | null                                                   |
| public       | promotion_rules                  | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | promotion_rules                  | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | promotion_rules                  | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | promotions                       | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | promotions                       | public_id                           | character varying        | NO          | generate_promotion_public_id()                         |
| public       | promotions                       | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | promotions                       | brand_id                            | uuid                     | NO          | null                                                   |
| public       | promotions                       | campaign_id                         | uuid                     | YES         | null                                                   |
| public       | promotions                       | name                                | character varying        | NO          | null                                                   |
| public       | promotions                       | description                         | text                     | YES         | null                                                   |
| public       | promotions                       | promotion_type                      | USER-DEFINED             | NO          | null                                                   |
| public       | promotions                       | status                              | USER-DEFINED             | YES         | 'draft'::promotion_status_enum                         |
| public       | promotions                       | start_date                          | date                     | NO          | null                                                   |
| public       | promotions                       | end_date                            | date                     | NO          | null                                                   |
| public       | promotions                       | start_time                          | time without time zone   | YES         | null                                                   |
| public       | promotions                       | end_time                            | time without time zone   | YES         | null                                                   |
| public       | promotions                       | days_of_week                        | jsonb                    | YES         | null                                                   |
| public       | promotions                       | discount_percentage                 | numeric                  | YES         | null                                                   |
| public       | promotions                       | discount_amount                     | numeric                  | YES         | null                                                   |
| public       | promotions                       | min_purchase_amount                 | numeric                  | YES         | 0.00                                                   |
| public       | promotions                       | max_discount_amount                 | numeric                  | YES         | null                                                   |
| public       | promotions                       | buy_quantity                        | integer                  | YES         | null                                                   |
| public       | promotions                       | get_quantity                        | integer                  | YES         | null                                                   |
| public       | promotions                       | points_multiplier                   | numeric                  | YES         | 1.00                                                   |
| public       | promotions                       | usage_limit_per_client              | integer                  | YES         | null                                                   |
| public       | promotions                       | usage_limit_total                   | integer                  | YES         | null                                                   |
| public       | promotions                       | usage_count_total                   | integer                  | YES         | 0                                                      |
| public       | promotions                       | budget_allocated                    | numeric                  | YES         | null                                                   |
| public       | promotions                       | budget_spent                        | numeric                  | YES         | 0.00                                                   |
| public       | promotions                       | priority                            | integer                  | YES         | 0                                                      |
| public       | promotions                       | stackable                           | boolean                  | YES         | false                                                  |
| public       | promotions                       | auto_apply                          | boolean                  | YES         | false                                                  |
| public       | promotions                       | requires_code                       | boolean                  | YES         | false                                                  |
| public       | promotions                       | promo_code                          | character varying        | YES         | null                                                   |
| public       | promotions                       | created_by                          | uuid                     | NO          | null                                                   |
| public       | promotions                       | approved_by                         | uuid                     | YES         | null                                                   |
| public       | promotions                       | approved_at                         | timestamp with time zone | YES         | null                                                   |
| public       | promotions                       | approval_notes                      | text                     | YES         | null                                                   |
| public       | promotions                       | performance_metrics                 | jsonb                    | YES         | null                                                   |
| public       | promotions                       | creative_assets                     | jsonb                    | YES         | null                                                   |
| public       | promotions                       | terms_and_conditions                | text                     | YES         | null                                                   |
| public       | promotions                       | internal_notes                      | text                     | YES         | null                                                   |
| public       | promotions                       | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | promotions                       | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | promotions                       | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | reward_redemptions               | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | reward_redemptions               | public_id                           | character varying        | NO          | generate_reward_redemption_public_id()                 |
| public       | reward_redemptions               | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | reward_redemptions               | client_brand_membership_id          | uuid                     | NO          | null                                                   |
| public       | reward_redemptions               | reward_id                           | uuid                     | NO          | null                                                   |
| public       | reward_redemptions               | points_transaction_id               | uuid                     | NO          | null                                                   |
| public       | reward_redemptions               | redemption_date                     | date                     | NO          | null                                                   |
| public       | reward_redemptions               | redemption_status                   | USER-DEFINED             | YES         | 'pending'::redemption_status_enum                      |
| public       | reward_redemptions               | applied_to_order_id                 | character varying        | YES         | null                                                   |
| public       | reward_redemptions               | applied_amount                      | numeric                  | YES         | null                                                   |
| public       | reward_redemptions               | original_reward_value               | numeric                  | NO          | null                                                   |
| public       | reward_redemptions               | expiration_date                     | date                     | YES         | null                                                   |
| public       | reward_redemptions               | used_date                           | date                     | YES         | null                                                   |
| public       | reward_redemptions               | redemption_code                     | character varying        | NO          | generate_redemption_code()                             |
| public       | reward_redemptions               | redeemed_by                         | uuid                     | YES         | null                                                   |
| public       | reward_redemptions               | validated_by                        | uuid                     | YES         | null                                                   |
| public       | reward_redemptions               | validation_notes                    | text                     | YES         | null                                                   |
| public       | reward_redemptions               | client_notes                        | text                     | YES         | null                                                   |
| public       | reward_redemptions               | cancellation_reason                 | text                     | YES         | null                                                   |
| public       | reward_redemptions               | cancelled_by                        | uuid                     | YES         | null                                                   |
| public       | reward_redemptions               | cancelled_at                        | timestamp with time zone | YES         | null                                                   |
| public       | reward_redemptions               | refund_transaction_id               | uuid                     | YES         | null                                                   |
| public       | reward_redemptions               | notification_sent                   | boolean                  | YES         | false                                                  |
| public       | reward_redemptions               | notification_sent_at                | timestamp with time zone | YES         | null                                                   |
| public       | reward_redemptions               | usage_instructions                  | text                     | YES         | null                                                   |
| public       | reward_redemptions               | metadata                            | jsonb                    | YES         | null                                                   |
| public       | reward_redemptions               | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | reward_redemptions               | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | reward_redemptions               | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | rewards                          | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | rewards                          | public_id                           | character varying        | NO          | generate_reward_public_id()                            |
| public       | rewards                          | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | rewards                          | brand_id                            | uuid                     | NO          | null                                                   |
| public       | rewards                          | name                                | character varying        | NO          | null                                                   |
| public       | rewards                          | description                         | text                     | YES         | null                                                   |
| public       | rewards                          | reward_type                         | USER-DEFINED             | NO          | null                                                   |
| public       | rewards                          | points_cost                         | numeric                  | NO          | null                                                   |
| public       | rewards                          | monetary_value                      | numeric                  | YES         | null                                                   |
| public       | rewards                          | discount_percentage                 | numeric                  | YES         | null                                                   |
| public       | rewards                          | discount_amount                     | numeric                  | YES         | null                                                   |
| public       | rewards                          | product_id                          | uuid                     | YES         | null                                                   |
| public       | rewards                          | product_variant_id                  | uuid                     | YES         | null                                                   |
| public       | rewards                          | min_purchase_amount                 | numeric                  | YES         | 0.00                                                   |
| public       | rewards                          | max_discount_amount                 | numeric                  | YES         | null                                                   |
| public       | rewards                          | usage_limit_per_client              | integer                  | YES         | null                                                   |
| public       | rewards                          | usage_limit_total                   | integer                  | YES         | null                                                   |
| public       | rewards                          | usage_count_total                   | integer                  | YES         | 0                                                      |
| public       | rewards                          | valid_from                          | date                     | NO          | null                                                   |
| public       | rewards                          | valid_until                         | date                     | YES         | null                                                   |
| public       | rewards                          | tier_requirements                   | jsonb                    | YES         | null                                                   |
| public       | rewards                          | applicable_products                 | jsonb                    | YES         | null                                                   |
| public       | rewards                          | applicable_categories               | jsonb                    | YES         | null                                                   |
| public       | rewards                          | redemption_instructions             | text                     | YES         | null                                                   |
| public       | rewards                          | terms_and_conditions                | text                     | YES         | null                                                   |
| public       | rewards                          | reward_image_url                    | character varying        | YES         | null                                                   |
| public       | rewards                          | is_featured                         | boolean                  | YES         | false                                                  |
| public       | rewards                          | is_active                           | boolean                  | YES         | true                                                   |
| public       | rewards                          | auto_apply                          | boolean                  | YES         | false                                                  |
| public       | rewards                          | notification_message                | text                     | YES         | null                                                   |
| public       | rewards                          | sort_order                          | integer                  | YES         | 0                                                      |
| public       | rewards                          | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | rewards                          | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | rewards                          | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | rewards                          | promotion_id                        | uuid                     | YES         | null                                                   |
| public       | tenants                          | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | tenants                          | public_id                           | character varying        | NO          | generate_tenant_public_id()                            |
| public       | tenants                          | name                                | character varying        | NO          | null                                                   |
| public       | tenants                          | slug                                | character varying        | NO          | null                                                   |
| public       | tenants                          | email                               | character varying        | YES         | null                                                   |
| public       | tenants                          | phone                               | character varying        | YES         | null                                                   |
| public       | tenants                          | address                             | text                     | YES         | null                                                   |
| public       | tenants                          | country                             | character varying        | YES         | 'MX'::character varying                                |
| public       | tenants                          | timezone                            | character varying        | YES         | 'America/Mexico_City'::character varying               |
| public       | tenants                          | status                              | USER-DEFINED             | YES         | 'trial'::tenant_status_enum                            |
| public       | tenants                          | subscription_plan                   | USER-DEFINED             | YES         | 'base'::tenant_subscription_plan_enum                  |
| public       | tenants                          | trial_ends_at                       | timestamp with time zone | YES         | null                                                   |
| public       | tenants                          | settings                            | jsonb                    | YES         | null                                                   |
| public       | tenants                          | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | tenants                          | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | tenants                          | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | tiers                            | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | tiers                            | public_id                           | character varying        | NO          | generate_tier_public_id()                              |
| public       | tiers                            | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | tiers                            | brand_id                            | uuid                     | NO          | null                                                   |
| public       | tiers                            | name                                | character varying        | NO          | null                                                   |
| public       | tiers                            | code                                | character varying        | NO          | null                                                   |
| public       | tiers                            | description                         | text                     | YES         | null                                                   |
| public       | tiers                            | tier_level                          | integer                  | NO          | null                                                   |
| public       | tiers                            | min_points_required                 | numeric                  | NO          | null                                                   |
| public       | tiers                            | min_visits_required                 | integer                  | YES         | 0                                                      |
| public       | tiers                            | min_purchases_required              | integer                  | YES         | 0                                                      |
| public       | tiers                            | min_purchase_amount                 | numeric                  | YES         | 0.00                                                   |
| public       | tiers                            | evaluation_period_months            | integer                  | YES         | 12                                                     |
| public       | tiers                            | points_multiplier                   | numeric                  | YES         | 1.00                                                   |
| public       | tiers                            | discount_percentage                 | numeric                  | YES         | 0.00                                                   |
| public       | tiers                            | benefits                            | jsonb                    | YES         | null                                                   |
| public       | tiers                            | requirements                        | jsonb                    | YES         | null                                                   |
| public       | tiers                            | tier_color                          | character varying        | YES         | null                                                   |
| public       | tiers                            | tier_icon_url                       | character varying        | YES         | null                                                   |
| public       | tiers                            | badge_image_url                     | character varying        | YES         | null                                                   |
| public       | tiers                            | is_default                          | boolean                  | YES         | false                                                  |
| public       | tiers                            | is_active                           | boolean                  | YES         | true                                                   |
| public       | tiers                            | auto_assignment_enabled             | boolean                  | YES         | false                                                  |
| public       | tiers                            | auto_assignment_rules               | jsonb                    | YES         | null                                                   |
| public       | tiers                            | retention_period_months             | integer                  | YES         | 12                                                     |
| public       | tiers                            | downgrade_enabled                   | boolean                  | YES         | true                                                   |
| public       | tiers                            | upgrade_notification                | boolean                  | YES         | true                                                   |
| public       | tiers                            | sort_order                          | integer                  | YES         | 0                                                      |
| public       | tiers                            | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | tiers                            | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | tiers                            | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | user_profiles                    | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | user_profiles                    | user_id                             | uuid                     | NO          | null                                                   |
| public       | user_profiles                    | public_id                           | character varying        | NO          | generate_user_profile_public_id()                      |
| public       | user_profiles                    | employee_code                       | character varying        | YES         | null                                                   |
| public       | user_profiles                    | first_name                          | character varying        | NO          | null                                                   |
| public       | user_profiles                    | last_name                           | character varying        | NO          | null                                                   |
| public       | user_profiles                    | email                               | character varying        | NO          | null                                                   |
| public       | user_profiles                    | phone                               | character varying        | YES         | null                                                   |
| public       | user_profiles                    | avatar_url                          | character varying        | YES         | null                                                   |
| public       | user_profiles                    | position                            | character varying        | YES         | null                                                   |
| public       | user_profiles                    | department                          | character varying        | YES         | null                                                   |
| public       | user_profiles                    | hire_date                           | date                     | YES         | null                                                   |
| public       | user_profiles                    | manager_id                          | uuid                     | YES         | null                                                   |
| public       | user_profiles                    | status                              | USER-DEFINED             | YES         | 'active'::user_profile_status_enum                     |
| public       | user_profiles                    | preferences                         | jsonb                    | YES         | null                                                   |
| public       | user_profiles                    | last_login_at                       | timestamp with time zone | YES         | null                                                   |
| public       | user_profiles                    | timezone                            | character varying        | YES         | 'America/Mexico_City'::character varying               |
| public       | user_profiles                    | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | user_profiles                    | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | user_profiles                    | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | user_profiles                    | tenant_id                           | uuid                     | NO          | 'fe0f429d-2d83-4738-af65-32c655cef656'::uuid           |
| public       | user_roles                       | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | user_roles                       | user_profile_id                     | uuid                     | NO          | null                                                   |
| public       | user_roles                       | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | user_roles                       | brand_id                            | uuid                     | YES         | null                                                   |
| public       | user_roles                       | role                                | USER-DEFINED             | NO          | null                                                   |
| public       | user_roles                       | scope                               | USER-DEFINED             | NO          | null                                                   |
| public       | user_roles                       | is_primary                          | boolean                  | YES         | false                                                  |
| public       | user_roles                       | granted_by                          | uuid                     | YES         | null                                                   |
| public       | user_roles                       | granted_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | user_roles                       | expires_at                          | timestamp with time zone | YES         | null                                                   |
| public       | user_roles                       | status                              | USER-DEFINED             | YES         | 'active'::user_role_status_enum                        |
| public       | user_roles                       | permissions                         | jsonb                    | YES         | null                                                   |
| public       | user_roles                       | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | user_roles                       | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | user_roles                       | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | user_roles                       | zone_id                             | uuid                     | YES         | null                                                   |
| public       | visit_assessments                | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | visit_assessments                | public_id                           | character varying        | NO          | generate_visit_assessment_public_id()                  |
| public       | visit_assessments                | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | visit_assessments                | visit_id                            | uuid                     | NO          | null                                                   |
| public       | visit_assessments                | product_id                          | uuid                     | NO          | null                                                   |
| public       | visit_assessments                | product_variant_id                  | uuid                     | YES         | null                                                   |
| public       | visit_assessments                | assessment_type                     | USER-DEFINED             | NO          | null                                                   |
| public       | visit_assessments                | is_present                          | boolean                  | NO          | null                                                   |
| public       | visit_assessments                | stock_level                         | USER-DEFINED             | YES         | null                                                   |
| public       | visit_assessments                | stock_quantity                      | integer                  | YES         | null                                                   |
| public       | visit_assessments                | current_price                       | numeric                  | YES         | null                                                   |
| public       | visit_assessments                | suggested_price                     | numeric                  | YES         | null                                                   |
| public       | visit_assessments                | price_variance_percent              | numeric                  | YES         | null                                                   |
| public       | visit_assessments                | package_condition                   | USER-DEFINED             | YES         | null                                                   |
| public       | visit_assessments                | expiration_date                     | date                     | YES         | null                                                   |
| public       | visit_assessments                | shelf_position                      | USER-DEFINED             | YES         | null                                                   |
| public       | visit_assessments                | shelf_space_cm                      | integer                  | YES         | null                                                   |
| public       | visit_assessments                | facing_count                        | integer                  | YES         | null                                                   |
| public       | visit_assessments                | competitor_present                  | boolean                  | YES         | false                                                  |
| public       | visit_assessments                | competitor_products                 | jsonb                    | YES         | null                                                   |
| public       | visit_assessments                | competitor_prices                   | jsonb                    | YES         | null                                                   |
| public       | visit_assessments                | display_quality                     | USER-DEFINED             | YES         | null                                                   |
| public       | visit_assessments                | promotional_materials               | jsonb                    | YES         | null                                                   |
| public       | visit_assessments                | assessment_notes                    | text                     | YES         | null                                                   |
| public       | visit_assessments                | photo_evidence_urls                 | jsonb                    | YES         | null                                                   |
| public       | visit_assessments                | requires_action                     | boolean                  | YES         | false                                                  |
| public       | visit_assessments                | recommended_actions                 | jsonb                    | YES         | null                                                   |
| public       | visit_assessments                | assessment_score                    | numeric                  | YES         | null                                                   |
| public       | visit_assessments                | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | visit_assessments                | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | visit_assessments                | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | visit_communication_plans        | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | visit_communication_plans        | public_id                           | character varying        | NO          | generate_visit_communication_plan_public_id()          |
| public       | visit_communication_plans        | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | visit_communication_plans        | visit_id                            | uuid                     | NO          | null                                                   |
| public       | visit_communication_plans        | brand_id                            | uuid                     | NO          | null                                                   |
| public       | visit_communication_plans        | material_type                       | USER-DEFINED             | NO          | null                                                   |
| public       | visit_communication_plans        | material_name                       | character varying        | NO          | null                                                   |
| public       | visit_communication_plans        | material_description                | text                     | YES         | null                                                   |
| public       | visit_communication_plans        | current_status                      | USER-DEFINED             | NO          | null                                                   |
| public       | visit_communication_plans        | planned_action                      | USER-DEFINED             | NO          | null                                                   |
| public       | visit_communication_plans        | installation_location               | character varying        | YES         | null                                                   |
| public       | visit_communication_plans        | material_size                       | character varying        | YES         | null                                                   |
| public       | visit_communication_plans        | quantity_current                    | integer                  | YES         | 0                                                      |
| public       | visit_communication_plans        | quantity_planned                    | integer                  | YES         | 0                                                      |
| public       | visit_communication_plans        | installation_date_planned           | date                     | YES         | null                                                   |
| public       | visit_communication_plans        | installation_date_actual            | date                     | YES         | null                                                   |
| public       | visit_communication_plans        | installed_by                        | uuid                     | YES         | null                                                   |
| public       | visit_communication_plans        | material_cost                       | numeric                  | YES         | null                                                   |
| public       | visit_communication_plans        | installation_cost                   | numeric                  | YES         | null                                                   |
| public       | visit_communication_plans        | campaign_id                         | uuid                     | YES         | null                                                   |
| public       | visit_communication_plans        | campaign_duration                   | jsonb                    | YES         | null                                                   |
| public       | visit_communication_plans        | target_audience                     | character varying        | YES         | null                                                   |
| public       | visit_communication_plans        | key_message                         | text                     | YES         | null                                                   |
| public       | visit_communication_plans        | client_approval                     | USER-DEFINED             | YES         | 'not_required'::client_approval_enum                   |
| public       | visit_communication_plans        | client_approval_notes               | text                     | YES         | null                                                   |
| public       | visit_communication_plans        | material_condition_notes            | text                     | YES         | null                                                   |
| public       | visit_communication_plans        | effectiveness_rating                | integer                  | YES         | null                                                   |
| public       | visit_communication_plans        | photo_before_urls                   | jsonb                    | YES         | null                                                   |
| public       | visit_communication_plans        | photo_after_urls                    | jsonb                    | YES         | null                                                   |
| public       | visit_communication_plans        | implementation_notes                | text                     | YES         | null                                                   |
| public       | visit_communication_plans        | follow_up_required                  | boolean                  | YES         | false                                                  |
| public       | visit_communication_plans        | follow_up_date                      | date                     | YES         | null                                                   |
| public       | visit_communication_plans        | follow_up_reason                    | text                     | YES         | null                                                   |
| public       | visit_communication_plans        | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | visit_communication_plans        | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | visit_communication_plans        | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | visit_inventories                | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | visit_inventories                | public_id                           | character varying        | NO          | generate_visit_inventory_public_id()                   |
| public       | visit_inventories                | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | visit_inventories                | visit_id                            | uuid                     | NO          | null                                                   |
| public       | visit_inventories                | product_id                          | uuid                     | NO          | null                                                   |
| public       | visit_inventories                | product_variant_id                  | uuid                     | YES         | null                                                   |
| public       | visit_inventories                | current_stock                       | integer                  | NO          | null                                                   |
| public       | visit_inventories                | unit_type                           | USER-DEFINED             | NO          | null                                                   |
| public       | visit_inventories                | location_in_store                   | USER-DEFINED             | YES         | 'shelf'::location_in_store_enum                        |
| public       | visit_inventories                | expiration_dates                    | jsonb                    | YES         | null                                                   |
| public       | visit_inventories                | batch_numbers                       | jsonb                    | YES         | null                                                   |
| public       | visit_inventories                | condition_notes                     | text                     | YES         | null                                                   |
| public       | visit_inventories                | restock_needed                      | boolean                  | YES         | false                                                  |
| public       | visit_inventories                | restock_quantity                    | integer                  | YES         | null                                                   |
| public       | visit_inventories                | restock_priority                    | USER-DEFINED             | YES         | null                                                   |
| public       | visit_inventories                | last_delivery_date                  | date                     | YES         | null                                                   |
| public       | visit_inventories                | next_delivery_expected              | date                     | YES         | null                                                   |
| public       | visit_inventories                | rotation_quality                    | USER-DEFINED             | YES         | null                                                   |
| public       | visit_inventories                | storage_conditions                  | jsonb                    | YES         | null                                                   |
| public       | visit_inventories                | photo_evidence_urls                 | jsonb                    | YES         | null                                                   |
| public       | visit_inventories                | notes                               | text                     | YES         | null                                                   |
| public       | visit_inventories                | counted_by                          | uuid                     | NO          | null                                                   |
| public       | visit_inventories                | verified_by                         | uuid                     | YES         | null                                                   |
| public       | visit_inventories                | count_accuracy                      | USER-DEFINED             | YES         | 'exact'::count_accuracy_enum                           |
| public       | visit_inventories                | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | visit_inventories                | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | visit_inventories                | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | visit_order_items                | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | visit_order_items                | public_id                           | character varying        | NO          | generate_visit_order_item_public_id()                  |
| public       | visit_order_items                | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | visit_order_items                | visit_order_id                      | uuid                     | NO          | null                                                   |
| public       | visit_order_items                | product_id                          | uuid                     | NO          | null                                                   |
| public       | visit_order_items                | product_variant_id                  | uuid                     | YES         | null                                                   |
| public       | visit_order_items                | line_number                         | integer                  | NO          | null                                                   |
| public       | visit_order_items                | quantity_ordered                    | integer                  | NO          | null                                                   |
| public       | visit_order_items                | quantity_available                  | integer                  | YES         | null                                                   |
| public       | visit_order_items                | quantity_confirmed                  | integer                  | YES         | null                                                   |
| public       | visit_order_items                | unit_price                          | numeric                  | NO          | null                                                   |
| public       | visit_order_items                | suggested_price                     | numeric                  | YES         | null                                                   |
| public       | visit_order_items                | unit_cost                           | numeric                  | YES         | null                                                   |
| public       | visit_order_items                | line_subtotal                       | numeric                  | NO          | null                                                   |
| public       | visit_order_items                | line_discount_amount                | numeric                  | YES         | 0.00                                                   |
| public       | visit_order_items                | line_discount_percentage            | numeric                  | YES         | 0.00                                                   |
| public       | visit_order_items                | line_total                          | numeric                  | NO          | null                                                   |
| public       | visit_order_items                | tax_rate                            | numeric                  | YES         | 0.0000                                                 |
| public       | visit_order_items                | tax_amount                          | numeric                  | YES         | 0.00                                                   |
| public       | visit_order_items                | unit_type                           | USER-DEFINED             | NO          | null                                                   |
| public       | visit_order_items                | item_source                         | USER-DEFINED             | YES         | 'catalog'::visit_order_item_source_enum                |
| public       | visit_order_items                | price_negotiated                    | boolean                  | YES         | false                                                  |
| public       | visit_order_items                | original_price                      | numeric                  | YES         | null                                                   |
| public       | visit_order_items                | negotiation_reason                  | text                     | YES         | null                                                   |
| public       | visit_order_items                | advisor_notes                       | text                     | YES         | null                                                   |
| public       | visit_order_items                | client_notes                        | text                     | YES         | null                                                   |
| public       | visit_order_items                | delivery_preference                 | USER-DEFINED             | YES         | 'immediate'::visit_order_item_delivery_preference_enum |
| public       | visit_order_items                | delivery_date_requested             | date                     | YES         | null                                                   |
| public       | visit_order_items                | item_priority                       | USER-DEFINED             | YES         | 'normal'::visit_order_item_priority_enum               |
| public       | visit_order_items                | item_urgency_notes                  | text                     | YES         | null                                                   |
| public       | visit_order_items                | quality_requirements                | text                     | YES         | null                                                   |
| public       | visit_order_items                | requires_approval                   | boolean                  | YES         | false                                                  |
| public       | visit_order_items                | approved_by                         | uuid                     | YES         | null                                                   |
| public       | visit_order_items                | approval_notes                      | text                     | YES         | null                                                   |
| public       | visit_order_items                | promotion_manually_applied          | boolean                  | YES         | false                                                  |
| public       | visit_order_items                | promotion_suggested_by_system       | boolean                  | YES         | false                                                  |
| public       | visit_order_items                | free_item_reason                    | text                     | YES         | null                                                   |
| public       | visit_order_items                | sample_item                         | boolean                  | YES         | false                                                  |
| public       | visit_order_items                | commission_rate                     | numeric                  | YES         | null                                                   |
| public       | visit_order_items                | commission_amount                   | numeric                  | YES         | null                                                   |
| public       | visit_order_items                | cross_sell_item                     | boolean                  | YES         | false                                                  |
| public       | visit_order_items                | upsell_item                         | boolean                  | YES         | false                                                  |
| public       | visit_order_items                | metadata                            | jsonb                    | YES         | '{}'::jsonb                                            |
| public       | visit_order_items                | created_at                          | timestamp with time zone | NO          | now()                                                  |
| public       | visit_order_items                | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | visit_order_items                | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | visit_orders                     | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | visit_orders                     | public_id                           | character varying        | NO          | generate_visit_order_public_id()                       |
| public       | visit_orders                     | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | visit_orders                     | visit_id                            | uuid                     | NO          | null                                                   |
| public       | visit_orders                     | client_id                           | uuid                     | NO          | null                                                   |
| public       | visit_orders                     | advisor_id                          | uuid                     | NO          | null                                                   |
| public       | visit_orders                     | order_number                        | character varying        | YES         | null                                                   |
| public       | visit_orders                     | order_type                          | USER-DEFINED             | YES         | 'immediate'::visit_order_type_enum                     |
| public       | visit_orders                     | order_status                        | USER-DEFINED             | YES         | 'draft'::visit_order_status_enum                       |
| public       | visit_orders                     | order_date                          | date                     | NO          | null                                                   |
| public       | visit_orders                     | delivery_date                       | date                     | YES         | null                                                   |
| public       | visit_orders                     | delivery_address                    | text                     | YES         | null                                                   |
| public       | visit_orders                     | payment_method                      | USER-DEFINED             | YES         | 'cash'::visit_order_payment_method_enum                |
| public       | visit_orders                     | payment_terms                       | character varying        | YES         | null                                                   |
| public       | visit_orders                     | subtotal                            | numeric                  | NO          | 0.00                                                   |
| public       | visit_orders                     | discount_amount                     | numeric                  | YES         | 0.00                                                   |
| public       | visit_orders                     | tax_amount                          | numeric                  | YES         | 0.00                                                   |
| public       | visit_orders                     | total_amount                        | numeric                  | NO          | 0.00                                                   |
| public       | visit_orders                     | currency                            | character varying        | YES         | 'MXN'::character varying                               |
| public       | visit_orders                     | exchange_rate                       | numeric                  | YES         | 1.0000                                                 |
| public       | visit_orders                     | requires_approval                   | boolean                  | YES         | false                                                  |
| public       | visit_orders                     | approved_by                         | uuid                     | YES         | null                                                   |
| public       | visit_orders                     | approved_at                         | timestamp with time zone | YES         | null                                                   |
| public       | visit_orders                     | invoice_required                    | boolean                  | YES         | false                                                  |
| public       | visit_orders                     | client_invoice_data_id              | uuid                     | YES         | null                                                   |
| public       | visit_orders                     | delivery_instructions               | text                     | YES         | null                                                   |
| public       | visit_orders                     | order_notes                         | text                     | YES         | null                                                   |
| public       | visit_orders                     | external_order_id                   | character varying        | YES         | null                                                   |
| public       | visit_orders                     | commission_rate                     | numeric                  | YES         | null                                                   |
| public       | visit_orders                     | commission_amount                   | numeric                  | YES         | null                                                   |
| public       | visit_orders                     | order_attachments                   | jsonb                    | YES         | null                                                   |
| public       | visit_orders                     | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | visit_orders                     | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | visit_orders                     | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | visits                           | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | visits                           | public_id                           | character varying        | NO          | generate_visit_public_id()                             |
| public       | visits                           | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | visits                           | advisor_id                          | uuid                     | NO          | null                                                   |
| public       | visits                           | client_id                           | uuid                     | NO          | null                                                   |
| public       | visits                           | visit_date                          | date                     | NO          | null                                                   |
| public       | visits                           | visit_time_start                    | time without time zone   | YES         | null                                                   |
| public       | visits                           | visit_time_end                      | time without time zone   | YES         | null                                                   |
| public       | visits                           | visit_type                          | USER-DEFINED             | YES         | 'scheduled'::visit_type_enum                           |
| public       | visits                           | visit_status                        | USER-DEFINED             | YES         | 'planned'::visit_status_enum                           |
| public       | visits                           | workflow_status                     | USER-DEFINED             | YES         | 'assessment_pending'::visit_workflow_status_enum       |
| public       | visits                           | location_coordinates                | point                    | YES         | null                                                   |
| public       | visits                           | check_in_time                       | timestamp with time zone | YES         | null                                                   |
| public       | visits                           | check_out_time                      | timestamp with time zone | YES         | null                                                   |
| public       | visits                           | duration_minutes                    | integer                  | YES         | null                                                   |
| public       | visits                           | visit_objective                     | text                     | YES         | null                                                   |
| public       | visits                           | visit_notes                         | text                     | YES         | null                                                   |
| public       | visits                           | next_visit_date                     | date                     | YES         | null                                                   |
| public       | visits                           | client_satisfaction_rating          | integer                  | YES         | null                                                   |
| public       | visits                           | advisor_notes                       | text                     | YES         | null                                                   |
| public       | visits                           | supervisor_notes                    | text                     | YES         | null                                                   |
| public       | visits                           | requires_follow_up                  | boolean                  | YES         | false                                                  |
| public       | visits                           | follow_up_reason                    | text                     | YES         | null                                                   |
| public       | visits                           | weather_conditions                  | character varying        | YES         | null                                                   |
| public       | visits                           | visit_attachments                   | jsonb                    | YES         | null                                                   |
| public       | visits                           | metadata                            | jsonb                    | YES         | null                                                   |
| public       | visits                           | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | visits                           | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | visits                           | deleted_at                          | timestamp with time zone | YES         | null                                                   |
| public       | zones                            | id                                  | uuid                     | NO          | gen_random_uuid()                                      |
| public       | zones                            | public_id                           | character varying        | NO          | generate_zone_public_id()                              |
| public       | zones                            | tenant_id                           | uuid                     | NO          | null                                                   |
| public       | zones                            | name                                | character varying        | NO          | null                                                   |
| public       | zones                            | code                                | character varying        | NO          | null                                                   |
| public       | zones                            | description                         | text                     | YES         | null                                                   |
| public       | zones                            | country                             | character varying        | YES         | 'MX'::character varying                                |
| public       | zones                            | state                               | character varying        | YES         | null                                                   |
| public       | zones                            | cities                              | jsonb                    | YES         | null                                                   |
| public       | zones                            | postal_codes                        | jsonb                    | YES         | null                                                   |
| public       | zones                            | coordinates                         | jsonb                    | YES         | null                                                   |
| public       | zones                            | parent_zone_id                      | uuid                     | YES         | null                                                   |
| public       | zones                            | zone_type                           | USER-DEFINED             | NO          | null                                                   |
| public       | zones                            | is_active                           | boolean                  | YES         | true                                                   |
| public       | zones                            | sort_order                          | integer                  | YES         | 0                                                      |
| public       | zones                            | created_at                          | timestamp with time zone | YES         | now()                                                  |
| public       | zones                            | updated_at                          | timestamp with time zone | YES         | null                                                   |
| public       | zones                            | deleted_at                          | timestamp with time zone | YES         | null                                                   |

## 3. Constraints y relaciones

| constraint_name                                         | table_name                | column_name                | foreign_table_name        | foreign_column_name | constraint_type |
| ------------------------------------------------------- | ------------------------- | -------------------------- | ------------------------- | ------------------- | --------------- |
| brands_tenant_id_fkey                                   | brands                    | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| brands_pkey                                             | brands                    | id                         | brands                    | id                  | PRIMARY KEY     |
| brands_public_id_key                                    | brands                    | public_id                  | brands                    | public_id           | UNIQUE          |
| brands_slug_key                                         | brands                    | slug                       | brands                    | slug                | UNIQUE          |
| campaigns_brand_id_fkey                                 | campaigns                 | brand_id                   | brands                    | id                  | FOREIGN KEY     |
| campaigns_created_by_fkey                               | campaigns                 | created_by                 | user_profiles             | id                  | FOREIGN KEY     |
| campaigns_approved_by_fkey                              | campaigns                 | approved_by                | user_profiles             | id                  | FOREIGN KEY     |
| campaigns_tenant_id_fkey                                | campaigns                 | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| campaigns_pkey                                          | campaigns                 | id                         | campaigns                 | id                  | PRIMARY KEY     |
| campaigns_public_id_key                                 | campaigns                 | public_id                  | campaigns                 | public_id           | UNIQUE          |
| client_brand_memberships_brand_id_fkey                  | client_brand_memberships  | brand_id                   | brands                    | id                  | FOREIGN KEY     |
| client_brand_memberships_current_tier_id_fkey           | client_brand_memberships  | current_tier_id            | tiers                     | id                  | FOREIGN KEY     |
| client_brand_memberships_tenant_id_fkey                 | client_brand_memberships  | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| client_brand_memberships_approved_by_fkey               | client_brand_memberships  | approved_by                | user_profiles             | id                  | FOREIGN KEY     |
| client_brand_memberships_client_id_fkey                 | client_brand_memberships  | client_id                  | clients                   | id                  | FOREIGN KEY     |
| client_brand_memberships_pkey                           | client_brand_memberships  | id                         | client_brand_memberships  | id                  | PRIMARY KEY     |
| client_brand_memberships_public_id_key                  | client_brand_memberships  | public_id                  | client_brand_memberships  | public_id           | UNIQUE          |
| client_brand_memberships_client_brand_unique            | client_brand_memberships  | client_id                  | client_brand_memberships  | brand_id            | UNIQUE          |
| client_brand_memberships_client_brand_unique            | client_brand_memberships  | client_id                  | client_brand_memberships  | client_id           | UNIQUE          |
| client_brand_memberships_client_brand_unique            | client_brand_memberships  | brand_id                   | client_brand_memberships  | brand_id            | UNIQUE          |
| client_brand_memberships_client_brand_unique            | client_brand_memberships  | brand_id                   | client_brand_memberships  | client_id           | UNIQUE          |
| client_invoice_data_client_id_fkey                      | client_invoice_data       | client_id                  | clients                   | id                  | FOREIGN KEY     |
| client_invoice_data_tenant_id_fkey                      | client_invoice_data       | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| client_invoice_data_pkey                                | client_invoice_data       | id                         | client_invoice_data       | id                  | PRIMARY KEY     |
| client_invoice_data_public_id_key                       | client_invoice_data       | public_id                  | client_invoice_data       | public_id           | UNIQUE          |
| client_tier_assignments_tenant_id_fkey                  | client_tier_assignments   | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| client_tier_assignments_tier_id_fkey                    | client_tier_assignments   | tier_id                    | tiers                     | id                  | FOREIGN KEY     |
| client_tier_assignments_assigned_by_fkey                | client_tier_assignments   | assigned_by                | user_profiles             | id                  | FOREIGN KEY     |
| client_tier_assignments_previous_tier_id_fkey           | client_tier_assignments   | previous_tier_id           | tiers                     | id                  | FOREIGN KEY     |
| client_tier_assignments_client_brand_membership_id_fkey | client_tier_assignments   | client_brand_membership_id | client_brand_memberships  | id                  | FOREIGN KEY     |
| client_tier_assignments_pkey                            | client_tier_assignments   | id                         | client_tier_assignments   | id                  | PRIMARY KEY     |
| client_tier_assignments_public_id_key                   | client_tier_assignments   | public_id                  | client_tier_assignments   | public_id           | UNIQUE          |
| client_types_tenant_id_fkey                             | client_types              | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| client_types_pkey                                       | client_types              | id                         | client_types              | id                  | PRIMARY KEY     |
| client_types_tenant_code_unique                         | client_types              | code                       | client_types              | tenant_id           | UNIQUE          |
| client_types_public_id_key                              | client_types              | public_id                  | client_types              | public_id           | UNIQUE          |
| client_types_tenant_code_unique                         | client_types              | tenant_id                  | client_types              | code                | UNIQUE          |
| client_types_tenant_code_unique                         | client_types              | tenant_id                  | client_types              | tenant_id           | UNIQUE          |
| client_types_tenant_code_unique                         | client_types              | code                       | client_types              | code                | UNIQUE          |
| clients_zone_id_fkey                                    | clients                   | zone_id                    | zones                     | id                  | FOREIGN KEY     |
| clients_client_type_id_fkey                             | clients                   | client_type_id             | client_types              | id                  | FOREIGN KEY     |
| clients_market_id_fkey                                  | clients                   | market_id                  | markets                   | id                  | FOREIGN KEY     |
| clients_commercial_structure_id_fkey                    | clients                   | commercial_structure_id    | commercial_structures     | id                  | FOREIGN KEY     |
| clients_tenant_id_fkey                                  | clients                   | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| clients_user_id_fkey                                    | clients                   | user_id                    | null                      | null                | FOREIGN KEY     |
| clients_pkey                                            | clients                   | id                         | clients                   | id                  | PRIMARY KEY     |
| clients_public_id_key                                   | clients                   | public_id                  | clients                   | public_id           | UNIQUE          |
| commercial_structures_tenant_id_fkey                    | commercial_structures     | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| commercial_structures_pkey                              | commercial_structures     | id                         | commercial_structures     | id                  | PRIMARY KEY     |
| commercial_structures_tenant_code_unique                | commercial_structures     | code                       | commercial_structures     | code                | UNIQUE          |
| commercial_structures_tenant_code_unique                | commercial_structures     | tenant_id                  | commercial_structures     | tenant_id           | UNIQUE          |
| commercial_structures_tenant_code_unique                | commercial_structures     | tenant_id                  | commercial_structures     | code                | UNIQUE          |
| commercial_structures_public_id_key                     | commercial_structures     | public_id                  | commercial_structures     | public_id           | UNIQUE          |
| commercial_structures_tenant_code_unique                | commercial_structures     | code                       | commercial_structures     | tenant_id           | UNIQUE          |
| markets_tenant_id_fkey                                  | markets                   | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| markets_pkey                                            | markets                   | id                         | markets                   | id                  | PRIMARY KEY     |
| markets_public_id_key                                   | markets                   | public_id                  | markets                   | public_id           | UNIQUE          |
| markets_tenant_code_unique                              | markets                   | tenant_id                  | markets                   | code                | UNIQUE          |
| markets_tenant_code_unique                              | markets                   | tenant_id                  | markets                   | tenant_id           | UNIQUE          |
| markets_tenant_code_unique                              | markets                   | code                       | markets                   | code                | UNIQUE          |
| markets_tenant_code_unique                              | markets                   | code                       | markets                   | tenant_id           | UNIQUE          |
| fk_order_items_substitute_product                       | order_items               | substitute_product_id      | products                  | id                  | FOREIGN KEY     |
| fk_order_items_substitute_variant                       | order_items               | substitute_variant_id      | product_variants          | id                  | FOREIGN KEY     |
| fk_order_items_product_variant                          | order_items               | product_variant_id         | product_variants          | id                  | FOREIGN KEY     |
| fk_order_items_tenant                                   | order_items               | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| fk_order_items_product                                  | order_items               | product_id                 | products                  | id                  | FOREIGN KEY     |
| fk_order_items_order                                    | order_items               | order_id                   | orders                    | id                  | FOREIGN KEY     |
| order_items_pkey                                        | order_items               | id                         | order_items               | id                  | PRIMARY KEY     |
| order_items_public_id_key                               | order_items               | public_id                  | order_items               | public_id           | UNIQUE          |
| orders_brand_id_fkey                                    | orders                    | brand_id                   | brands                    | id                  | FOREIGN KEY     |
| orders_commercial_structure_id_fkey                     | orders                    | commercial_structure_id    | commercial_structures     | id                  | FOREIGN KEY     |
| orders_client_invoice_data_id_fkey                      | orders                    | client_invoice_data_id     | client_invoice_data       | id                  | FOREIGN KEY     |
| orders_client_id_fkey                                   | orders                    | client_id                  | clients                   | id                  | FOREIGN KEY     |
| orders_tenant_id_fkey                                   | orders                    | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| orders_cancelled_by_fkey                                | orders                    | cancelled_by               | user_profiles             | id                  | FOREIGN KEY     |
| orders_assigned_to_fkey                                 | orders                    | assigned_to                | user_profiles             | id                  | FOREIGN KEY     |
| orders_pkey                                             | orders                    | id                         | orders                    | id                  | PRIMARY KEY     |
| orders_public_id_key                                    | orders                    | public_id                  | orders                    | public_id           | UNIQUE          |
| orders_order_number_key                                 | orders                    | order_number               | orders                    | order_number        | UNIQUE          |
| points_transactions_client_brand_membership_id_fkey     | points_transactions       | client_brand_membership_id | client_brand_memberships  | id                  | FOREIGN KEY     |
| points_transactions_reversed_by_fkey                    | points_transactions       | reversed_by                | points_transactions       | id                  | FOREIGN KEY     |
| points_transactions_reversal_of_fkey                    | points_transactions       | reversal_of                | points_transactions       | id                  | FOREIGN KEY     |
| points_transactions_approved_by_fkey                    | points_transactions       | approved_by                | user_profiles             | id                  | FOREIGN KEY     |
| points_transactions_processed_by_fkey                   | points_transactions       | processed_by               | user_profiles             | id                  | FOREIGN KEY     |
| points_transactions_tenant_id_fkey                      | points_transactions       | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| points_transactions_pkey                                | points_transactions       | id                         | points_transactions       | id                  | PRIMARY KEY     |
| points_transactions_public_id_key                       | points_transactions       | public_id                  | points_transactions       | public_id           | UNIQUE          |
| product_categories_parent_category_id_fkey              | product_categories        | parent_category_id         | product_categories        | id                  | FOREIGN KEY     |
| product_categories_tenant_id_fkey                       | product_categories        | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| product_categories_brand_id_fkey                        | product_categories        | brand_id                   | brands                    | id                  | FOREIGN KEY     |
| product_categories_pkey                                 | product_categories        | id                         | product_categories        | id                  | PRIMARY KEY     |
| product_categories_tenant_brand_code_unique             | product_categories        | tenant_id                  | product_categories        | code                | UNIQUE          |
| product_categories_tenant_brand_code_unique             | product_categories        | tenant_id                  | product_categories        | tenant_id           | UNIQUE          |
| product_categories_tenant_brand_code_unique             | product_categories        | brand_id                   | product_categories        | code                | UNIQUE          |
| product_categories_tenant_brand_code_unique             | product_categories        | code                       | product_categories        | code                | UNIQUE          |
| product_categories_tenant_brand_code_unique             | product_categories        | code                       | product_categories        | brand_id            | UNIQUE          |
| product_categories_tenant_brand_code_unique             | product_categories        | brand_id                   | product_categories        | tenant_id           | UNIQUE          |
| product_categories_tenant_brand_code_unique             | product_categories        | code                       | product_categories        | tenant_id           | UNIQUE          |
| product_categories_tenant_brand_code_unique             | product_categories        | tenant_id                  | product_categories        | brand_id            | UNIQUE          |
| product_categories_tenant_brand_code_unique             | product_categories        | brand_id                   | product_categories        | brand_id            | UNIQUE          |
| product_categories_public_id_key                        | product_categories        | public_id                  | product_categories        | public_id           | UNIQUE          |
| product_variants_product_id_fkey                        | product_variants          | product_id                 | products                  | id                  | FOREIGN KEY     |
| product_variants_tenant_id_fkey                         | product_variants          | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| product_variants_pkey                                   | product_variants          | id                         | product_variants          | id                  | PRIMARY KEY     |
| product_variants_tenant_product_code_unique             | product_variants          | tenant_id                  | product_variants          | product_id          | UNIQUE          |
| product_variants_public_id_key                          | product_variants          | public_id                  | product_variants          | public_id           | UNIQUE          |
| product_variants_tenant_product_code_unique             | product_variants          | tenant_id                  | product_variants          | variant_code        | UNIQUE          |
| product_variants_tenant_product_code_unique             | product_variants          | product_id                 | product_variants          | product_id          | UNIQUE          |
| product_variants_tenant_product_code_unique             | product_variants          | product_id                 | product_variants          | tenant_id           | UNIQUE          |
| product_variants_tenant_product_code_unique             | product_variants          | variant_code               | product_variants          | variant_code        | UNIQUE          |
| product_variants_tenant_product_code_unique             | product_variants          | variant_code               | product_variants          | tenant_id           | UNIQUE          |
| product_variants_tenant_product_code_unique             | product_variants          | tenant_id                  | product_variants          | tenant_id           | UNIQUE          |
| product_variants_tenant_product_code_unique             | product_variants          | variant_code               | product_variants          | product_id          | UNIQUE          |
| product_variants_tenant_product_code_unique             | product_variants          | product_id                 | product_variants          | variant_code        | UNIQUE          |
| products_category_id_fkey                               | products                  | category_id                | product_categories        | id                  | FOREIGN KEY     |
| products_tenant_id_fkey                                 | products                  | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| products_brand_id_fkey                                  | products                  | brand_id                   | brands                    | id                  | FOREIGN KEY     |
| products_pkey                                           | products                  | id                         | products                  | id                  | PRIMARY KEY     |
| products_tenant_brand_code_unique                       | products                  | code                       | products                  | brand_id            | UNIQUE          |
| products_tenant_brand_code_unique                       | products                  | code                       | products                  | tenant_id           | UNIQUE          |
| products_tenant_brand_code_unique                       | products                  | code                       | products                  | code                | UNIQUE          |
| products_public_id_key                                  | products                  | public_id                  | products                  | public_id           | UNIQUE          |
| products_tenant_brand_code_unique                       | products                  | tenant_id                  | products                  | brand_id            | UNIQUE          |
| products_tenant_brand_code_unique                       | products                  | tenant_id                  | products                  | code                | UNIQUE          |
| products_tenant_brand_code_unique                       | products                  | tenant_id                  | products                  | tenant_id           | UNIQUE          |
| products_tenant_brand_code_unique                       | products                  | brand_id                   | products                  | brand_id            | UNIQUE          |
| products_tenant_brand_code_unique                       | products                  | brand_id                   | products                  | code                | UNIQUE          |
| products_tenant_brand_code_unique                       | products                  | brand_id                   | products                  | tenant_id           | UNIQUE          |
| promotion_redemptions_applied_by_fkey                   | promotion_redemptions     | applied_by                 | user_profiles             | id                  | FOREIGN KEY     |
| promotion_redemptions_reversed_by_fkey                  | promotion_redemptions     | reversed_by                | user_profiles             | id                  | FOREIGN KEY     |
| promotion_redemptions_client_brand_membership_id_fkey   | promotion_redemptions     | client_brand_membership_id | client_brand_memberships  | id                  | FOREIGN KEY     |
| promotion_redemptions_promotion_id_fkey                 | promotion_redemptions     | promotion_id               | promotions                | id                  | FOREIGN KEY     |
| promotion_redemptions_validated_by_fkey                 | promotion_redemptions     | validated_by               | user_profiles             | id                  | FOREIGN KEY     |
| promotion_redemptions_tenant_id_fkey                    | promotion_redemptions     | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| promotion_redemptions_pkey                              | promotion_redemptions     | id                         | promotion_redemptions     | id                  | PRIMARY KEY     |
| promotion_redemptions_public_id_key                     | promotion_redemptions     | public_id                  | promotion_redemptions     | public_id           | UNIQUE          |
| promotion_rules_created_by_fkey                         | promotion_rules           | created_by                 | user_profiles             | id                  | FOREIGN KEY     |
| promotion_rules_tenant_id_fkey                          | promotion_rules           | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| promotion_rules_promotion_id_fkey                       | promotion_rules           | promotion_id               | promotions                | id                  | FOREIGN KEY     |
| promotion_rules_pkey                                    | promotion_rules           | id                         | promotion_rules           | id                  | PRIMARY KEY     |
| promotion_rules_public_id_key                           | promotion_rules           | public_id                  | promotion_rules           | public_id           | UNIQUE          |
| promotions_tenant_id_fkey                               | promotions                | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| promotions_campaign_id_fkey                             | promotions                | campaign_id                | campaigns                 | id                  | FOREIGN KEY     |
| promotions_brand_id_fkey                                | promotions                | brand_id                   | brands                    | id                  | FOREIGN KEY     |
| promotions_approved_by_fkey                             | promotions                | approved_by                | user_profiles             | id                  | FOREIGN KEY     |
| promotions_created_by_fkey                              | promotions                | created_by                 | user_profiles             | id                  | FOREIGN KEY     |
| promotions_pkey                                         | promotions                | id                         | promotions                | id                  | PRIMARY KEY     |
| promotions_public_id_key                                | promotions                | public_id                  | promotions                | public_id           | UNIQUE          |
| reward_redemptions_cancelled_by_fkey                    | reward_redemptions        | cancelled_by               | user_profiles             | id                  | FOREIGN KEY     |
| reward_redemptions_points_transaction_id_fkey           | reward_redemptions        | points_transaction_id      | points_transactions       | id                  | FOREIGN KEY     |
| reward_redemptions_redeemed_by_fkey                     | reward_redemptions        | redeemed_by                | user_profiles             | id                  | FOREIGN KEY     |
| reward_redemptions_refund_transaction_id_fkey           | reward_redemptions        | refund_transaction_id      | points_transactions       | id                  | FOREIGN KEY     |
| reward_redemptions_tenant_id_fkey                       | reward_redemptions        | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| reward_redemptions_client_brand_membership_id_fkey      | reward_redemptions        | client_brand_membership_id | client_brand_memberships  | id                  | FOREIGN KEY     |
| reward_redemptions_reward_id_fkey                       | reward_redemptions        | reward_id                  | rewards                   | id                  | FOREIGN KEY     |
| reward_redemptions_validated_by_fkey                    | reward_redemptions        | validated_by               | user_profiles             | id                  | FOREIGN KEY     |
| reward_redemptions_pkey                                 | reward_redemptions        | id                         | reward_redemptions        | id                  | PRIMARY KEY     |
| reward_redemptions_redemption_code_key                  | reward_redemptions        | redemption_code            | reward_redemptions        | redemption_code     | UNIQUE          |
| reward_redemptions_public_id_key                        | reward_redemptions        | public_id                  | reward_redemptions        | public_id           | UNIQUE          |
| rewards_product_variant_id_fkey                         | rewards                   | product_variant_id         | product_variants          | id                  | FOREIGN KEY     |
| rewards_tenant_id_fkey                                  | rewards                   | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| rewards_brand_id_fkey                                   | rewards                   | brand_id                   | brands                    | id                  | FOREIGN KEY     |
| rewards_product_id_fkey                                 | rewards                   | product_id                 | products                  | id                  | FOREIGN KEY     |
| rewards_promotion_id_fkey                               | rewards                   | promotion_id               | promotions                | id                  | FOREIGN KEY     |
| rewards_pkey                                            | rewards                   | id                         | rewards                   | id                  | PRIMARY KEY     |
| rewards_public_id_key                                   | rewards                   | public_id                  | rewards                   | public_id           | UNIQUE          |
| tenants_pkey                                            | tenants                   | id                         | tenants                   | id                  | PRIMARY KEY     |
| tenants_public_id_key                                   | tenants                   | public_id                  | tenants                   | public_id           | UNIQUE          |
| tenants_slug_key                                        | tenants                   | slug                       | tenants                   | slug                | UNIQUE          |
| tiers_brand_id_fkey                                     | tiers                     | brand_id                   | brands                    | id                  | FOREIGN KEY     |
| tiers_tenant_id_fkey                                    | tiers                     | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| tiers_pkey                                              | tiers                     | id                         | tiers                     | id                  | PRIMARY KEY     |
| tiers_public_id_key                                     | tiers                     | public_id                  | tiers                     | public_id           | UNIQUE          |
| tiers_tenant_brand_level_unique                         | tiers                     | tenant_id                  | tiers                     | tier_level          | UNIQUE          |
| tiers_tenant_brand_level_unique                         | tiers                     | tenant_id                  | tiers                     | tenant_id           | UNIQUE          |
| tiers_tenant_brand_level_unique                         | tiers                     | tenant_id                  | tiers                     | brand_id            | UNIQUE          |
| tiers_tenant_brand_code_unique                          | tiers                     | code                       | tiers                     | tenant_id           | UNIQUE          |
| tiers_tenant_brand_code_unique                          | tiers                     | code                       | tiers                     | code                | UNIQUE          |
| tiers_tenant_brand_code_unique                          | tiers                     | code                       | tiers                     | brand_id            | UNIQUE          |
| tiers_tenant_brand_code_unique                          | tiers                     | brand_id                   | tiers                     | tenant_id           | UNIQUE          |
| tiers_tenant_brand_code_unique                          | tiers                     | brand_id                   | tiers                     | code                | UNIQUE          |
| tiers_tenant_brand_code_unique                          | tiers                     | brand_id                   | tiers                     | brand_id            | UNIQUE          |
| tiers_tenant_brand_code_unique                          | tiers                     | tenant_id                  | tiers                     | tenant_id           | UNIQUE          |
| tiers_tenant_brand_code_unique                          | tiers                     | tenant_id                  | tiers                     | code                | UNIQUE          |
| tiers_tenant_brand_code_unique                          | tiers                     | tenant_id                  | tiers                     | brand_id            | UNIQUE          |
| tiers_tenant_brand_level_unique                         | tiers                     | tier_level                 | tiers                     | tier_level          | UNIQUE          |
| tiers_tenant_brand_level_unique                         | tiers                     | tier_level                 | tiers                     | tenant_id           | UNIQUE          |
| tiers_tenant_brand_level_unique                         | tiers                     | tier_level                 | tiers                     | brand_id            | UNIQUE          |
| tiers_tenant_brand_level_unique                         | tiers                     | brand_id                   | tiers                     | tier_level          | UNIQUE          |
| tiers_tenant_brand_level_unique                         | tiers                     | brand_id                   | tiers                     | tenant_id           | UNIQUE          |
| tiers_tenant_brand_level_unique                         | tiers                     | brand_id                   | tiers                     | brand_id            | UNIQUE          |
| user_profiles_manager_id_fkey                           | user_profiles             | manager_id                 | user_profiles             | id                  | FOREIGN KEY     |
| user_profiles_user_id_fkey                              | user_profiles             | user_id                    | null                      | null                | FOREIGN KEY     |
| user_profiles_pkey                                      | user_profiles             | id                         | user_profiles             | id                  | PRIMARY KEY     |
| user_profiles_employee_code_key                         | user_profiles             | employee_code              | user_profiles             | employee_code       | UNIQUE          |
| user_profiles_public_id_key                             | user_profiles             | public_id                  | user_profiles             | public_id           | UNIQUE          |
| user_profiles_user_id_key                               | user_profiles             | user_id                    | user_profiles             | user_id             | UNIQUE          |
| user_roles_brand_id_fkey                                | user_roles                | brand_id                   | brands                    | id                  | FOREIGN KEY     |
| user_roles_zone_id_fkey                                 | user_roles                | zone_id                    | zones                     | id                  | FOREIGN KEY     |
| user_roles_user_profile_id_fkey                         | user_roles                | user_profile_id            | user_profiles             | id                  | FOREIGN KEY     |
| user_roles_tenant_id_fkey                               | user_roles                | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| user_roles_granted_by_fkey                              | user_roles                | granted_by                 | user_profiles             | id                  | FOREIGN KEY     |
| user_roles_pkey                                         | user_roles                | id                         | user_roles                | id                  | PRIMARY KEY     |
| user_roles_unique_assignment                            | user_roles                | brand_id                   | user_roles                | role                | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | role                       | user_roles                | user_profile_id     | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | role                       | user_roles                | tenant_id           | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | role                       | user_roles                | role                | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | role                       | user_roles                | brand_id            | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | brand_id                   | user_roles                | user_profile_id     | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | brand_id                   | user_roles                | tenant_id           | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | brand_id                   | user_roles                | brand_id            | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | tenant_id                  | user_roles                | user_profile_id     | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | tenant_id                  | user_roles                | tenant_id           | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | tenant_id                  | user_roles                | role                | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | tenant_id                  | user_roles                | brand_id            | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | user_profile_id            | user_roles                | user_profile_id     | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | user_profile_id            | user_roles                | tenant_id           | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | user_profile_id            | user_roles                | role                | UNIQUE          |
| user_roles_unique_assignment                            | user_roles                | user_profile_id            | user_roles                | brand_id            | UNIQUE          |
| visit_assessments_product_variant_id_fkey               | visit_assessments         | product_variant_id         | product_variants          | id                  | FOREIGN KEY     |
| visit_assessments_product_id_fkey                       | visit_assessments         | product_id                 | products                  | id                  | FOREIGN KEY     |
| visit_assessments_visit_id_fkey                         | visit_assessments         | visit_id                   | visits                    | id                  | FOREIGN KEY     |
| visit_assessments_tenant_id_fkey                        | visit_assessments         | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| visit_assessments_pkey                                  | visit_assessments         | id                         | visit_assessments         | id                  | PRIMARY KEY     |
| visit_assessments_public_id_key                         | visit_assessments         | public_id                  | visit_assessments         | public_id           | UNIQUE          |
| visit_communication_plans_visit_id_fkey                 | visit_communication_plans | visit_id                   | visits                    | id                  | FOREIGN KEY     |
| visit_communication_plans_campaign_id_fkey              | visit_communication_plans | campaign_id                | campaigns                 | id                  | FOREIGN KEY     |
| visit_communication_plans_tenant_id_fkey                | visit_communication_plans | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| visit_communication_plans_brand_id_fkey                 | visit_communication_plans | brand_id                   | brands                    | id                  | FOREIGN KEY     |
| visit_communication_plans_installed_by_fkey             | visit_communication_plans | installed_by               | user_profiles             | id                  | FOREIGN KEY     |
| visit_communication_plans_pkey                          | visit_communication_plans | id                         | visit_communication_plans | id                  | PRIMARY KEY     |
| visit_communication_plans_public_id_key                 | visit_communication_plans | public_id                  | visit_communication_plans | public_id           | UNIQUE          |
| visit_inventories_visit_id_fkey                         | visit_inventories         | visit_id                   | visits                    | id                  | FOREIGN KEY     |
| visit_inventories_verified_by_fkey                      | visit_inventories         | verified_by                | user_profiles             | id                  | FOREIGN KEY     |
| visit_inventories_counted_by_fkey                       | visit_inventories         | counted_by                 | user_profiles             | id                  | FOREIGN KEY     |
| visit_inventories_product_variant_id_fkey               | visit_inventories         | product_variant_id         | product_variants          | id                  | FOREIGN KEY     |
| visit_inventories_product_id_fkey                       | visit_inventories         | product_id                 | products                  | id                  | FOREIGN KEY     |
| visit_inventories_tenant_id_fkey                        | visit_inventories         | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| visit_inventories_pkey                                  | visit_inventories         | id                         | visit_inventories         | id                  | PRIMARY KEY     |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | product_id                 | visit_inventories         | visit_id            | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | product_id                 | visit_inventories         | product_variant_id  | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | product_id                 | visit_inventories         | product_id          | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | product_id                 | visit_inventories         | location_in_store   | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | visit_id                   | visit_inventories         | visit_id            | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | visit_id                   | visit_inventories         | product_variant_id  | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | visit_id                   | visit_inventories         | product_id          | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | visit_id                   | visit_inventories         | location_in_store   | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | location_in_store          | visit_inventories         | product_variant_id  | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | location_in_store          | visit_inventories         | visit_id            | UNIQUE          |
| visit_inventories_public_id_key                         | visit_inventories         | public_id                  | visit_inventories         | public_id           | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | location_in_store          | visit_inventories         | product_id          | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | location_in_store          | visit_inventories         | location_in_store   | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | product_variant_id         | visit_inventories         | visit_id            | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | product_variant_id         | visit_inventories         | product_variant_id  | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | product_variant_id         | visit_inventories         | location_in_store   | UNIQUE          |
| visit_inventories_visit_product_variant_location_unique | visit_inventories         | product_variant_id         | visit_inventories         | product_id          | UNIQUE          |
| fk_visit_order_items_tenant                             | visit_order_items         | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| fk_visit_order_items_approved_by                        | visit_order_items         | approved_by                | user_profiles             | id                  | FOREIGN KEY     |
| fk_visit_order_items_visit_order                        | visit_order_items         | visit_order_id             | visit_orders              | id                  | FOREIGN KEY     |
| fk_visit_order_items_product                            | visit_order_items         | product_id                 | products                  | id                  | FOREIGN KEY     |
| fk_visit_order_items_product_variant                    | visit_order_items         | product_variant_id         | product_variants          | id                  | FOREIGN KEY     |
| visit_order_items_pkey                                  | visit_order_items         | id                         | visit_order_items         | id                  | PRIMARY KEY     |
| visit_order_items_public_id_key                         | visit_order_items         | public_id                  | visit_order_items         | public_id           | UNIQUE          |
| visit_orders_advisor_id_fkey                            | visit_orders              | advisor_id                 | user_profiles             | id                  | FOREIGN KEY     |
| visit_orders_approved_by_fkey                           | visit_orders              | approved_by                | user_profiles             | id                  | FOREIGN KEY     |
| visit_orders_tenant_id_fkey                             | visit_orders              | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| visit_orders_visit_id_fkey                              | visit_orders              | visit_id                   | visits                    | id                  | FOREIGN KEY     |
| visit_orders_client_invoice_data_id_fkey                | visit_orders              | client_invoice_data_id     | client_invoice_data       | id                  | FOREIGN KEY     |
| visit_orders_client_id_fkey                             | visit_orders              | client_id                  | clients                   | id                  | FOREIGN KEY     |
| visit_orders_pkey                                       | visit_orders              | id                         | visit_orders              | id                  | PRIMARY KEY     |
| visit_orders_public_id_key                              | visit_orders              | public_id                  | visit_orders              | public_id           | UNIQUE          |
| visits_client_id_fkey                                   | visits                    | client_id                  | clients                   | id                  | FOREIGN KEY     |
| visits_advisor_id_fkey                                  | visits                    | advisor_id                 | user_profiles             | id                  | FOREIGN KEY     |
| visits_tenant_id_fkey                                   | visits                    | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| visits_pkey                                             | visits                    | id                         | visits                    | id                  | PRIMARY KEY     |
| visits_public_id_key                                    | visits                    | public_id                  | visits                    | public_id           | UNIQUE          |
| zones_tenant_id_fkey                                    | zones                     | tenant_id                  | tenants                   | id                  | FOREIGN KEY     |
| zones_parent_zone_id_fkey                               | zones                     | parent_zone_id             | zones                     | id                  | FOREIGN KEY     |
| zones_pkey                                              | zones                     | id                         | zones                     | id                  | PRIMARY KEY     |
| zones_tenant_code_unique                                | zones                     | tenant_id                  | zones                     | tenant_id           | UNIQUE          |
| zones_public_id_key                                     | zones                     | public_id                  | zones                     | public_id           | UNIQUE          |
| zones_tenant_code_unique                                | zones                     | code                       | zones                     | code                | UNIQUE          |
| zones_tenant_code_unique                                | zones                     | code                       | zones                     | tenant_id           | UNIQUE          |
| zones_tenant_code_unique                                | zones                     | tenant_id                  | zones                     | code                | UNIQUE          |

## 4. Politicas RLS

| schemaname | tablename                 | policyname                                      | permissive | roles           | cmd    | qual                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ---------- | ------------------------- | ----------------------------------------------- | ---------- | --------------- | ------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| public     | brands                    | Allow DELETE on brands for same tenant          | PERMISSIVE | {authenticated} | DELETE | ((tenant_id)::text = (auth.jwt() ->> 'tenant_id'::text))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | brands                    | Allow UPDATE on brands for same tenant          | PERMISSIVE | {authenticated} | UPDATE | ((tenant_id)::text = (auth.jwt() ->> 'tenant_id'::text))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | brands                    | brands_public_read                              | PERMISSIVE | {anon}          | SELECT | (deleted_at IS NULL)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | brands                    | brands_tenant_access                            | PERMISSIVE | {authenticated} | ALL    | (tenant_id = 'fe0f429d-2d83-4738-af65-32c655cef656'::uuid)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | campaigns                 | admins_delete_campaigns                         | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | campaigns                 | admins_insert_campaigns                         | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | campaigns                 | admins_select_campaigns                         | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | campaigns                 | admins_update_campaigns                         | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | campaigns                 | brand_managers_manage_campaigns                 | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | campaigns                 | brand_managers_select_campaigns                 | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | campaigns                 | field_users_select_campaigns                    | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (status = 'active'::campaign_status_enum) AND (start_date <= CURRENT_DATE) AND (end_date >= CURRENT_DATE) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| public     | campaigns                 | tenant_admins_manage_campaigns                  | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | campaigns                 | tenant_admins_select_campaigns                  | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | client_brand_memberships  | admins_delete_client_brand_memberships          | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_brand_memberships  | admins_insert_client_brand_memberships          | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | client_brand_memberships  | admins_select_client_brand_memberships          | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_brand_memberships  | admins_update_client_brand_memberships          | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_brand_memberships  | brand_managers_manage_client_brand_memberships  | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | client_brand_memberships  | brand_managers_select_client_brand_memberships  | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | client_brand_memberships  | clients_select_own_memberships                  | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_id IN ( SELECT c.id
   FROM clients c
  WHERE ((c.user_id = auth.uid()) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_brand_memberships  | clients_update_own_memberships                  | PERMISSIVE | {public}        | UPDATE | ((deleted_at IS NULL) AND (client_id IN ( SELECT c.id
   FROM clients c
  WHERE ((c.user_id = auth.uid()) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_brand_memberships  | field_users_select_client_brand_memberships     | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_id IN ( SELECT c.id
   FROM ((clients c
     JOIN user_roles ur ON ((c.tenant_id = ur.tenant_id)))
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_brand_memberships  | tenant_admins_manage_client_brand_memberships   | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | client_brand_memberships  | tenant_admins_select_client_brand_memberships   | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | client_invoice_data       | admins_delete_client_invoice_data               | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_invoice_data       | admins_insert_client_invoice_data               | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | client_invoice_data       | admins_select_client_invoice_data               | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_invoice_data       | admins_update_client_invoice_data               | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_invoice_data       | brand_managers_select_client_invoice_data       | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_id IN ( SELECT cbm.client_id
   FROM client_brand_memberships cbm
  WHERE ((cbm.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| public     | client_invoice_data       | clients_manage_own_invoice_data                 | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (client_id IN ( SELECT c.id
   FROM clients c
  WHERE ((c.user_id = auth.uid()) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_invoice_data       | clients_select_own_invoice_data                 | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_id IN ( SELECT c.id
   FROM clients c
  WHERE ((c.user_id = auth.uid()) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_invoice_data       | field_users_manage_client_invoice_data          | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | client_invoice_data       | field_users_select_client_invoice_data          | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | client_invoice_data       | tenant_admins_manage_client_invoice_data        | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | client_invoice_data       | tenant_admins_select_client_invoice_data        | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | client_tier_assignments   | admins_delete_client_tier_assignments           | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_tier_assignments   | admins_insert_client_tier_assignments           | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | client_tier_assignments   | admins_select_client_tier_assignments           | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_tier_assignments   | admins_update_client_tier_assignments           | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_tier_assignments   | advisors_select_client_tier_assignments         | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.id IN ( SELECT DISTINCT v.client_id
           FROM visits v
          WHERE ((v.advisor_id IN ( SELECT ur.user_profile_id
                   FROM (user_roles ur
                     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
                  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'advisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_tier_assignments   | brand_managers_manage_client_tier_assignments   | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM client_brand_memberships cbm
  WHERE ((cbm.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | client_tier_assignments   | brand_managers_select_client_tier_assignments   | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM client_brand_memberships cbm
  WHERE ((cbm.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | client_tier_assignments   | clients_select_own_tier_assignments             | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.user_id = auth.uid()) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | client_tier_assignments   | supervisors_manage_client_tier_assignments      | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.id IN ( SELECT DISTINCT v.client_id
           FROM visits v
          WHERE ((v.advisor_id IN ( SELECT up.id
                   FROM user_profiles up
                  WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                           FROM (user_roles ur
                             JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                          WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public     | client_tier_assignments   | supervisors_select_client_tier_assignments      | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.id IN ( SELECT DISTINCT v.client_id
           FROM visits v
          WHERE ((v.advisor_id IN ( SELECT up.id
                   FROM user_profiles up
                  WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                           FROM (user_roles ur
                             JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                          WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public     | client_tier_assignments   | tenant_admins_manage_client_tier_assignments    | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | client_tier_assignments   | tenant_admins_select_client_tier_assignments    | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | client_types              | admins_delete_client_types                      | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_types              | admins_insert_client_types                      | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | client_types              | admins_select_client_types                      | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_types              | admins_update_client_types                      | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | client_types              | brand_managers_select_client_types              | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT b.tenant_id
   FROM ((user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
     JOIN brands b ON ((ur.brand_id = b.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL) AND (b.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public     | client_types              | clients_select_assigned_client_type             | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (EXISTS ( SELECT 1
   FROM clients c
  WHERE ((c.user_id = auth.uid()) AND (c.client_type_id = client_types.id) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| public     | client_types              | field_users_select_client_types                 | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | client_types              | tenant_admins_manage_client_types               | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | client_types              | tenant_admins_select_client_types               | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | clients                   | admins_delete_clients                           | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | clients                   | admins_insert_clients                           | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | clients                   | admins_select_clients                           | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | clients                   | admins_update_clients                           | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | clients                   | brand_managers_select_clients                   | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT b.tenant_id
   FROM ((user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
     JOIN brands b ON ((ur.brand_id = b.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL) AND (b.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public     | clients                   | clients_insert_policy                           | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | clients                   | clients_select_own_profile                      | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (user_id = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public     | clients                   | clients_select_policy                           | PERMISSIVE | {public}        | SELECT | (deleted_at IS NULL)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | clients                   | clients_tenant_access                           | PERMISSIVE | {authenticated} | ALL    | (tenant_id = 'fe0f429d-2d83-4738-af65-32c655cef656'::uuid)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | clients                   | clients_update_own_profile                      | PERMISSIVE | {public}        | UPDATE | ((deleted_at IS NULL) AND (user_id = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public     | clients                   | clients_update_policy                           | PERMISSIVE | {public}        | UPDATE | ((auth.role() = 'authenticated'::text) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| public     | clients                   | field_users_select_clients                      | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | clients                   | tenant_admins_manage_clients                    | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | clients                   | tenant_admins_select_clients                    | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | commercial_structures     | admins_delete_commercial_structures             | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | commercial_structures     | admins_insert_commercial_structures             | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | commercial_structures     | admins_select_commercial_structures             | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | commercial_structures     | admins_update_commercial_structures             | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | commercial_structures     | brand_managers_select_commercial_structures     | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT b.tenant_id
   FROM ((user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
     JOIN brands b ON ((ur.brand_id = b.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL) AND (b.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public     | commercial_structures     | clients_select_assigned_commercial_structure    | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (EXISTS ( SELECT 1
   FROM clients c
  WHERE ((c.user_id = auth.uid()) AND (c.commercial_structure_id = commercial_structures.id) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public     | commercial_structures     | field_users_select_commercial_structures        | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | commercial_structures     | tenant_admins_manage_commercial_structures      | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | commercial_structures     | tenant_admins_select_commercial_structures      | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | markets                   | admins_delete_markets                           | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | markets                   | admins_insert_markets                           | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | markets                   | admins_select_markets                           | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | markets                   | admins_update_markets                           | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | markets                   | brand_managers_select_markets                   | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT b.tenant_id
   FROM ((user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
     JOIN brands b ON ((ur.brand_id = b.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL) AND (b.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public     | markets                   | clients_select_assigned_market                  | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (EXISTS ( SELECT 1
   FROM clients c
  WHERE ((c.user_id = auth.uid()) AND (c.market_id = markets.id) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public     | markets                   | field_users_select_markets                      | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | markets                   | tenant_admins_manage_markets                    | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | markets                   | tenant_admins_select_markets                    | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | order_items               | policy_order_items_admin_all                    | PERMISSIVE | {authenticated} | ALL    | (EXISTS ( SELECT 1
   FROM user_roles ur
  WHERE ((ur.user_profile_id = ( SELECT user_profiles.id
           FROM user_profiles
          WHERE ((user_profiles.user_id = auth.uid()) AND (user_profiles.deleted_at IS NULL)))) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.tenant_id IS NULL) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | order_items               | policy_order_items_advisor                      | PERMISSIVE | {authenticated} | SELECT | ((order_id IN ( SELECT o.id
   FROM orders o
  WHERE ((o.assigned_to = ( SELECT user_profiles.id
           FROM user_profiles
          WHERE ((user_profiles.user_id = auth.uid()) AND (user_profiles.deleted_at IS NULL)))) AND (o.deleted_at IS NULL)))) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | order_items               | policy_order_items_brand_manager                | PERMISSIVE | {authenticated} | SELECT | ((product_id IN ( SELECT p.id
   FROM (products p
     JOIN user_roles ur ON ((ur.brand_id = p.brand_id)))
  WHERE ((ur.user_profile_id = ( SELECT user_profiles.id
           FROM user_profiles
          WHERE ((user_profiles.user_id = auth.uid()) AND (user_profiles.deleted_at IS NULL)))) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL) AND (p.deleted_at IS NULL)))) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | order_items               | policy_order_items_client_delete                | PERMISSIVE | {authenticated} | DELETE | ((order_id IN ( SELECT o.id
   FROM (orders o
     JOIN clients c ON ((c.id = o.client_id)))
  WHERE ((c.user_id = auth.uid()) AND (o.order_status = 'draft'::order_status_enum) AND (o.deleted_at IS NULL) AND (c.deleted_at IS NULL)))) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | order_items               | policy_order_items_client_insert                | PERMISSIVE | {authenticated} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | order_items               | policy_order_items_client_select                | PERMISSIVE | {authenticated} | SELECT | ((order_id IN ( SELECT o.id
   FROM (orders o
     JOIN clients c ON ((c.id = o.client_id)))
  WHERE ((c.user_id = auth.uid()) AND (o.deleted_at IS NULL) AND (c.deleted_at IS NULL)))) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public     | order_items               | policy_order_items_client_update                | PERMISSIVE | {authenticated} | UPDATE | ((order_id IN ( SELECT o.id
   FROM (orders o
     JOIN clients c ON ((c.id = o.client_id)))
  WHERE ((c.user_id = auth.uid()) AND (o.order_status = 'draft'::order_status_enum) AND (o.deleted_at IS NULL) AND (c.deleted_at IS NULL)))) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | order_items               | policy_order_items_supervisor                   | PERMISSIVE | {authenticated} | SELECT | ((order_id IN ( SELECT o.id
   FROM (orders o
     JOIN clients c ON ((c.id = o.client_id)))
  WHERE ((c.id IN ( SELECT DISTINCT v.client_id
           FROM visits v
          WHERE ((v.advisor_id IN ( SELECT up.id
                   FROM user_profiles up
                  WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                           FROM (user_roles ur
                             JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                          WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))) AND (o.deleted_at IS NULL) AND (c.deleted_at IS NULL)))) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public     | order_items               | policy_order_items_tenant_admin                 | PERMISSIVE | {authenticated} | ALL    | (tenant_id IN ( SELECT ur.tenant_id
   FROM user_roles ur
  WHERE ((ur.user_profile_id = ( SELECT user_profiles.id
           FROM user_profiles
          WHERE ((user_profiles.user_id = auth.uid()) AND (user_profiles.deleted_at IS NULL)))) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.tenant_id IS NOT NULL) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | orders                    | admins_insert_orders                            | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | orders                    | admins_select_orders                            | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | orders                    | admins_update_orders                            | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | orders                    | advisors_select_orders                          | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND ((assigned_to IN ( SELECT ur.user_profile_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'advisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) OR (client_id IN ( SELECT c.id
   FROM clients c
  WHERE ((c.id IN ( SELECT DISTINCT v.client_id
           FROM visits v
          WHERE ((v.advisor_id IN ( SELECT ur.user_profile_id
                   FROM (user_roles ur
                     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
                  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'advisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))) AND (c.deleted_at IS NULL))))))                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | orders                    | brand_managers_select_orders                    | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | orders                    | clients_insert_own_orders                       | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | orders                    | clients_select_own_orders                       | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_id IN ( SELECT c.id
   FROM clients c
  WHERE ((c.user_id = auth.uid()) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | orders                    | clients_update_own_draft_orders                 | PERMISSIVE | {public}        | UPDATE | ((deleted_at IS NULL) AND (order_status = 'draft'::order_status_enum) AND (client_id IN ( SELECT c.id
   FROM clients c
  WHERE ((c.user_id = auth.uid()) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | orders                    | orders_insert_policy                            | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | orders                    | orders_select_policy                            | PERMISSIVE | {public}        | SELECT | (deleted_at IS NULL)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | orders                    | orders_update_policy                            | PERMISSIVE | {public}        | UPDATE | ((auth.role() = 'authenticated'::text) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| public     | orders                    | supervisors_select_orders                       | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_id IN ( SELECT c.id
   FROM clients c
  WHERE ((c.id IN ( SELECT DISTINCT v.client_id
           FROM visits v
          WHERE ((v.advisor_id IN ( SELECT up.id
                   FROM user_profiles up
                  WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                           FROM (user_roles ur
                             JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                          WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | orders                    | tenant_admins_manage_orders                     | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | orders                    | tenant_admins_select_orders                     | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | points_transactions       | admins_insert_points_transactions               | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | points_transactions       | admins_select_points_transactions               | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | points_transactions       | admins_update_points_transactions               | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | points_transactions       | advisors_select_points_transactions             | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.id IN ( SELECT DISTINCT v.client_id
           FROM visits v
          WHERE ((v.advisor_id IN ( SELECT ur.user_profile_id
                   FROM (user_roles ur
                     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
                  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'advisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | points_transactions       | brand_managers_manage_points_transactions       | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM client_brand_memberships cbm
  WHERE ((cbm.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | points_transactions       | brand_managers_select_points_transactions       | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM client_brand_memberships cbm
  WHERE ((cbm.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | points_transactions       | clients_select_own_points_transactions          | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.user_id = auth.uid()) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | points_transactions       | supervisors_select_points_transactions          | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.id IN ( SELECT DISTINCT v.client_id
           FROM visits v
          WHERE ((v.advisor_id IN ( SELECT up.id
                   FROM user_profiles up
                  WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                           FROM (user_roles ur
                             JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                          WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public     | points_transactions       | tenant_admins_manage_points_transactions        | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | points_transactions       | tenant_admins_select_points_transactions        | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | product_categories        | admins_delete_product_categories                | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | product_categories        | admins_insert_product_categories                | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | product_categories        | admins_select_product_categories                | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | product_categories        | admins_update_product_categories                | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | product_categories        | brand_managers_manage_product_categories        | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | product_categories        | brand_managers_select_product_categories        | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND ((brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) OR ((brand_id IS NULL) AND (tenant_id IN ( SELECT b.tenant_id
   FROM ((user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
     JOIN brands b ON ((ur.brand_id = b.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL) AND (b.deleted_at IS NULL)))))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | product_categories        | clients_select_product_categories               | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND ((brand_id IN ( SELECT cbm.brand_id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.user_id = auth.uid()) AND (cbm.membership_status = 'active'::membership_status_enum) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))) OR ((brand_id IS NULL) AND (tenant_id IN ( SELECT cbm.tenant_id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.user_id = auth.uid()) AND (cbm.membership_status = 'active'::membership_status_enum) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | product_categories        | field_users_select_product_categories           | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (((brand_id IS NOT NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))) OR ((brand_id IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))))                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| public     | product_categories        | tenant_admins_manage_product_categories         | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | product_categories        | tenant_admins_select_product_categories         | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | product_variants          | admins_delete_product_variants                  | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | product_variants          | admins_insert_product_variants                  | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | product_variants          | admins_select_product_variants                  | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | product_variants          | admins_update_product_variants                  | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | product_variants          | brand_managers_manage_product_variants          | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (product_id IN ( SELECT p.id
   FROM products p
  WHERE ((p.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (p.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| public     | product_variants          | brand_managers_select_product_variants          | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (product_id IN ( SELECT p.id
   FROM products p
  WHERE ((p.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (p.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| public     | product_variants          | clients_select_product_variants                 | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (product_id IN ( SELECT p.id
   FROM products p
  WHERE ((p.brand_id IN ( SELECT cbm.brand_id
           FROM (client_brand_memberships cbm
             JOIN clients c ON ((cbm.client_id = c.id)))
          WHERE ((c.user_id = auth.uid()) AND (cbm.membership_status = 'active'::membership_status_enum) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))) AND (p.deleted_at IS NULL) AND (p.is_active = true)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public     | product_variants          | field_users_select_product_variants             | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (product_id IN ( SELECT p.id
   FROM products p
  WHERE ((p.tenant_id IN ( SELECT ur.tenant_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (p.deleted_at IS NULL) AND (p.is_active = true)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| public     | product_variants          | tenant_admins_manage_product_variants           | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | product_variants          | tenant_admins_select_product_variants           | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | products                  | admins_delete_products                          | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | products                  | admins_insert_products                          | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | products                  | admins_select_products                          | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | products                  | admins_update_products                          | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | products                  | brand_managers_manage_products                  | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | products                  | brand_managers_select_products                  | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | products                  | clients_select_products                         | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (brand_id IN ( SELECT cbm.brand_id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.user_id = auth.uid()) AND (cbm.membership_status = 'active'::membership_status_enum) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| public     | products                  | field_users_select_products                     | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | products                  | tenant_admins_manage_products                   | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | products                  | tenant_admins_select_products                   | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | promotion_redemptions     | admins_insert_promotion_redemptions             | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | promotion_redemptions     | admins_select_promotion_redemptions             | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | promotion_redemptions     | admins_update_promotion_redemptions             | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | promotion_redemptions     | advisors_select_promotion_redemptions           | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (applied_by IN ( SELECT ur.user_profile_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'advisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | promotion_redemptions     | brand_managers_select_promotion_redemptions     | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (promotion_id IN ( SELECT p.id
   FROM promotions p
  WHERE ((p.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (p.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| public     | promotion_redemptions     | clients_select_own_promotion_redemptions        | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.user_id = auth.uid()) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | promotion_redemptions     | supervisors_select_promotion_redemptions        | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND ((applied_by IN ( SELECT up.id
   FROM user_profiles up
  WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
           FROM (user_roles ur
             JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
          WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) OR (client_brand_membership_id IN ( SELECT cbm.id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.id IN ( SELECT DISTINCT v.client_id
           FROM visits v
          WHERE ((v.advisor_id IN ( SELECT up.id
                   FROM user_profiles up
                  WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                           FROM (user_roles ur
                             JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                          WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))) |
| public     | promotion_redemptions     | tenant_admins_manage_promotion_redemptions      | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | promotion_redemptions     | tenant_admins_select_promotion_redemptions      | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | promotion_rules           | admins_delete_promotion_rules                   | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | promotion_rules           | admins_insert_promotion_rules                   | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | promotion_rules           | admins_select_promotion_rules                   | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | promotion_rules           | admins_update_promotion_rules                   | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | promotion_rules           | brand_managers_manage_promotion_rules           | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (promotion_id IN ( SELECT p.id
   FROM promotions p
  WHERE ((p.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (p.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| public     | promotion_rules           | brand_managers_select_promotion_rules           | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (promotion_id IN ( SELECT p.id
   FROM promotions p
  WHERE ((p.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (p.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| public     | promotion_rules           | field_users_select_promotion_rules              | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (promotion_id IN ( SELECT p.id
   FROM promotions p
  WHERE ((p.status = 'active'::promotion_status_enum) AND (p.start_date <= CURRENT_DATE) AND (p.end_date >= CURRENT_DATE) AND (p.tenant_id IN ( SELECT ur.tenant_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (p.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| public     | promotion_rules           | tenant_admins_manage_promotion_rules            | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | promotion_rules           | tenant_admins_select_promotion_rules            | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | promotions                | admins_delete_promotions                        | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | promotions                | admins_insert_promotions                        | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | promotions                | admins_select_promotions                        | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | promotions                | admins_update_promotions                        | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | promotions                | brand_managers_manage_promotions                | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | promotions                | brand_managers_select_promotions                | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | promotions                | field_users_select_promotions                   | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (status = 'active'::promotion_status_enum) AND (start_date <= CURRENT_DATE) AND (end_date >= CURRENT_DATE) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | promotions                | tenant_admins_manage_promotions                 | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | promotions                | tenant_admins_select_promotions                 | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | reward_redemptions        | admins_insert_reward_redemptions                | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | reward_redemptions        | admins_select_reward_redemptions                | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | reward_redemptions        | admins_update_reward_redemptions                | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | reward_redemptions        | advisors_select_reward_redemptions              | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.id IN ( SELECT DISTINCT v.client_id
           FROM visits v
          WHERE ((v.advisor_id IN ( SELECT ur.user_profile_id
                   FROM (user_roles ur
                     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
                  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'advisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | reward_redemptions        | brand_managers_manage_reward_redemptions        | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (reward_id IN ( SELECT r.id
   FROM rewards r
  WHERE ((r.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (r.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| public     | reward_redemptions        | brand_managers_select_reward_redemptions        | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (reward_id IN ( SELECT r.id
   FROM rewards r
  WHERE ((r.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (r.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| public     | reward_redemptions        | clients_select_own_reward_redemptions           | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.user_id = auth.uid()) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | reward_redemptions        | supervisors_select_reward_redemptions           | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_brand_membership_id IN ( SELECT cbm.id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.id IN ( SELECT DISTINCT v.client_id
           FROM visits v
          WHERE ((v.advisor_id IN ( SELECT up.id
                   FROM user_profiles up
                  WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                           FROM (user_roles ur
                             JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                          WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public     | reward_redemptions        | tenant_admins_manage_reward_redemptions         | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | reward_redemptions        | tenant_admins_select_reward_redemptions         | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | rewards                   | admins_delete_rewards                           | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | rewards                   | admins_insert_rewards                           | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | rewards                   | admins_select_rewards                           | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | rewards                   | admins_update_rewards                           | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | rewards                   | brand_managers_manage_rewards                   | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | rewards                   | brand_managers_select_rewards                   | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | rewards                   | clients_select_rewards                          | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND ((valid_until IS NULL) OR (valid_until >= CURRENT_DATE)) AND (valid_from <= CURRENT_DATE) AND ((usage_limit_total IS NULL) OR (usage_count_total < usage_limit_total)) AND (brand_id IN ( SELECT cbm.brand_id
   FROM ((client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
     JOIN tiers t ON ((cbm.current_tier_id = t.id)))
  WHERE ((c.user_id = auth.uid()) AND (cbm.membership_status = 'active'::membership_status_enum) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL) AND ((rewards.tier_requirements IS NULL) OR (((NOT (rewards.tier_requirements ? 'min_tier_level'::text)) OR (t.tier_level >= ((rewards.tier_requirements ->> 'min_tier_level'::text))::integer)) AND ((NOT (rewards.tier_requirements ? 'allowed_tiers'::text)) OR ((rewards.tier_requirements -> 'allowed_tiers'::text) ? (t.code)::text)) AND ((NOT (rewards.tier_requirements ? 'exclusive_to_tier'::text)) OR ((rewards.tier_requirements ->> 'exclusive_to_tier'::text) = (t.code)::text))))))))                                                                                                                                                                                                                                                         |
| public     | rewards                   | field_users_select_rewards                      | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND ((valid_until IS NULL) OR (valid_until >= CURRENT_DATE)) AND (valid_from <= CURRENT_DATE) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| public     | rewards                   | tenant_admins_manage_rewards                    | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | rewards                   | tenant_admins_select_rewards                    | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | tenants                   | admins_delete_tenants                           | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | tenants                   | admins_insert_tenants                           | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | tenants                   | admins_select_tenants                           | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | tenants                   | admins_update_tenants                           | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | tenants                   | brand_managers_select_tenants                   | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public     | tenants                   | field_users_select_tenants                      | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | tenants                   | tenant_admins_select_tenants                    | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | tiers                     | admins_delete_tiers                             | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | tiers                     | admins_insert_tiers                             | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | tiers                     | admins_select_tiers                             | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | tiers                     | admins_update_tiers                             | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | tiers                     | brand_managers_manage_tiers                     | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | tiers                     | brand_managers_select_tiers                     | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | tiers                     | clients_select_tiers                            | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (brand_id IN ( SELECT cbm.brand_id
   FROM (client_brand_memberships cbm
     JOIN clients c ON ((cbm.client_id = c.id)))
  WHERE ((c.user_id = auth.uid()) AND (cbm.membership_status = 'active'::membership_status_enum) AND (cbm.deleted_at IS NULL) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| public     | tiers                     | field_users_select_tiers                        | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | tiers                     | tenant_admins_manage_tiers                      | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | tiers                     | tenant_admins_select_tiers                      | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | user_profiles             | user_profiles_tenant_access                     | PERMISSIVE | {authenticated} | ALL    | (tenant_id = 'fe0f429d-2d83-4738-af65-32c655cef656'::uuid)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | user_roles                | admins_delete_user_roles                        | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | user_roles                | admins_insert_user_roles                        | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | user_roles                | admins_select_user_roles                        | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | user_roles                | admins_update_user_roles                        | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | user_roles                | brand_managers_manage_roles                     | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum, 'market_analyst'::user_role_type_enum])) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | user_roles                | supervisors_select_subordinate_roles            | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (user_profile_id IN ( SELECT up.id
   FROM user_profiles up
  WHERE (up.manager_id IN ( SELECT supervisor_profile.id
           FROM user_profiles supervisor_profile
          WHERE (supervisor_profile.user_id = auth.uid()))))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| public     | user_roles                | users_select_own_roles                          | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (user_profile_id IN ( SELECT up.id
   FROM user_profiles up
  WHERE (up.user_id = auth.uid()))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | visit_assessments         | admins_delete_visit_assessments                 | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visit_assessments         | admins_insert_visit_assessments                 | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visit_assessments         | admins_select_visit_assessments                 | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visit_assessments         | admins_update_visit_assessments                 | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visit_assessments         | advisors_manage_visit_assessments               | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT ur.user_profile_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['advisor'::user_role_type_enum, 'supervisor'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | visit_assessments         | advisors_select_visit_assessments               | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT ur.user_profile_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['advisor'::user_role_type_enum, 'supervisor'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | visit_assessments         | brand_managers_select_visit_assessments         | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (product_id IN ( SELECT p.id
   FROM products p
  WHERE ((p.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (p.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| public     | visit_assessments         | clients_select_visit_assessments                | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.client_id IN ( SELECT c.id
           FROM clients c
          WHERE ((c.user_id = auth.uid()) AND (c.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | visit_assessments         | supervisors_manage_visit_assessments            | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT up.id
           FROM user_profiles up
          WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                   FROM (user_roles ur
                     JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                  WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | visit_assessments         | supervisors_select_visit_assessments            | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT up.id
           FROM user_profiles up
          WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                   FROM (user_roles ur
                     JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                  WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | visit_assessments         | tenant_admins_manage_visit_assessments          | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visit_assessments         | tenant_admins_select_visit_assessments          | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visit_communication_plans | admins_delete_visit_communication_plans         | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visit_communication_plans | admins_insert_visit_communication_plans         | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visit_communication_plans | admins_select_visit_communication_plans         | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visit_communication_plans | admins_update_visit_communication_plans         | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visit_communication_plans | advisors_manage_visit_communication_plans       | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT ur.user_profile_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['advisor'::user_role_type_enum, 'supervisor'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | visit_communication_plans | advisors_select_visit_communication_plans       | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT ur.user_profile_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['advisor'::user_role_type_enum, 'supervisor'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | visit_communication_plans | brand_managers_manage_visit_communication_plans | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | visit_communication_plans | brand_managers_select_visit_communication_plans | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (brand_id IN ( SELECT ur.brand_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | visit_communication_plans | clients_select_visit_communication_plans        | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.client_id IN ( SELECT c.id
           FROM clients c
          WHERE ((c.user_id = auth.uid()) AND (c.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | visit_communication_plans | supervisors_manage_visit_communication_plans    | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT up.id
           FROM user_profiles up
          WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                   FROM (user_roles ur
                     JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                  WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | visit_communication_plans | supervisors_select_visit_communication_plans    | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT up.id
           FROM user_profiles up
          WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                   FROM (user_roles ur
                     JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                  WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | visit_communication_plans | tenant_admins_manage_visit_communication_plans  | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visit_communication_plans | tenant_admins_select_visit_communication_plans  | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visit_inventories         | admins_delete_visit_inventories                 | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visit_inventories         | admins_insert_visit_inventories                 | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visit_inventories         | admins_select_visit_inventories                 | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visit_inventories         | admins_update_visit_inventories                 | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visit_inventories         | advisors_manage_visit_inventories               | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT ur.user_profile_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['advisor'::user_role_type_enum, 'supervisor'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | visit_inventories         | advisors_select_visit_inventories               | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT ur.user_profile_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['advisor'::user_role_type_enum, 'supervisor'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | visit_inventories         | brand_managers_select_visit_inventories         | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (product_id IN ( SELECT p.id
   FROM products p
  WHERE ((p.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (p.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| public     | visit_inventories         | clients_select_visit_inventories                | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.client_id IN ( SELECT c.id
           FROM clients c
          WHERE ((c.user_id = auth.uid()) AND (c.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | visit_inventories         | supervisors_manage_visit_inventories            | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT up.id
           FROM user_profiles up
          WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                   FROM (user_roles ur
                     JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                  WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | visit_inventories         | supervisors_select_visit_inventories            | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT up.id
           FROM user_profiles up
          WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                   FROM (user_roles ur
                     JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                  WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | visit_inventories         | tenant_admins_manage_visit_inventories          | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visit_inventories         | tenant_admins_select_visit_inventories          | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visit_order_items         | policy_visit_order_items_admin_all              | PERMISSIVE | {authenticated} | ALL    | (EXISTS ( SELECT 1
   FROM user_roles ur
  WHERE ((ur.user_profile_id = ( SELECT user_profiles.id
           FROM user_profiles
          WHERE ((user_profiles.user_id = auth.uid()) AND (user_profiles.deleted_at IS NULL)))) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.tenant_id IS NULL) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visit_order_items         | policy_visit_order_items_advisor_delete         | PERMISSIVE | {authenticated} | DELETE | ((visit_order_id IN ( SELECT vo.id
   FROM visit_orders vo
  WHERE ((vo.advisor_id = ( SELECT user_profiles.id
           FROM user_profiles
          WHERE ((user_profiles.user_id = auth.uid()) AND (user_profiles.deleted_at IS NULL)))) AND (vo.order_status = 'draft'::visit_order_status_enum) AND (vo.deleted_at IS NULL)))) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| public     | visit_order_items         | policy_visit_order_items_advisor_insert         | PERMISSIVE | {authenticated} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visit_order_items         | policy_visit_order_items_advisor_select         | PERMISSIVE | {authenticated} | SELECT | ((visit_order_id IN ( SELECT vo.id
   FROM visit_orders vo
  WHERE ((vo.advisor_id = ( SELECT user_profiles.id
           FROM user_profiles
          WHERE ((user_profiles.user_id = auth.uid()) AND (user_profiles.deleted_at IS NULL)))) AND (vo.deleted_at IS NULL)))) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public     | visit_order_items         | policy_visit_order_items_advisor_update         | PERMISSIVE | {authenticated} | UPDATE | ((visit_order_id IN ( SELECT vo.id
   FROM visit_orders vo
  WHERE ((vo.advisor_id = ( SELECT user_profiles.id
           FROM user_profiles
          WHERE ((user_profiles.user_id = auth.uid()) AND (user_profiles.deleted_at IS NULL)))) AND (vo.order_status = ANY (ARRAY['draft'::visit_order_status_enum, 'confirmed'::visit_order_status_enum])) AND (vo.deleted_at IS NULL)))) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public     | visit_order_items         | policy_visit_order_items_brand_manager          | PERMISSIVE | {authenticated} | SELECT | ((product_id IN ( SELECT p.id
   FROM (products p
     JOIN user_roles ur ON ((ur.brand_id = p.brand_id)))
  WHERE ((ur.user_profile_id = ( SELECT user_profiles.id
           FROM user_profiles
          WHERE ((user_profiles.user_id = auth.uid()) AND (user_profiles.deleted_at IS NULL)))) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL) AND (p.deleted_at IS NULL)))) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | visit_order_items         | policy_visit_order_items_client_select          | PERMISSIVE | {authenticated} | SELECT | ((visit_order_id IN ( SELECT vo.id
   FROM (visit_orders vo
     JOIN clients c ON ((c.id = vo.client_id)))
  WHERE ((c.user_id = auth.uid()) AND (vo.deleted_at IS NULL) AND (c.deleted_at IS NULL)))) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public     | visit_order_items         | policy_visit_order_items_supervisor             | PERMISSIVE | {authenticated} | ALL    | ((visit_order_id IN ( SELECT vo.id
   FROM visit_orders vo
  WHERE ((vo.advisor_id IN ( SELECT up.id
           FROM user_profiles up
          WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                   FROM (user_roles ur
                     JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                  WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (vo.deleted_at IS NULL)))) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | visit_order_items         | policy_visit_order_items_tenant_admin           | PERMISSIVE | {authenticated} | ALL    | (tenant_id IN ( SELECT ur.tenant_id
   FROM user_roles ur
  WHERE ((ur.user_profile_id = ( SELECT user_profiles.id
           FROM user_profiles
          WHERE ((user_profiles.user_id = auth.uid()) AND (user_profiles.deleted_at IS NULL)))) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.tenant_id IS NOT NULL) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | visit_orders              | admins_delete_visit_orders                      | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visit_orders              | admins_insert_visit_orders                      | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visit_orders              | admins_select_visit_orders                      | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visit_orders              | admins_update_visit_orders                      | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visit_orders              | advisors_manage_visit_orders                    | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT ur.user_profile_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['advisor'::user_role_type_enum, 'supervisor'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | visit_orders              | advisors_select_visit_orders                    | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT ur.user_profile_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['advisor'::user_role_type_enum, 'supervisor'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public     | visit_orders              | clients_select_visit_orders                     | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.client_id IN ( SELECT c.id
           FROM clients c
          WHERE ((c.user_id = auth.uid()) AND (c.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | visit_orders              | supervisors_manage_visit_orders                 | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT up.id
           FROM user_profiles up
          WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                   FROM (user_roles ur
                     JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                  WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | visit_orders              | supervisors_select_visit_orders                 | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (visit_id IN ( SELECT v.id
   FROM visits v
  WHERE ((v.advisor_id IN ( SELECT up.id
           FROM user_profiles up
          WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
                   FROM (user_roles ur
                     JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
                  WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))) AND (v.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public     | visit_orders              | tenant_admins_manage_visit_orders               | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visit_orders              | tenant_admins_select_visit_orders               | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visits                    | admins_delete_visits                            | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visits                    | admins_insert_visits                            | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visits                    | admins_select_visits                            | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visits                    | admins_update_visits                            | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visits                    | advisors_manage_visits                          | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (advisor_id IN ( SELECT ur.user_profile_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['advisor'::user_role_type_enum, 'supervisor'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | visits                    | advisors_select_visits                          | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (advisor_id IN ( SELECT ur.user_profile_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['advisor'::user_role_type_enum, 'supervisor'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public     | visits                    | brand_managers_select_visits                    | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_id IN ( SELECT cbm.client_id
   FROM client_brand_memberships cbm
  WHERE ((cbm.brand_id IN ( SELECT ur.brand_id
           FROM (user_roles ur
             JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
          WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (cbm.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| public     | visits                    | clients_select_visits                           | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (client_id IN ( SELECT c.id
   FROM clients c
  WHERE ((c.user_id = auth.uid()) AND (c.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | visits                    | supervisors_manage_visits                       | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (advisor_id IN ( SELECT up.id
   FROM user_profiles up
  WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
           FROM (user_roles ur
             JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
          WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | visits                    | supervisors_select_visits                       | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (advisor_id IN ( SELECT up.id
   FROM user_profiles up
  WHERE ((up.manager_id IN ( SELECT ur.user_profile_id
           FROM (user_roles ur
             JOIN user_profiles up_mgr ON ((ur.user_profile_id = up_mgr.id)))
          WHERE ((up_mgr.user_id = auth.uid()) AND (ur.role = 'supervisor'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))) AND (up.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| public     | visits                    | tenant_admins_manage_visits                     | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visits                    | tenant_admins_select_visits                     | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visits                    | visits_insert_policy                            | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visits                    | visits_select_policy                            | PERMISSIVE | {public}        | SELECT | (deleted_at IS NULL)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | visits                    | visits_update_policy                            | PERMISSIVE | {public}        | UPDATE | ((auth.role() = 'authenticated'::text) AND (deleted_at IS NULL))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| public     | zones                     | admins_delete_zones                             | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | zones                     | admins_insert_zones                             | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | zones                     | admins_select_zones                             | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | zones                     | admins_update_zones                             | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'global'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public     | zones                     | brand_managers_select_zones                     | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT b.tenant_id
   FROM ((user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
     JOIN brands b ON ((ur.brand_id = b.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'brand_manager'::user_role_type_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL) AND (b.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public     | zones                     | field_users_select_assigned_zones               | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (is_active = true) AND (EXISTS ( SELECT 1
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = ANY (ARRAY['supervisor'::user_role_type_enum, 'advisor'::user_role_type_enum])) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL) AND (ur.tenant_id = zones.tenant_id)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public     | zones                     | tenant_admins_manage_zones                      | PERMISSIVE | {public}        | ALL    | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public     | zones                     | tenant_admins_select_zones                      | PERMISSIVE | {public}        | SELECT | ((deleted_at IS NULL) AND (tenant_id IN ( SELECT ur.tenant_id
   FROM (user_roles ur
     JOIN user_profiles up ON ((ur.user_profile_id = up.id)))
  WHERE ((up.user_id = auth.uid()) AND (ur.role = 'admin'::user_role_type_enum) AND (ur.scope = 'tenant'::user_role_scope_enum) AND (ur.status = 'active'::user_role_status_enum) AND (ur.deleted_at IS NULL)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |

## 5. Functions

| schema | function_name                                | language |
| ------ | -------------------------------------------- | -------- |
| public | auto_generate_order_number                   | plpgsql  |
| public | calculate_current_margin                     | sql      |
| public | calculate_order_item_totals                  | plpgsql  |
| public | calculate_order_total                        | plpgsql  |
| public | calculate_points_balance                     | plpgsql  |
| public | calculate_price_variance                     | plpgsql  |
| public | calculate_promotion_rule_reach               | plpgsql  |
| public | calculate_visit_duration                     | plpgsql  |
| public | calculate_visit_order_item_totals            | plpgsql  |
| public | cascade_brand_role_soft_delete               | plpgsql  |
| public | cascade_tenant_soft_delete                   | plpgsql  |
| public | check_manager_hierarchy                      | plpgsql  |
| public | complete_visit                               | plpgsql  |
| public | create_purchase_with_promotions              | plpgsql  |
| public | create_redemption_points_transaction         | plpgsql  |
| public | expire_user_roles                            | plpgsql  |
| public | expire_user_roles_batch                      | plpgsql  |
| public | expire_user_roles_manual                     | plpgsql  |
| public | generate_brand_public_id                     | plpgsql  |
| public | generate_campaign_public_id                  | plpgsql  |
| public | generate_client_brand_membership_public_id   | plpgsql  |
| public | generate_client_invoice_data_public_id       | plpgsql  |
| public | generate_client_public_id                    | plpgsql  |
| public | generate_client_tier_assignment_public_id    | plpgsql  |
| public | generate_client_type_public_id               | plpgsql  |
| public | generate_commercial_structure_public_id      | plpgsql  |
| public | generate_market_public_id                    | plpgsql  |
| public | generate_order_item_public_id                | plpgsql  |
| public | generate_order_number                        | plpgsql  |
| public | generate_order_public_id                     | plpgsql  |
| public | generate_point_transaction_public_id         | plpgsql  |
| public | generate_points_transaction_public_id        | plpgsql  |
| public | generate_product_category_public_id          | plpgsql  |
| public | generate_product_public_id                   | plpgsql  |
| public | generate_product_variant_public_id           | plpgsql  |
| public | generate_promotion_public_id                 | plpgsql  |
| public | generate_promotion_redemption_public_id      | plpgsql  |
| public | generate_promotion_rule_public_id            | plpgsql  |
| public | generate_public_id                           | plpgsql  |
| public | generate_redemption_code                     | plpgsql  |
| public | generate_reward_public_id                    | plpgsql  |
| public | generate_reward_redemption_public_id         | plpgsql  |
| public | generate_tenant_public_id                    | plpgsql  |
| public | generate_tier_public_id                      | plpgsql  |
| public | generate_user_profile_public_id              | plpgsql  |
| public | generate_visit_assessment_public_id          | plpgsql  |
| public | generate_visit_communication_plan_public_id  | plpgsql  |
| public | generate_visit_inventory_public_id           | plpgsql  |
| public | generate_visit_order_item_public_id          | plpgsql  |
| public | generate_visit_order_public_id               | plpgsql  |
| public | generate_visit_public_id                     | plpgsql  |
| public | generate_zone_public_id                      | plpgsql  |
| public | get_applicable_promotions                    | plpgsql  |
| public | get_current_tenant_id                        | plpgsql  |
| public | get_next_order_item_line_number              | plpgsql  |
| public | get_next_visit_order_item_line_number        | plpgsql  |
| public | get_role_expiration_stats                    | sql      |
| public | get_role_system_health                       | sql      |
| public | gin_extract_query_trgm                       | c        |
| public | gin_extract_value_trgm                       | c        |
| public | gin_trgm_consistent                          | c        |
| public | gin_trgm_triconsistent                       | c        |
| public | gtrgm_compress                               | c        |
| public | gtrgm_consistent                             | c        |
| public | gtrgm_decompress                             | c        |
| public | gtrgm_distance                               | c        |
| public | gtrgm_in                                     | c        |
| public | gtrgm_options                                | c        |
| public | gtrgm_out                                    | c        |
| public | gtrgm_penalty                                | c        |
| public | gtrgm_picksplit                              | c        |
| public | gtrgm_same                                   | c        |
| public | gtrgm_union                                  | c        |
| public | handle_new_user                              | plpgsql  |
| public | handle_promotion_rule_toggles                | plpgsql  |
| public | is_role_active                               | sql      |
| public | mark_transaction_reversed                    | plpgsql  |
| public | reset_public_id_sequence                     | plpgsql  |
| public | set_limit                                    | c        |
| public | show_limit                                   | c        |
| public | show_trgm                                    | c        |
| public | similarity                                   | c        |
| public | similarity_dist                              | c        |
| public | similarity_op                                | c        |
| public | strict_word_similarity                       | c        |
| public | strict_word_similarity_commutator_op         | c        |
| public | strict_word_similarity_dist_commutator_op    | c        |
| public | strict_word_similarity_dist_op               | c        |
| public | strict_word_similarity_op                    | c        |
| public | sync_client_email                            | plpgsql  |
| public | sync_user_profile_email                      | plpgsql  |
| public | update_campaign_budget_spent                 | plpgsql  |
| public | update_membership_current_tier               | plpgsql  |
| public | update_membership_points                     | plpgsql  |
| public | update_order_items_updated_at                | plpgsql  |
| public | update_order_totals_from_items               | plpgsql  |
| public | update_promotion_usage                       | plpgsql  |
| public | update_reward_usage_count                    | plpgsql  |
| public | update_updated_at_column                     | plpgsql  |
| public | update_visit_assessment                      | plpgsql  |
| public | update_visit_order_items_updated_at          | plpgsql  |
| public | update_visit_order_totals_from_items         | plpgsql  |
| public | update_visit_workflow_status                 | plpgsql  |
| public | update_visit_workflow_status_communication   | plpgsql  |
| public | update_visit_workflow_status_inventory       | plpgsql  |
| public | update_visit_workflow_status_orders          | plpgsql  |
| public | user_has_role                                | plpgsql  |
| public | validate_campaign_data                       | plpgsql  |
| public | validate_client_brand_membership_data        | plpgsql  |
| public | validate_client_data                         | plpgsql  |
| public | validate_client_invoice_data                 | plpgsql  |
| public | validate_client_tier_assignment_data         | plpgsql  |
| public | validate_client_type_data                    | plpgsql  |
| public | validate_commercial_structure_data           | plpgsql  |
| public | validate_current_tier_assignment_unique      | plpgsql  |
| public | validate_default_tier_unique                 | plpgsql  |
| public | validate_default_variant_unique              | plpgsql  |
| public | validate_market_data                         | plpgsql  |
| public | validate_order_data                          | plpgsql  |
| public | validate_order_item_calculations             | plpgsql  |
| public | validate_order_item_metadata                 | plpgsql  |
| public | validate_order_item_tenant_consistency       | plpgsql  |
| public | validate_points_transaction_data             | plpgsql  |
| public | validate_preferred_invoice_data_unique       | plpgsql  |
| public | validate_primary_brand_unique                | plpgsql  |
| public | validate_product_category_data               | plpgsql  |
| public | validate_product_data                        | plpgsql  |
| public | validate_product_variant_data                | plpgsql  |
| public | validate_promotion_data                      | plpgsql  |
| public | validate_promotion_redemption_data           | plpgsql  |
| public | validate_promotion_rule_data                 | plpgsql  |
| public | validate_public_id                           | plpgsql  |
| public | validate_reward_data                         | plpgsql  |
| public | validate_reward_redemption_data              | plpgsql  |
| public | validate_role_expiration_on_critical_ops     | plpgsql  |
| public | validate_single_primary_role                 | plpgsql  |
| public | validate_tier_data                           | plpgsql  |
| public | validate_visit_assessment_data               | plpgsql  |
| public | validate_visit_communication_plan_data       | plpgsql  |
| public | validate_visit_data                          | plpgsql  |
| public | validate_visit_inventory_data                | plpgsql  |
| public | validate_visit_order_data                    | plpgsql  |
| public | validate_visit_order_item_calculations       | plpgsql  |
| public | validate_visit_order_item_metadata           | plpgsql  |
| public | validate_visit_order_item_tenant_consistency | plpgsql  |
| public | validate_zone_data                           | plpgsql  |
| public | word_similarity                              | c        |
| public | word_similarity_commutator_op                | c        |
| public | word_similarity_dist_commutator_op           | c        |
| public | word_similarity_dist_op                      | c        |
| public | word_similarity_op                           | c        |

## 6. Enums

| typname                                   | enumlabel             |
| ----------------------------------------- | --------------------- |
| assessment_type_enum                      | product               |
| assessment_type_enum                      | package               |
| assessment_type_enum                      | price                 |
| assessment_type_enum                      | display               |
| assessment_type_enum                      | competition           |
| brand_status_enum                         | active                |
| brand_status_enum                         | inactive              |
| brand_status_enum                         | draft                 |
| campaign_status_enum                      | draft                 |
| campaign_status_enum                      | pending_approval      |
| campaign_status_enum                      | approved              |
| campaign_status_enum                      | active                |
| campaign_status_enum                      | paused                |
| campaign_status_enum                      | completed             |
| campaign_status_enum                      | cancelled             |
| campaign_type_enum                        | product_launch        |
| campaign_type_enum                        | seasonal              |
| campaign_type_enum                        | promotional           |
| campaign_type_enum                        | awareness             |
| campaign_type_enum                        | loyalty               |
| campaign_type_enum                        | competitive           |
| campaign_type_enum                        | retention             |
| client_approval_enum                      | pending               |
| client_approval_enum                      | approved              |
| client_approval_enum                      | rejected              |
| client_approval_enum                      | not_required          |
| client_status_enum                        | active                |
| client_status_enum                        | inactive              |
| client_status_enum                        | suspended             |
| client_status_enum                        | prospect              |
| client_type_category_enum                 | retail                |
| client_type_category_enum                 | wholesale             |
| client_type_category_enum                 | institutional         |
| client_type_category_enum                 | online                |
| client_type_category_enum                 | hybrid                |
| commercial_structure_type_enum            | direct                |
| commercial_structure_type_enum            | distributor           |
| commercial_structure_type_enum            | wholesaler            |
| commercial_structure_type_enum            | retailer              |
| commercial_structure_type_enum            | hybrid                |
| communication_current_status_enum         | not_present           |
| communication_current_status_enum         | present_good          |
| communication_current_status_enum         | present_damaged       |
| communication_current_status_enum         | present_outdated      |
| communication_current_status_enum         | installed_today       |
| communication_material_type_enum          | poster                |
| communication_material_type_enum          | banner                |
| communication_material_type_enum          | wobbler               |
| communication_material_type_enum          | display               |
| communication_material_type_enum          | refrigerator          |
| communication_material_type_enum          | cooler                |
| communication_material_type_enum          | shelf_talker          |
| communication_material_type_enum          | floor_graphic         |
| communication_material_type_enum          | window_cling          |
| communication_material_type_enum          | promotional_stand     |
| communication_planned_action_enum         | install_new           |
| communication_planned_action_enum         | replace_existing      |
| communication_planned_action_enum         | repair                |
| communication_planned_action_enum         | remove                |
| communication_planned_action_enum         | relocate              |
| communication_planned_action_enum         | no_action             |
| count_accuracy_enum                       | exact                 |
| count_accuracy_enum                       | estimated             |
| count_accuracy_enum                       | partial               |
| display_quality_enum                      | excellent             |
| display_quality_enum                      | good                  |
| display_quality_enum                      | fair                  |
| display_quality_enum                      | poor                  |
| display_quality_enum                      | none                  |
| location_in_store_enum                    | shelf                 |
| location_in_store_enum                    | storage               |
| location_in_store_enum                    | display               |
| location_in_store_enum                    | refrigerator          |
| location_in_store_enum                    | freezer               |
| location_in_store_enum                    | counter               |
| membership_status_enum                    | active                |
| membership_status_enum                    | inactive              |
| membership_status_enum                    | suspended             |
| membership_status_enum                    | pending               |
| membership_status_enum                    | rejected              |
| order_item_status_enum                    | pending               |
| order_item_status_enum                    | confirmed             |
| order_item_status_enum                    | out_of_stock          |
| order_item_status_enum                    | substituted           |
| order_item_status_enum                    | delivered             |
| order_item_status_enum                    | returned              |
| order_item_unit_type_enum                 | pieza                 |
| order_item_unit_type_enum                 | kg                    |
| order_item_unit_type_enum                 | litro                 |
| order_item_unit_type_enum                 | caja                  |
| order_item_unit_type_enum                 | paquete               |
| order_payment_method_enum                 | cash                  |
| order_payment_method_enum                 | transfer              |
| order_payment_method_enum                 | credit                |
| order_payment_method_enum                 | check                 |
| order_payment_method_enum                 | card                  |
| order_payment_method_enum                 | points                |
| order_payment_status_enum                 | pending               |
| order_payment_status_enum                 | paid                  |
| order_payment_status_enum                 | partial               |
| order_payment_status_enum                 | failed                |
| order_payment_status_enum                 | refunded              |
| order_priority_enum                       | low                   |
| order_priority_enum                       | normal                |
| order_priority_enum                       | high                  |
| order_priority_enum                       | urgent                |
| order_source_channel_enum                 | client_portal         |
| order_source_channel_enum                 | mobile_app            |
| order_source_channel_enum                 | whatsapp              |
| order_source_channel_enum                 | phone                 |
| order_source_channel_enum                 | email                 |
| order_status_enum                         | draft                 |
| order_status_enum                         | submitted             |
| order_status_enum                         | confirmed             |
| order_status_enum                         | processing            |
| order_status_enum                         | shipped               |
| order_status_enum                         | delivered             |
| order_status_enum                         | completed             |
| order_status_enum                         | cancelled             |
| order_status_enum                         | returned              |
| order_type_enum                           | standard              |
| order_type_enum                           | express               |
| order_type_enum                           | scheduled             |
| order_type_enum                           | recurring             |
| order_type_enum                           | sample                |
| package_condition_enum                    | excellent             |
| package_condition_enum                    | good                  |
| package_condition_enum                    | fair                  |
| package_condition_enum                    | poor                  |
| package_condition_enum                    | damaged               |
| points_source_type_enum                   | purchase              |
| points_source_type_enum                   | visit                 |
| points_source_type_enum                   | campaign              |
| points_source_type_enum                   | referral              |
| points_source_type_enum                   | bonus                 |
| points_source_type_enum                   | manual                |
| points_source_type_enum                   | expiration            |
| points_source_type_enum                   | redemption            |
| points_transaction_type_enum              | earned                |
| points_transaction_type_enum              | redeemed              |
| points_transaction_type_enum              | expired               |
| points_transaction_type_enum              | adjusted              |
| points_transaction_type_enum              | bonus                 |
| points_transaction_type_enum              | penalty               |
| points_transaction_type_enum              | transferred           |
| product_unit_type_enum                    | pieza                 |
| product_unit_type_enum                    | kg                    |
| product_unit_type_enum                    | litro                 |
| product_unit_type_enum                    | caja                  |
| product_unit_type_enum                    | paquete               |
| product_variant_size_unit_enum            | ml                    |
| product_variant_size_unit_enum            | g                     |
| product_variant_size_unit_enum            | kg                    |
| product_variant_size_unit_enum            | l                     |
| product_variant_size_unit_enum            | unidades              |
| promotion_order_type_enum                 | independent_order     |
| promotion_order_type_enum                 | visit_order           |
| promotion_redemption_status_enum          | applied               |
| promotion_redemption_status_enum          | pending_validation    |
| promotion_redemption_status_enum          | validated             |
| promotion_redemption_status_enum          | rejected              |
| promotion_redemption_status_enum          | reversed              |
| promotion_rule_type_enum                  | zone                  |
| promotion_rule_type_enum                  | state                 |
| promotion_rule_type_enum                  | market_type           |
| promotion_rule_type_enum                  | commercial_structure  |
| promotion_rule_type_enum                  | client_type           |
| promotion_rule_type_enum                  | specific_client       |
| promotion_rule_type_enum                  | product               |
| promotion_rule_type_enum                  | category              |
| promotion_rule_type_enum                  | tier                  |
| promotion_rule_type_enum                  | custom                |
| promotion_status_enum                     | draft                 |
| promotion_status_enum                     | pending_approval      |
| promotion_status_enum                     | approved              |
| promotion_status_enum                     | active                |
| promotion_status_enum                     | paused                |
| promotion_status_enum                     | completed             |
| promotion_status_enum                     | cancelled             |
| promotion_type_applied_enum               | discount_percentage   |
| promotion_type_applied_enum               | discount_amount       |
| promotion_type_applied_enum               | buy_x_get_y           |
| promotion_type_applied_enum               | free_product          |
| promotion_type_applied_enum               | volume_discount       |
| promotion_type_applied_enum               | points_multiplier     |
| promotion_type_applied_enum               | tier_bonus            |
| promotion_type_enum                       | discount_percentage   |
| promotion_type_enum                       | discount_amount       |
| promotion_type_enum                       | buy_x_get_y           |
| promotion_type_enum                       | free_product          |
| promotion_type_enum                       | volume_discount       |
| promotion_type_enum                       | tier_bonus            |
| promotion_type_enum                       | cashback              |
| promotion_type_enum                       | points_multiplier     |
| redemption_status_enum                    | pending               |
| redemption_status_enum                    | confirmed             |
| redemption_status_enum                    | applied               |
| redemption_status_enum                    | expired               |
| redemption_status_enum                    | cancelled             |
| restock_priority_enum                     | urgent                |
| restock_priority_enum                     | high                  |
| restock_priority_enum                     | medium                |
| restock_priority_enum                     | low                   |
| reward_type_enum                          | discount_percentage   |
| reward_type_enum                          | discount_amount       |
| reward_type_enum                          | free_product          |
| reward_type_enum                          | free_shipping         |
| reward_type_enum                          | exclusive_access      |
| reward_type_enum                          | service_upgrade       |
| reward_type_enum                          | cashback              |
| reward_type_enum                          | gift                  |
| rfc_person_type_enum                      | fisica                |
| rfc_person_type_enum                      | moral                 |
| rotation_quality_enum                     | excellent             |
| rotation_quality_enum                     | good                  |
| rotation_quality_enum                     | fair                  |
| rotation_quality_enum                     | poor                  |
| shelf_position_enum                       | eye_level             |
| shelf_position_enum                       | top_shelf             |
| shelf_position_enum                       | middle_shelf          |
| shelf_position_enum                       | bottom_shelf          |
| shelf_position_enum                       | end_cap               |
| shelf_position_enum                       | floor_display         |
| status                                    | active                |
| status                                    | inactive              |
| status                                    | suspended             |
| status                                    | pending_approval      |
| stock_level_enum                          | out_of_stock          |
| stock_level_enum                          | low                   |
| stock_level_enum                          | adequate              |
| stock_level_enum                          | high                  |
| stock_level_enum                          | overstocked           |
| subscription_plan                         | base                  |
| subscription_plan                         | pro                   |
| subscription_plan                         | enterprise            |
| tenant_status_enum                        | active                |
| tenant_status_enum                        | suspended             |
| tenant_status_enum                        | trial                 |
| tenant_subscription_plan_enum             | base                  |
| tenant_subscription_plan_enum             | pro                   |
| tenant_subscription_plan_enum             | enterprise            |
| tier_assigned_by                          | system                |
| tier_assigned_by                          | manual                |
| tier_assigned_by                          | external_sync         |
| tier_assignment_type_enum                 | manual                |
| tier_assignment_type_enum                 | automatic             |
| tier_assignment_type_enum                 | initial               |
| tier_assignment_type_enum                 | promotion             |
| tier_assignment_type_enum                 | demotion              |
| tier_assignment_type_enum                 | correction            |
| tier_recalculation_frequency              | daily                 |
| tier_recalculation_frequency              | weekly                |
| tier_recalculation_frequency              | monthly               |
| tier_recalculation_frequency              | manual                |
| tier_system_type                          | points_based          |
| tier_system_type                          | purchase_based        |
| tier_system_type                          | manual                |
| tier_system_type                          | external_api          |
| user_profile_status_enum                  | active                |
| user_profile_status_enum                  | inactive              |
| user_profile_status_enum                  | suspended             |
| user_role_scope_enum                      | global                |
| user_role_scope_enum                      | tenant                |
| user_role_scope_enum                      | brand                 |
| user_role_status_enum                     | active                |
| user_role_status_enum                     | inactive              |
| user_role_status_enum                     | suspended             |
| user_role_type                            | admin                 |
| user_role_type                            | brand_manager         |
| user_role_type                            | supervisor            |
| user_role_type                            | advisor               |
| user_role_type                            | market_analyst        |
| user_role_type                            | client                |
| user_role_type_enum                       | admin                 |
| user_role_type_enum                       | brand_manager         |
| user_role_type_enum                       | supervisor            |
| user_role_type_enum                       | advisor               |
| user_role_type_enum                       | market_analyst        |
| visit_order_item_delivery_preference_enum | immediate             |
| visit_order_item_delivery_preference_enum | scheduled             |
| visit_order_item_delivery_preference_enum | next_visit            |
| visit_order_item_priority_enum            | low                   |
| visit_order_item_priority_enum            | normal                |
| visit_order_item_priority_enum            | high                  |
| visit_order_item_priority_enum            | urgent                |
| visit_order_item_source_enum              | catalog               |
| visit_order_item_source_enum              | special_order         |
| visit_order_item_source_enum              | sample                |
| visit_order_item_source_enum              | demo                  |
| visit_order_item_unit_type_enum           | pieza                 |
| visit_order_item_unit_type_enum           | kg                    |
| visit_order_item_unit_type_enum           | litro                 |
| visit_order_item_unit_type_enum           | caja                  |
| visit_order_item_unit_type_enum           | paquete               |
| visit_order_payment_method_enum           | cash                  |
| visit_order_payment_method_enum           | transfer              |
| visit_order_payment_method_enum           | credit                |
| visit_order_payment_method_enum           | check                 |
| visit_order_payment_method_enum           | card                  |
| visit_order_status_enum                   | draft                 |
| visit_order_status_enum                   | confirmed             |
| visit_order_status_enum                   | processed             |
| visit_order_status_enum                   | delivered             |
| visit_order_status_enum                   | cancelled             |
| visit_order_type_enum                     | immediate             |
| visit_order_type_enum                     | scheduled             |
| visit_order_type_enum                     | quote                 |
| visit_order_type_enum                     | sample                |
| visit_status_enum                         | planned               |
| visit_status_enum                         | in_progress           |
| visit_status_enum                         | completed             |
| visit_status_enum                         | cancelled             |
| visit_status_enum                         | no_show               |
| visit_type_enum                           | scheduled             |
| visit_type_enum                           | spontaneous           |
| visit_type_enum                           | follow_up             |
| visit_type_enum                           | emergency             |
| visit_workflow_status_enum                | assessment_pending    |
| visit_workflow_status_enum                | inventory_pending     |
| visit_workflow_status_enum                | purchase_pending      |
| visit_workflow_status_enum                | communication_pending |
| visit_workflow_status_enum                | completed             |
| zone_type_enum                            | country               |
| zone_type_enum                            | region                |
| zone_type_enum                            | state                 |
| zone_type_enum                            | city                  |
| zone_type_enum                            | district              |
| zone_type_enum                            | custom                |

## 7. Indices

| schemaname | tablename                 | indexname                                                  | indexdef                                                                                                                                                                                                                                             |
| ---------- | ------------------------- | ---------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| public     | brands                    | brands_pkey                                                | CREATE UNIQUE INDEX brands_pkey ON public.brands USING btree (id)                                                                                                                                                                                    |
| public     | brands                    | brands_public_id_key                                       | CREATE UNIQUE INDEX brands_public_id_key ON public.brands USING btree (public_id)                                                                                                                                                                    |
| public     | brands                    | brands_slug_key                                            | CREATE UNIQUE INDEX brands_slug_key ON public.brands USING btree (slug)                                                                                                                                                                              |
| public     | brands                    | idx_brands_deleted_at                                      | CREATE INDEX idx_brands_deleted_at ON public.brands USING btree (deleted_at)                                                                                                                                                                         |
| public     | brands                    | idx_brands_public_id                                       | CREATE INDEX idx_brands_public_id ON public.brands USING btree (public_id)                                                                                                                                                                           |
| public     | brands                    | idx_brands_slug                                            | CREATE INDEX idx_brands_slug ON public.brands USING btree (slug)                                                                                                                                                                                     |
| public     | brands                    | idx_brands_status                                          | CREATE INDEX idx_brands_status ON public.brands USING btree (status)                                                                                                                                                                                 |
| public     | brands                    | idx_brands_tenant_id                                       | CREATE INDEX idx_brands_tenant_id ON public.brands USING btree (tenant_id)                                                                                                                                                                           |
| public     | campaigns                 | campaigns_pkey                                             | CREATE UNIQUE INDEX campaigns_pkey ON public.campaigns USING btree (id)                                                                                                                                                                              |
| public     | campaigns                 | campaigns_public_id_key                                    | CREATE UNIQUE INDEX campaigns_public_id_key ON public.campaigns USING btree (public_id)                                                                                                                                                              |
| public     | campaigns                 | idx_campaigns_approved_by                                  | CREATE INDEX idx_campaigns_approved_by ON public.campaigns USING btree (approved_by)                                                                                                                                                                 |
| public     | campaigns                 | idx_campaigns_brand_id                                     | CREATE INDEX idx_campaigns_brand_id ON public.campaigns USING btree (brand_id)                                                                                                                                                                       |
| public     | campaigns                 | idx_campaigns_campaign_objectives_gin                      | CREATE INDEX idx_campaigns_campaign_objectives_gin ON public.campaigns USING gin (campaign_objectives)                                                                                                                                               |
| public     | campaigns                 | idx_campaigns_campaign_tags_gin                            | CREATE INDEX idx_campaigns_campaign_tags_gin ON public.campaigns USING gin (campaign_tags)                                                                                                                                                           |
| public     | campaigns                 | idx_campaigns_campaign_type                                | CREATE INDEX idx_campaigns_campaign_type ON public.campaigns USING btree (campaign_type)                                                                                                                                                             |
| public     | campaigns                 | idx_campaigns_channels_gin                                 | CREATE INDEX idx_campaigns_channels_gin ON public.campaigns USING gin (channels)                                                                                                                                                                     |
| public     | campaigns                 | idx_campaigns_created_at                                   | CREATE INDEX idx_campaigns_created_at ON public.campaigns USING btree (created_at)                                                                                                                                                                   |
| public     | campaigns                 | idx_campaigns_created_by                                   | CREATE INDEX idx_campaigns_created_by ON public.campaigns USING btree (created_by)                                                                                                                                                                   |
| public     | campaigns                 | idx_campaigns_deleted_at                                   | CREATE INDEX idx_campaigns_deleted_at ON public.campaigns USING btree (deleted_at)                                                                                                                                                                   |
| public     | campaigns                 | idx_campaigns_end_date                                     | CREATE INDEX idx_campaigns_end_date ON public.campaigns USING btree (end_date)                                                                                                                                                                       |
| public     | campaigns                 | idx_campaigns_geographic_scope_gin                         | CREATE INDEX idx_campaigns_geographic_scope_gin ON public.campaigns USING gin (geographic_scope)                                                                                                                                                     |
| public     | campaigns                 | idx_campaigns_is_template                                  | CREATE INDEX idx_campaigns_is_template ON public.campaigns USING btree (is_template)                                                                                                                                                                 |
| public     | campaigns                 | idx_campaigns_launch_ready                                 | CREATE INDEX idx_campaigns_launch_ready ON public.campaigns USING btree (launch_ready)                                                                                                                                                               |
| public     | campaigns                 | idx_campaigns_performance_metrics_gin                      | CREATE INDEX idx_campaigns_performance_metrics_gin ON public.campaigns USING gin (performance_metrics)                                                                                                                                               |
| public     | campaigns                 | idx_campaigns_public_id                                    | CREATE INDEX idx_campaigns_public_id ON public.campaigns USING btree (public_id)                                                                                                                                                                     |
| public     | campaigns                 | idx_campaigns_start_date                                   | CREATE INDEX idx_campaigns_start_date ON public.campaigns USING btree (start_date)                                                                                                                                                                   |
| public     | campaigns                 | idx_campaigns_status                                       | CREATE INDEX idx_campaigns_status ON public.campaigns USING btree (status)                                                                                                                                                                           |
| public     | campaigns                 | idx_campaigns_target_audience_gin                          | CREATE INDEX idx_campaigns_target_audience_gin ON public.campaigns USING gin (target_audience)                                                                                                                                                       |
| public     | campaigns                 | idx_campaigns_template_name                                | CREATE INDEX idx_campaigns_template_name ON public.campaigns USING btree (template_name)                                                                                                                                                             |
| public     | campaigns                 | idx_campaigns_tenant_id                                    | CREATE INDEX idx_campaigns_tenant_id ON public.campaigns USING btree (tenant_id)                                                                                                                                                                     |
| public     | client_brand_memberships  | client_brand_memberships_client_brand_unique               | CREATE UNIQUE INDEX client_brand_memberships_client_brand_unique ON public.client_brand_memberships USING btree (client_id, brand_id)                                                                                                                |
| public     | client_brand_memberships  | client_brand_memberships_pkey                              | CREATE UNIQUE INDEX client_brand_memberships_pkey ON public.client_brand_memberships USING btree (id)                                                                                                                                                |
| public     | client_brand_memberships  | client_brand_memberships_public_id_key                     | CREATE UNIQUE INDEX client_brand_memberships_public_id_key ON public.client_brand_memberships USING btree (public_id)                                                                                                                                |
| public     | client_brand_memberships  | idx_client_brand_memberships_approved_by                   | CREATE INDEX idx_client_brand_memberships_approved_by ON public.client_brand_memberships USING btree (approved_by)                                                                                                                                   |
| public     | client_brand_memberships  | idx_client_brand_memberships_brand_id                      | CREATE INDEX idx_client_brand_memberships_brand_id ON public.client_brand_memberships USING btree (brand_id)                                                                                                                                         |
| public     | client_brand_memberships  | idx_client_brand_memberships_client_id                     | CREATE INDEX idx_client_brand_memberships_client_id ON public.client_brand_memberships USING btree (client_id)                                                                                                                                       |
| public     | client_brand_memberships  | idx_client_brand_memberships_communication_preferences_gin | CREATE INDEX idx_client_brand_memberships_communication_preferences_gin ON public.client_brand_memberships USING gin (communication_preferences)                                                                                                     |
| public     | client_brand_memberships  | idx_client_brand_memberships_current_tier_id               | CREATE INDEX idx_client_brand_memberships_current_tier_id ON public.client_brand_memberships USING btree (current_tier_id)                                                                                                                           |
| public     | client_brand_memberships  | idx_client_brand_memberships_deleted_at                    | CREATE INDEX idx_client_brand_memberships_deleted_at ON public.client_brand_memberships USING btree (deleted_at)                                                                                                                                     |
| public     | client_brand_memberships  | idx_client_brand_memberships_is_primary_brand              | CREATE INDEX idx_client_brand_memberships_is_primary_brand ON public.client_brand_memberships USING btree (is_primary_brand)                                                                                                                         |
| public     | client_brand_memberships  | idx_client_brand_memberships_joined_date                   | CREATE INDEX idx_client_brand_memberships_joined_date ON public.client_brand_memberships USING btree (joined_date)                                                                                                                                   |
| public     | client_brand_memberships  | idx_client_brand_memberships_last_purchase_date            | CREATE INDEX idx_client_brand_memberships_last_purchase_date ON public.client_brand_memberships USING btree (last_purchase_date)                                                                                                                     |
| public     | client_brand_memberships  | idx_client_brand_memberships_membership_preferences_gin    | CREATE INDEX idx_client_brand_memberships_membership_preferences_gin ON public.client_brand_memberships USING gin (membership_preferences)                                                                                                           |
| public     | client_brand_memberships  | idx_client_brand_memberships_membership_status             | CREATE INDEX idx_client_brand_memberships_membership_status ON public.client_brand_memberships USING btree (membership_status)                                                                                                                       |
| public     | client_brand_memberships  | idx_client_brand_memberships_public_id                     | CREATE INDEX idx_client_brand_memberships_public_id ON public.client_brand_memberships USING btree (public_id)                                                                                                                                       |
| public     | client_brand_memberships  | idx_client_brand_memberships_tenant_id                     | CREATE INDEX idx_client_brand_memberships_tenant_id ON public.client_brand_memberships USING btree (tenant_id)                                                                                                                                       |
| public     | client_invoice_data       | client_invoice_data_pkey                                   | CREATE UNIQUE INDEX client_invoice_data_pkey ON public.client_invoice_data USING btree (id)                                                                                                                                                          |
| public     | client_invoice_data       | client_invoice_data_public_id_key                          | CREATE UNIQUE INDEX client_invoice_data_public_id_key ON public.client_invoice_data USING btree (public_id)                                                                                                                                          |
| public     | client_invoice_data       | idx_client_invoice_data_client_id                          | CREATE INDEX idx_client_invoice_data_client_id ON public.client_invoice_data USING btree (client_id)                                                                                                                                                 |
| public     | client_invoice_data       | idx_client_invoice_data_deleted_at                         | CREATE INDEX idx_client_invoice_data_deleted_at ON public.client_invoice_data USING btree (deleted_at)                                                                                                                                               |
| public     | client_invoice_data       | idx_client_invoice_data_is_active                          | CREATE INDEX idx_client_invoice_data_is_active ON public.client_invoice_data USING btree (is_active)                                                                                                                                                 |
| public     | client_invoice_data       | idx_client_invoice_data_is_preferred                       | CREATE INDEX idx_client_invoice_data_is_preferred ON public.client_invoice_data USING btree (is_preferred)                                                                                                                                           |
| public     | client_invoice_data       | idx_client_invoice_data_person_type                        | CREATE INDEX idx_client_invoice_data_person_type ON public.client_invoice_data USING btree (person_type)                                                                                                                                             |
| public     | client_invoice_data       | idx_client_invoice_data_public_id                          | CREATE INDEX idx_client_invoice_data_public_id ON public.client_invoice_data USING btree (public_id)                                                                                                                                                 |
| public     | client_invoice_data       | idx_client_invoice_data_rfc                                | CREATE INDEX idx_client_invoice_data_rfc ON public.client_invoice_data USING btree (rfc)                                                                                                                                                             |
| public     | client_invoice_data       | idx_client_invoice_data_tenant_id                          | CREATE INDEX idx_client_invoice_data_tenant_id ON public.client_invoice_data USING btree (tenant_id)                                                                                                                                                 |
| public     | client_tier_assignments   | client_tier_assignments_pkey                               | CREATE UNIQUE INDEX client_tier_assignments_pkey ON public.client_tier_assignments USING btree (id)                                                                                                                                                  |
| public     | client_tier_assignments   | client_tier_assignments_public_id_key                      | CREATE UNIQUE INDEX client_tier_assignments_public_id_key ON public.client_tier_assignments USING btree (public_id)                                                                                                                                  |
| public     | client_tier_assignments   | idx_client_tier_assignments_assigned_by                    | CREATE INDEX idx_client_tier_assignments_assigned_by ON public.client_tier_assignments USING btree (assigned_by)                                                                                                                                     |
| public     | client_tier_assignments   | idx_client_tier_assignments_assigned_date                  | CREATE INDEX idx_client_tier_assignments_assigned_date ON public.client_tier_assignments USING btree (assigned_date)                                                                                                                                 |
| public     | client_tier_assignments   | idx_client_tier_assignments_assignment_type                | CREATE INDEX idx_client_tier_assignments_assignment_type ON public.client_tier_assignments USING btree (assignment_type)                                                                                                                             |
| public     | client_tier_assignments   | idx_client_tier_assignments_benefits_activated             | CREATE INDEX idx_client_tier_assignments_benefits_activated ON public.client_tier_assignments USING btree (benefits_activated)                                                                                                                       |
| public     | client_tier_assignments   | idx_client_tier_assignments_client_brand_membership_id     | CREATE INDEX idx_client_tier_assignments_client_brand_membership_id ON public.client_tier_assignments USING btree (client_brand_membership_id)                                                                                                       |
| public     | client_tier_assignments   | idx_client_tier_assignments_created_at                     | CREATE INDEX idx_client_tier_assignments_created_at ON public.client_tier_assignments USING btree (created_at)                                                                                                                                       |
| public     | client_tier_assignments   | idx_client_tier_assignments_deleted_at                     | CREATE INDEX idx_client_tier_assignments_deleted_at ON public.client_tier_assignments USING btree (deleted_at)                                                                                                                                       |
| public     | client_tier_assignments   | idx_client_tier_assignments_effective_from                 | CREATE INDEX idx_client_tier_assignments_effective_from ON public.client_tier_assignments USING btree (effective_from)                                                                                                                               |
| public     | client_tier_assignments   | idx_client_tier_assignments_effective_until                | CREATE INDEX idx_client_tier_assignments_effective_until ON public.client_tier_assignments USING btree (effective_until)                                                                                                                             |
| public     | client_tier_assignments   | idx_client_tier_assignments_is_current                     | CREATE INDEX idx_client_tier_assignments_is_current ON public.client_tier_assignments USING btree (is_current)                                                                                                                                       |
| public     | client_tier_assignments   | idx_client_tier_assignments_metadata_gin                   | CREATE INDEX idx_client_tier_assignments_metadata_gin ON public.client_tier_assignments USING gin (metadata)                                                                                                                                         |
| public     | client_tier_assignments   | idx_client_tier_assignments_notification_sent              | CREATE INDEX idx_client_tier_assignments_notification_sent ON public.client_tier_assignments USING btree (notification_sent)                                                                                                                         |
| public     | client_tier_assignments   | idx_client_tier_assignments_previous_tier_id               | CREATE INDEX idx_client_tier_assignments_previous_tier_id ON public.client_tier_assignments USING btree (previous_tier_id)                                                                                                                           |
| public     | client_tier_assignments   | idx_client_tier_assignments_public_id                      | CREATE INDEX idx_client_tier_assignments_public_id ON public.client_tier_assignments USING btree (public_id)                                                                                                                                         |
| public     | client_tier_assignments   | idx_client_tier_assignments_tenant_id                      | CREATE INDEX idx_client_tier_assignments_tenant_id ON public.client_tier_assignments USING btree (tenant_id)                                                                                                                                         |
| public     | client_tier_assignments   | idx_client_tier_assignments_tier_id                        | CREATE INDEX idx_client_tier_assignments_tier_id ON public.client_tier_assignments USING btree (tier_id)                                                                                                                                             |
| public     | client_types              | client_types_pkey                                          | CREATE UNIQUE INDEX client_types_pkey ON public.client_types USING btree (id)                                                                                                                                                                        |
| public     | client_types              | client_types_public_id_key                                 | CREATE UNIQUE INDEX client_types_public_id_key ON public.client_types USING btree (public_id)                                                                                                                                                        |
| public     | client_types              | client_types_tenant_code_unique                            | CREATE UNIQUE INDEX client_types_tenant_code_unique ON public.client_types USING btree (tenant_id, code)                                                                                                                                             |
| public     | client_types              | idx_client_types_category                                  | CREATE INDEX idx_client_types_category ON public.client_types USING btree (category)                                                                                                                                                                 |
| public     | client_types              | idx_client_types_characteristics_gin                       | CREATE INDEX idx_client_types_characteristics_gin ON public.client_types USING gin (characteristics)                                                                                                                                                 |
| public     | client_types              | idx_client_types_code                                      | CREATE INDEX idx_client_types_code ON public.client_types USING btree (code)                                                                                                                                                                         |
| public     | client_types              | idx_client_types_deleted_at                                | CREATE INDEX idx_client_types_deleted_at ON public.client_types USING btree (deleted_at)                                                                                                                                                             |
| public     | client_types              | idx_client_types_is_active                                 | CREATE INDEX idx_client_types_is_active ON public.client_types USING btree (is_active)                                                                                                                                                               |
| public     | client_types              | idx_client_types_kpi_targets_gin                           | CREATE INDEX idx_client_types_kpi_targets_gin ON public.client_types USING gin (kpi_targets)                                                                                                                                                         |
| public     | client_types              | idx_client_types_public_id                                 | CREATE INDEX idx_client_types_public_id ON public.client_types USING btree (public_id)                                                                                                                                                               |
| public     | client_types              | idx_client_types_requires_assessment                       | CREATE INDEX idx_client_types_requires_assessment ON public.client_types USING btree (requires_assessment)                                                                                                                                           |
| public     | client_types              | idx_client_types_requires_inventory                        | CREATE INDEX idx_client_types_requires_inventory ON public.client_types USING btree (requires_inventory)                                                                                                                                             |
| public     | client_types              | idx_client_types_sort_order                                | CREATE INDEX idx_client_types_sort_order ON public.client_types USING btree (tenant_id, sort_order)                                                                                                                                                  |
| public     | client_types              | idx_client_types_tenant_id                                 | CREATE INDEX idx_client_types_tenant_id ON public.client_types USING btree (tenant_id)                                                                                                                                                               |
| public     | clients                   | clients_pkey                                               | CREATE UNIQUE INDEX clients_pkey ON public.clients USING btree (id)                                                                                                                                                                                  |
| public     | clients                   | clients_public_id_key                                      | CREATE UNIQUE INDEX clients_public_id_key ON public.clients USING btree (public_id)                                                                                                                                                                  |
| public     | clients                   | idx_clients_address_city                                   | CREATE INDEX idx_clients_address_city ON public.clients USING btree (address_city)                                                                                                                                                                   |
| public     | clients                   | idx_clients_address_state                                  | CREATE INDEX idx_clients_address_state ON public.clients USING btree (address_state)                                                                                                                                                                 |
| public     | clients                   | idx_clients_business_name                                  | CREATE INDEX idx_clients_business_name ON public.clients USING btree (business_name)                                                                                                                                                                 |
| public     | clients                   | idx_clients_client_type_id                                 | CREATE INDEX idx_clients_client_type_id ON public.clients USING btree (client_type_id)                                                                                                                                                               |
| public     | clients                   | idx_clients_commercial_structure_id                        | CREATE INDEX idx_clients_commercial_structure_id ON public.clients USING btree (commercial_structure_id)                                                                                                                                             |
| public     | clients                   | idx_clients_coordinates_gist                               | CREATE INDEX idx_clients_coordinates_gist ON public.clients USING gist (coordinates)                                                                                                                                                                 |
| public     | clients                   | idx_clients_deleted_at                                     | CREATE INDEX idx_clients_deleted_at ON public.clients USING btree (deleted_at)                                                                                                                                                                       |
| public     | clients                   | idx_clients_email                                          | CREATE INDEX idx_clients_email ON public.clients USING btree (email)                                                                                                                                                                                 |
| public     | clients                   | idx_clients_last_visit_date                                | CREATE INDEX idx_clients_last_visit_date ON public.clients USING btree (last_visit_date)                                                                                                                                                             |
| public     | clients                   | idx_clients_market_id                                      | CREATE INDEX idx_clients_market_id ON public.clients USING btree (market_id)                                                                                                                                                                         |
| public     | clients                   | idx_clients_metadata_gin                                   | CREATE INDEX idx_clients_metadata_gin ON public.clients USING gin (metadata)                                                                                                                                                                         |
| public     | clients                   | idx_clients_public_id                                      | CREATE INDEX idx_clients_public_id ON public.clients USING btree (public_id)                                                                                                                                                                         |
| public     | clients                   | idx_clients_registration_date                              | CREATE INDEX idx_clients_registration_date ON public.clients USING btree (registration_date)                                                                                                                                                         |
| public     | clients                   | idx_clients_status                                         | CREATE INDEX idx_clients_status ON public.clients USING btree (status)                                                                                                                                                                               |
| public     | clients                   | idx_clients_tenant_id                                      | CREATE INDEX idx_clients_tenant_id ON public.clients USING btree (tenant_id)                                                                                                                                                                         |
| public     | clients                   | idx_clients_user_id                                        | CREATE INDEX idx_clients_user_id ON public.clients USING btree (user_id)                                                                                                                                                                             |
| public     | clients                   | idx_clients_zone_id                                        | CREATE INDEX idx_clients_zone_id ON public.clients USING btree (zone_id)                                                                                                                                                                             |
| public     | commercial_structures     | commercial_structures_pkey                                 | CREATE UNIQUE INDEX commercial_structures_pkey ON public.commercial_structures USING btree (id)                                                                                                                                                      |
| public     | commercial_structures     | commercial_structures_public_id_key                        | CREATE UNIQUE INDEX commercial_structures_public_id_key ON public.commercial_structures USING btree (public_id)                                                                                                                                      |
| public     | commercial_structures     | commercial_structures_tenant_code_unique                   | CREATE UNIQUE INDEX commercial_structures_tenant_code_unique ON public.commercial_structures USING btree (tenant_id, code)                                                                                                                           |
| public     | commercial_structures     | idx_commercial_structures_code                             | CREATE INDEX idx_commercial_structures_code ON public.commercial_structures USING btree (code)                                                                                                                                                       |
| public     | commercial_structures     | idx_commercial_structures_commission_structure_gin         | CREATE INDEX idx_commercial_structures_commission_structure_gin ON public.commercial_structures USING gin (commission_structure)                                                                                                                     |
| public     | commercial_structures     | idx_commercial_structures_coverage_zones_gin               | CREATE INDEX idx_commercial_structures_coverage_zones_gin ON public.commercial_structures USING gin (coverage_zones)                                                                                                                                 |
| public     | commercial_structures     | idx_commercial_structures_deleted_at                       | CREATE INDEX idx_commercial_structures_deleted_at ON public.commercial_structures USING btree (deleted_at)                                                                                                                                           |
| public     | commercial_structures     | idx_commercial_structures_is_active                        | CREATE INDEX idx_commercial_structures_is_active ON public.commercial_structures USING btree (is_active)                                                                                                                                             |
| public     | commercial_structures     | idx_commercial_structures_public_id                        | CREATE INDEX idx_commercial_structures_public_id ON public.commercial_structures USING btree (public_id)                                                                                                                                             |
| public     | commercial_structures     | idx_commercial_structures_sort_order                       | CREATE INDEX idx_commercial_structures_sort_order ON public.commercial_structures USING btree (tenant_id, sort_order)                                                                                                                                |
| public     | commercial_structures     | idx_commercial_structures_structure_type                   | CREATE INDEX idx_commercial_structures_structure_type ON public.commercial_structures USING btree (structure_type)                                                                                                                                   |
| public     | commercial_structures     | idx_commercial_structures_supported_markets_gin            | CREATE INDEX idx_commercial_structures_supported_markets_gin ON public.commercial_structures USING gin (supported_markets)                                                                                                                           |
| public     | commercial_structures     | idx_commercial_structures_tenant_id                        | CREATE INDEX idx_commercial_structures_tenant_id ON public.commercial_structures USING btree (tenant_id)                                                                                                                                             |
| public     | markets                   | idx_markets_characteristics_gin                            | CREATE INDEX idx_markets_characteristics_gin ON public.markets USING gin (characteristics)                                                                                                                                                           |
| public     | markets                   | idx_markets_code                                           | CREATE INDEX idx_markets_code ON public.markets USING btree (code)                                                                                                                                                                                   |
| public     | markets                   | idx_markets_deleted_at                                     | CREATE INDEX idx_markets_deleted_at ON public.markets USING btree (deleted_at)                                                                                                                                                                       |
| public     | markets                   | idx_markets_is_active                                      | CREATE INDEX idx_markets_is_active ON public.markets USING btree (is_active)                                                                                                                                                                         |
| public     | markets                   | idx_markets_public_id                                      | CREATE INDEX idx_markets_public_id ON public.markets USING btree (public_id)                                                                                                                                                                         |
| public     | markets                   | idx_markets_sort_order                                     | CREATE INDEX idx_markets_sort_order ON public.markets USING btree (tenant_id, sort_order)                                                                                                                                                            |
| public     | markets                   | idx_markets_tenant_id                                      | CREATE INDEX idx_markets_tenant_id ON public.markets USING btree (tenant_id)                                                                                                                                                                         |
| public     | markets                   | markets_pkey                                               | CREATE UNIQUE INDEX markets_pkey ON public.markets USING btree (id)                                                                                                                                                                                  |
| public     | markets                   | markets_public_id_key                                      | CREATE UNIQUE INDEX markets_public_id_key ON public.markets USING btree (public_id)                                                                                                                                                                  |
| public     | markets                   | markets_tenant_code_unique                                 | CREATE UNIQUE INDEX markets_tenant_code_unique ON public.markets USING btree (tenant_id, code)                                                                                                                                                       |
| public     | order_items               | idx_order_items_deleted_at                                 | CREATE INDEX idx_order_items_deleted_at ON public.order_items USING btree (deleted_at) WHERE (deleted_at IS NOT NULL)                                                                                                                                |
| public     | order_items               | idx_order_items_free_items                                 | CREATE INDEX idx_order_items_free_items ON public.order_items USING btree (order_id) WHERE ((deleted_at IS NULL) AND (free_item = true))                                                                                                             |
| public     | order_items               | idx_order_items_metadata                                   | CREATE INDEX idx_order_items_metadata ON public.order_items USING gin (metadata)                                                                                                                                                                     |
| public     | order_items               | idx_order_items_order_id                                   | CREATE INDEX idx_order_items_order_id ON public.order_items USING btree (order_id) WHERE (deleted_at IS NULL)                                                                                                                                        |
| public     | order_items               | idx_order_items_order_line_unique                          | CREATE UNIQUE INDEX idx_order_items_order_line_unique ON public.order_items USING btree (order_id, line_number) WHERE (deleted_at IS NULL)                                                                                                           |
| public     | order_items               | idx_order_items_product_id                                 | CREATE INDEX idx_order_items_product_id ON public.order_items USING btree (product_id) WHERE (deleted_at IS NULL)                                                                                                                                    |
| public     | order_items               | idx_order_items_product_variant_id                         | CREATE INDEX idx_order_items_product_variant_id ON public.order_items USING btree (product_variant_id) WHERE ((deleted_at IS NULL) AND (product_variant_id IS NOT NULL))                                                                             |
| public     | order_items               | idx_order_items_promotions                                 | CREATE INDEX idx_order_items_promotions ON public.order_items USING btree (order_id) WHERE ((deleted_at IS NULL) AND (promotion_applied = true))                                                                                                     |
| public     | order_items               | idx_order_items_public_id                                  | CREATE INDEX idx_order_items_public_id ON public.order_items USING btree (public_id)                                                                                                                                                                 |
| public     | order_items               | idx_order_items_returns                                    | CREATE INDEX idx_order_items_returns ON public.order_items USING btree (order_id) WHERE ((deleted_at IS NULL) AND (returned_quantity > 0))                                                                                                           |
| public     | order_items               | idx_order_items_status                                     | CREATE INDEX idx_order_items_status ON public.order_items USING btree (item_status) WHERE (deleted_at IS NULL)                                                                                                                                       |
| public     | order_items               | idx_order_items_substitutions                              | CREATE INDEX idx_order_items_substitutions ON public.order_items USING btree (substitute_product_id) WHERE ((deleted_at IS NULL) AND (substitute_product_id IS NOT NULL))                                                                            |
| public     | order_items               | idx_order_items_tenant_id                                  | CREATE INDEX idx_order_items_tenant_id ON public.order_items USING btree (tenant_id) WHERE (deleted_at IS NULL)                                                                                                                                      |
| public     | order_items               | order_items_pkey                                           | CREATE UNIQUE INDEX order_items_pkey ON public.order_items USING btree (id)                                                                                                                                                                          |
| public     | order_items               | order_items_public_id_key                                  | CREATE UNIQUE INDEX order_items_public_id_key ON public.order_items USING btree (public_id)                                                                                                                                                          |
| public     | orders                    | idx_orders_actual_delivery_date                            | CREATE INDEX idx_orders_actual_delivery_date ON public.orders USING btree (actual_delivery_date)                                                                                                                                                     |
| public     | orders                    | idx_orders_assigned_to                                     | CREATE INDEX idx_orders_assigned_to ON public.orders USING btree (assigned_to)                                                                                                                                                                       |
| public     | orders                    | idx_orders_brand_id                                        | CREATE INDEX idx_orders_brand_id ON public.orders USING btree (brand_id)                                                                                                                                                                             |
| public     | orders                    | idx_orders_cancelled_by                                    | CREATE INDEX idx_orders_cancelled_by ON public.orders USING btree (cancelled_by)                                                                                                                                                                     |
| public     | orders                    | idx_orders_client_id                                       | CREATE INDEX idx_orders_client_id ON public.orders USING btree (client_id)                                                                                                                                                                           |
| public     | orders                    | idx_orders_client_invoice_data_id                          | CREATE INDEX idx_orders_client_invoice_data_id ON public.orders USING btree (client_invoice_data_id)                                                                                                                                                 |
| public     | orders                    | idx_orders_commercial_structure_id                         | CREATE INDEX idx_orders_commercial_structure_id ON public.orders USING btree (commercial_structure_id)                                                                                                                                               |
| public     | orders                    | idx_orders_confirmed_delivery_date                         | CREATE INDEX idx_orders_confirmed_delivery_date ON public.orders USING btree (confirmed_delivery_date)                                                                                                                                               |
| public     | orders                    | idx_orders_created_at                                      | CREATE INDEX idx_orders_created_at ON public.orders USING btree (created_at)                                                                                                                                                                         |
| public     | orders                    | idx_orders_deleted_at                                      | CREATE INDEX idx_orders_deleted_at ON public.orders USING btree (deleted_at)                                                                                                                                                                         |
| public     | orders                    | idx_orders_delivery_confirmation_gin                       | CREATE INDEX idx_orders_delivery_confirmation_gin ON public.orders USING gin (delivery_confirmation)                                                                                                                                                 |
| public     | orders                    | idx_orders_invoice_required                                | CREATE INDEX idx_orders_invoice_required ON public.orders USING btree (invoice_required)                                                                                                                                                             |
| public     | orders                    | idx_orders_metadata_gin                                    | CREATE INDEX idx_orders_metadata_gin ON public.orders USING gin (metadata)                                                                                                                                                                           |
| public     | orders                    | idx_orders_order_attachments_gin                           | CREATE INDEX idx_orders_order_attachments_gin ON public.orders USING gin (order_attachments)                                                                                                                                                         |
| public     | orders                    | idx_orders_order_date                                      | CREATE INDEX idx_orders_order_date ON public.orders USING btree (order_date)                                                                                                                                                                         |
| public     | orders                    | idx_orders_order_number                                    | CREATE INDEX idx_orders_order_number ON public.orders USING btree (order_number)                                                                                                                                                                     |
| public     | orders                    | idx_orders_order_status                                    | CREATE INDEX idx_orders_order_status ON public.orders USING btree (order_status)                                                                                                                                                                     |
| public     | orders                    | idx_orders_order_type                                      | CREATE INDEX idx_orders_order_type ON public.orders USING btree (order_type)                                                                                                                                                                         |
| public     | orders                    | idx_orders_payment_method                                  | CREATE INDEX idx_orders_payment_method ON public.orders USING btree (payment_method)                                                                                                                                                                 |
| public     | orders                    | idx_orders_payment_status                                  | CREATE INDEX idx_orders_payment_status ON public.orders USING btree (payment_status)                                                                                                                                                                 |
| public     | orders                    | idx_orders_priority                                        | CREATE INDEX idx_orders_priority ON public.orders USING btree (priority)                                                                                                                                                                             |
| public     | orders                    | idx_orders_public_id                                       | CREATE INDEX idx_orders_public_id ON public.orders USING btree (public_id)                                                                                                                                                                           |
| public     | orders                    | idx_orders_requested_delivery_date                         | CREATE INDEX idx_orders_requested_delivery_date ON public.orders USING btree (requested_delivery_date)                                                                                                                                               |
| public     | orders                    | idx_orders_source_channel                                  | CREATE INDEX idx_orders_source_channel ON public.orders USING btree (source_channel)                                                                                                                                                                 |
| public     | orders                    | idx_orders_tenant_id                                       | CREATE INDEX idx_orders_tenant_id ON public.orders USING btree (tenant_id)                                                                                                                                                                           |
| public     | orders                    | idx_orders_tracking_number                                 | CREATE INDEX idx_orders_tracking_number ON public.orders USING btree (tracking_number)                                                                                                                                                               |
| public     | orders                    | orders_order_number_key                                    | CREATE UNIQUE INDEX orders_order_number_key ON public.orders USING btree (order_number)                                                                                                                                                              |
| public     | orders                    | orders_pkey                                                | CREATE UNIQUE INDEX orders_pkey ON public.orders USING btree (id)                                                                                                                                                                                    |
| public     | orders                    | orders_public_id_key                                       | CREATE UNIQUE INDEX orders_public_id_key ON public.orders USING btree (public_id)                                                                                                                                                                    |
| public     | points_transactions       | idx_points_transactions_approval_required                  | CREATE INDEX idx_points_transactions_approval_required ON public.points_transactions USING btree (approval_required)                                                                                                                                 |
| public     | points_transactions       | idx_points_transactions_approved_by                        | CREATE INDEX idx_points_transactions_approved_by ON public.points_transactions USING btree (approved_by)                                                                                                                                             |
| public     | points_transactions       | idx_points_transactions_balance_calc                       | CREATE INDEX idx_points_transactions_balance_calc ON public.points_transactions USING btree (client_brand_membership_id, created_at)                                                                                                                 |
| public     | points_transactions       | idx_points_transactions_campaign_id                        | CREATE INDEX idx_points_transactions_campaign_id ON public.points_transactions USING btree (campaign_id)                                                                                                                                             |
| public     | points_transactions       | idx_points_transactions_client_brand_membership_id         | CREATE INDEX idx_points_transactions_client_brand_membership_id ON public.points_transactions USING btree (client_brand_membership_id)                                                                                                               |
| public     | points_transactions       | idx_points_transactions_created_at                         | CREATE INDEX idx_points_transactions_created_at ON public.points_transactions USING btree (created_at)                                                                                                                                               |
| public     | points_transactions       | idx_points_transactions_deleted_at                         | CREATE INDEX idx_points_transactions_deleted_at ON public.points_transactions USING btree (deleted_at)                                                                                                                                               |
| public     | points_transactions       | idx_points_transactions_expiration_date                    | CREATE INDEX idx_points_transactions_expiration_date ON public.points_transactions USING btree (expiration_date)                                                                                                                                     |
| public     | points_transactions       | idx_points_transactions_is_expired                         | CREATE INDEX idx_points_transactions_is_expired ON public.points_transactions USING btree (is_expired)                                                                                                                                               |
| public     | points_transactions       | idx_points_transactions_membership_date                    | CREATE INDEX idx_points_transactions_membership_date ON public.points_transactions USING btree (client_brand_membership_id, transaction_date DESC)                                                                                                   |
| public     | points_transactions       | idx_points_transactions_metadata_gin                       | CREATE INDEX idx_points_transactions_metadata_gin ON public.points_transactions USING gin (metadata)                                                                                                                                                 |
| public     | points_transactions       | idx_points_transactions_processed_by                       | CREATE INDEX idx_points_transactions_processed_by ON public.points_transactions USING btree (processed_by)                                                                                                                                           |
| public     | points_transactions       | idx_points_transactions_promotion_id                       | CREATE INDEX idx_points_transactions_promotion_id ON public.points_transactions USING btree (promotion_id)                                                                                                                                           |
| public     | points_transactions       | idx_points_transactions_public_id                          | CREATE INDEX idx_points_transactions_public_id ON public.points_transactions USING btree (public_id)                                                                                                                                                 |
| public     | points_transactions       | idx_points_transactions_reversal_of                        | CREATE INDEX idx_points_transactions_reversal_of ON public.points_transactions USING btree (reversal_of)                                                                                                                                             |
| public     | points_transactions       | idx_points_transactions_reversed_by                        | CREATE INDEX idx_points_transactions_reversed_by ON public.points_transactions USING btree (reversed_by)                                                                                                                                             |
| public     | points_transactions       | idx_points_transactions_source_type                        | CREATE INDEX idx_points_transactions_source_type ON public.points_transactions USING btree (source_type)                                                                                                                                             |
| public     | points_transactions       | idx_points_transactions_tenant_id                          | CREATE INDEX idx_points_transactions_tenant_id ON public.points_transactions USING btree (tenant_id)                                                                                                                                                 |
| public     | points_transactions       | idx_points_transactions_transaction_date                   | CREATE INDEX idx_points_transactions_transaction_date ON public.points_transactions USING btree (transaction_date)                                                                                                                                   |
| public     | points_transactions       | idx_points_transactions_transaction_type                   | CREATE INDEX idx_points_transactions_transaction_type ON public.points_transactions USING btree (transaction_type)                                                                                                                                   |
| public     | points_transactions       | points_transactions_pkey                                   | CREATE UNIQUE INDEX points_transactions_pkey ON public.points_transactions USING btree (id)                                                                                                                                                          |
| public     | points_transactions       | points_transactions_public_id_key                          | CREATE UNIQUE INDEX points_transactions_public_id_key ON public.points_transactions USING btree (public_id)                                                                                                                                          |
| public     | product_categories        | idx_product_categories_brand_id                            | CREATE INDEX idx_product_categories_brand_id ON public.product_categories USING btree (brand_id)                                                                                                                                                     |
| public     | product_categories        | idx_product_categories_category_level                      | CREATE INDEX idx_product_categories_category_level ON public.product_categories USING btree (category_level)                                                                                                                                         |
| public     | product_categories        | idx_product_categories_characteristics_gin                 | CREATE INDEX idx_product_categories_characteristics_gin ON public.product_categories USING gin (characteristics)                                                                                                                                     |
| public     | product_categories        | idx_product_categories_code                                | CREATE INDEX idx_product_categories_code ON public.product_categories USING btree (code)                                                                                                                                                             |
| public     | product_categories        | idx_product_categories_deleted_at                          | CREATE INDEX idx_product_categories_deleted_at ON public.product_categories USING btree (deleted_at)                                                                                                                                                 |
| public     | product_categories        | idx_product_categories_is_active                           | CREATE INDEX idx_product_categories_is_active ON public.product_categories USING btree (is_active)                                                                                                                                                   |
| public     | product_categories        | idx_product_categories_parent_category_id                  | CREATE INDEX idx_product_categories_parent_category_id ON public.product_categories USING btree (parent_category_id)                                                                                                                                 |
| public     | product_categories        | idx_product_categories_public_id                           | CREATE INDEX idx_product_categories_public_id ON public.product_categories USING btree (public_id)                                                                                                                                                   |
| public     | product_categories        | idx_product_categories_sort_order                          | CREATE INDEX idx_product_categories_sort_order ON public.product_categories USING btree (tenant_id, brand_id, sort_order)                                                                                                                            |
| public     | product_categories        | idx_product_categories_tenant_id                           | CREATE INDEX idx_product_categories_tenant_id ON public.product_categories USING btree (tenant_id)                                                                                                                                                   |
| public     | product_categories        | product_categories_pkey                                    | CREATE UNIQUE INDEX product_categories_pkey ON public.product_categories USING btree (id)                                                                                                                                                            |
| public     | product_categories        | product_categories_public_id_key                           | CREATE UNIQUE INDEX product_categories_public_id_key ON public.product_categories USING btree (public_id)                                                                                                                                            |
| public     | product_categories        | product_categories_tenant_brand_code_unique                | CREATE UNIQUE INDEX product_categories_tenant_brand_code_unique ON public.product_categories USING btree (tenant_id, brand_id, code)                                                                                                                 |
| public     | product_variants          | idx_product_variants_barcode                               | CREATE INDEX idx_product_variants_barcode ON public.product_variants USING btree (barcode)                                                                                                                                                           |
| public     | product_variants          | idx_product_variants_case_dimensions_gin                   | CREATE INDEX idx_product_variants_case_dimensions_gin ON public.product_variants USING gin (case_dimensions)                                                                                                                                         |
| public     | product_variants          | idx_product_variants_deleted_at                            | CREATE INDEX idx_product_variants_deleted_at ON public.product_variants USING btree (deleted_at)                                                                                                                                                     |
| public     | product_variants          | idx_product_variants_dimensions_gin                        | CREATE INDEX idx_product_variants_dimensions_gin ON public.product_variants USING gin (dimensions)                                                                                                                                                   |
| public     | product_variants          | idx_product_variants_discontinue_date                      | CREATE INDEX idx_product_variants_discontinue_date ON public.product_variants USING btree (discontinue_date)                                                                                                                                         |
| public     | product_variants          | idx_product_variants_is_active                             | CREATE INDEX idx_product_variants_is_active ON public.product_variants USING btree (is_active)                                                                                                                                                       |
| public     | product_variants          | idx_product_variants_is_default                            | CREATE INDEX idx_product_variants_is_default ON public.product_variants USING btree (is_default)                                                                                                                                                     |
| public     | product_variants          | idx_product_variants_launch_date                           | CREATE INDEX idx_product_variants_launch_date ON public.product_variants USING btree (launch_date)                                                                                                                                                   |
| public     | product_variants          | idx_product_variants_product_id                            | CREATE INDEX idx_product_variants_product_id ON public.product_variants USING btree (product_id)                                                                                                                                                     |
| public     | product_variants          | idx_product_variants_public_id                             | CREATE INDEX idx_product_variants_public_id ON public.product_variants USING btree (public_id)                                                                                                                                                       |
| public     | product_variants          | idx_product_variants_size_unit                             | CREATE INDEX idx_product_variants_size_unit ON public.product_variants USING btree (size_unit)                                                                                                                                                       |
| public     | product_variants          | idx_product_variants_size_value                            | CREATE INDEX idx_product_variants_size_value ON public.product_variants USING btree (size_value)                                                                                                                                                     |
| public     | product_variants          | idx_product_variants_sort_order                            | CREATE INDEX idx_product_variants_sort_order ON public.product_variants USING btree (product_id, sort_order)                                                                                                                                         |
| public     | product_variants          | idx_product_variants_tenant_id                             | CREATE INDEX idx_product_variants_tenant_id ON public.product_variants USING btree (tenant_id)                                                                                                                                                       |
| public     | product_variants          | idx_product_variants_variant_code                          | CREATE INDEX idx_product_variants_variant_code ON public.product_variants USING btree (variant_code)                                                                                                                                                 |
| public     | product_variants          | product_variants_pkey                                      | CREATE UNIQUE INDEX product_variants_pkey ON public.product_variants USING btree (id)                                                                                                                                                                |
| public     | product_variants          | product_variants_public_id_key                             | CREATE UNIQUE INDEX product_variants_public_id_key ON public.product_variants USING btree (public_id)                                                                                                                                                |
| public     | product_variants          | product_variants_tenant_product_code_unique                | CREATE UNIQUE INDEX product_variants_tenant_product_code_unique ON public.product_variants USING btree (tenant_id, product_id, variant_code)                                                                                                         |
| public     | products                  | idx_products_barcode                                       | CREATE INDEX idx_products_barcode ON public.products USING btree (barcode)                                                                                                                                                                           |
| public     | products                  | idx_products_brand_id                                      | CREATE INDEX idx_products_brand_id ON public.products USING btree (brand_id)                                                                                                                                                                         |
| public     | products                  | idx_products_category_id                                   | CREATE INDEX idx_products_category_id ON public.products USING btree (category_id)                                                                                                                                                                   |
| public     | products                  | idx_products_code                                          | CREATE INDEX idx_products_code ON public.products USING btree (code)                                                                                                                                                                                 |
| public     | products                  | idx_products_deleted_at                                    | CREATE INDEX idx_products_deleted_at ON public.products USING btree (deleted_at)                                                                                                                                                                     |
| public     | products                  | idx_products_dimensions_gin                                | CREATE INDEX idx_products_dimensions_gin ON public.products USING gin (dimensions)                                                                                                                                                                   |
| public     | products                  | idx_products_discontinue_date                              | CREATE INDEX idx_products_discontinue_date ON public.products USING btree (discontinue_date)                                                                                                                                                         |
| public     | products                  | idx_products_gallery_urls_gin                              | CREATE INDEX idx_products_gallery_urls_gin ON public.products USING gin (gallery_urls)                                                                                                                                                               |
| public     | products                  | idx_products_is_active                                     | CREATE INDEX idx_products_is_active ON public.products USING btree (is_active)                                                                                                                                                                       |
| public     | products                  | idx_products_is_featured                                   | CREATE INDEX idx_products_is_featured ON public.products USING btree (is_featured)                                                                                                                                                                   |
| public     | products                  | idx_products_launch_date                                   | CREATE INDEX idx_products_launch_date ON public.products USING btree (launch_date)                                                                                                                                                                   |
| public     | products                  | idx_products_marketing_tags_gin                            | CREATE INDEX idx_products_marketing_tags_gin ON public.products USING gin (marketing_tags)                                                                                                                                                           |
| public     | products                  | idx_products_name                                          | CREATE INDEX idx_products_name ON public.products USING btree (name)                                                                                                                                                                                 |
| public     | products                  | idx_products_public_id                                     | CREATE INDEX idx_products_public_id ON public.products USING btree (public_id)                                                                                                                                                                       |
| public     | products                  | idx_products_sort_order                                    | CREATE INDEX idx_products_sort_order ON public.products USING btree (tenant_id, brand_id, sort_order)                                                                                                                                                |
| public     | products                  | idx_products_specifications_gin                            | CREATE INDEX idx_products_specifications_gin ON public.products USING gin (specifications)                                                                                                                                                           |
| public     | products                  | idx_products_tenant_id                                     | CREATE INDEX idx_products_tenant_id ON public.products USING btree (tenant_id)                                                                                                                                                                       |
| public     | products                  | products_pkey                                              | CREATE UNIQUE INDEX products_pkey ON public.products USING btree (id)                                                                                                                                                                                |
| public     | products                  | products_public_id_key                                     | CREATE UNIQUE INDEX products_public_id_key ON public.products USING btree (public_id)                                                                                                                                                                |
| public     | products                  | products_tenant_brand_code_unique                          | CREATE UNIQUE INDEX products_tenant_brand_code_unique ON public.products USING btree (tenant_id, brand_id, code)                                                                                                                                     |
| public     | promotion_redemptions     | idx_promotion_redemptions_applied_by                       | CREATE INDEX idx_promotion_redemptions_applied_by ON public.promotion_redemptions USING btree (applied_by)                                                                                                                                           |
| public     | promotion_redemptions     | idx_promotion_redemptions_auto_applied                     | CREATE INDEX idx_promotion_redemptions_auto_applied ON public.promotion_redemptions USING btree (auto_applied)                                                                                                                                       |
| public     | promotion_redemptions     | idx_promotion_redemptions_client_brand_membership_id       | CREATE INDEX idx_promotion_redemptions_client_brand_membership_id ON public.promotion_redemptions USING btree (client_brand_membership_id)                                                                                                           |
| public     | promotion_redemptions     | idx_promotion_redemptions_client_notification_sent         | CREATE INDEX idx_promotion_redemptions_client_notification_sent ON public.promotion_redemptions USING btree (client_notification_sent)                                                                                                               |
| public     | promotion_redemptions     | idx_promotion_redemptions_created_at                       | CREATE INDEX idx_promotion_redemptions_created_at ON public.promotion_redemptions USING btree (created_at)                                                                                                                                           |
| public     | promotion_redemptions     | idx_promotion_redemptions_deleted_at                       | CREATE INDEX idx_promotion_redemptions_deleted_at ON public.promotion_redemptions USING btree (deleted_at)                                                                                                                                           |
| public     | promotion_redemptions     | idx_promotion_redemptions_metadata_gin                     | CREATE INDEX idx_promotion_redemptions_metadata_gin ON public.promotion_redemptions USING gin (metadata)                                                                                                                                             |
| public     | promotion_redemptions     | idx_promotion_redemptions_order_type_id                    | CREATE INDEX idx_promotion_redemptions_order_type_id ON public.promotion_redemptions USING btree (order_type, order_id)                                                                                                                              |
| public     | promotion_redemptions     | idx_promotion_redemptions_promotion_id                     | CREATE INDEX idx_promotion_redemptions_promotion_id ON public.promotion_redemptions USING btree (promotion_id)                                                                                                                                       |
| public     | promotion_redemptions     | idx_promotion_redemptions_promotion_type_applied           | CREATE INDEX idx_promotion_redemptions_promotion_type_applied ON public.promotion_redemptions USING btree (promotion_type_applied)                                                                                                                   |
| public     | promotion_redemptions     | idx_promotion_redemptions_public_id                        | CREATE INDEX idx_promotion_redemptions_public_id ON public.promotion_redemptions USING btree (public_id)                                                                                                                                             |
| public     | promotion_redemptions     | idx_promotion_redemptions_redemption_date                  | CREATE INDEX idx_promotion_redemptions_redemption_date ON public.promotion_redemptions USING btree (redemption_date)                                                                                                                                 |
| public     | promotion_redemptions     | idx_promotion_redemptions_redemption_status                | CREATE INDEX idx_promotion_redemptions_redemption_status ON public.promotion_redemptions USING btree (redemption_status)                                                                                                                             |
| public     | promotion_redemptions     | idx_promotion_redemptions_reversed_by                      | CREATE INDEX idx_promotion_redemptions_reversed_by ON public.promotion_redemptions USING btree (reversed_by)                                                                                                                                         |
| public     | promotion_redemptions     | idx_promotion_redemptions_rules_validation_gin             | CREATE INDEX idx_promotion_redemptions_rules_validation_gin ON public.promotion_redemptions USING gin (rules_validation)                                                                                                                             |
| public     | promotion_redemptions     | idx_promotion_redemptions_tenant_id                        | CREATE INDEX idx_promotion_redemptions_tenant_id ON public.promotion_redemptions USING btree (tenant_id)                                                                                                                                             |
| public     | promotion_redemptions     | idx_promotion_redemptions_validated_by                     | CREATE INDEX idx_promotion_redemptions_validated_by ON public.promotion_redemptions USING btree (validated_by)                                                                                                                                       |
| public     | promotion_redemptions     | idx_promotion_redemptions_validation_required              | CREATE INDEX idx_promotion_redemptions_validation_required ON public.promotion_redemptions USING btree (validation_required)                                                                                                                         |
| public     | promotion_redemptions     | promotion_redemptions_pkey                                 | CREATE UNIQUE INDEX promotion_redemptions_pkey ON public.promotion_redemptions USING btree (id)                                                                                                                                                      |
| public     | promotion_redemptions     | promotion_redemptions_public_id_key                        | CREATE UNIQUE INDEX promotion_redemptions_public_id_key ON public.promotion_redemptions USING btree (public_id)                                                                                                                                      |
| public     | promotion_rules           | idx_promotion_rules_apply_to_all                           | CREATE INDEX idx_promotion_rules_apply_to_all ON public.promotion_rules USING btree (apply_to_all)                                                                                                                                                   |
| public     | promotion_rules           | idx_promotion_rules_created_at                             | CREATE INDEX idx_promotion_rules_created_at ON public.promotion_rules USING btree (created_at)                                                                                                                                                       |
| public     | promotion_rules           | idx_promotion_rules_created_by                             | CREATE INDEX idx_promotion_rules_created_by ON public.promotion_rules USING btree (created_by)                                                                                                                                                       |
| public     | promotion_rules           | idx_promotion_rules_custom_conditions_gin                  | CREATE INDEX idx_promotion_rules_custom_conditions_gin ON public.promotion_rules USING gin (custom_conditions)                                                                                                                                       |
| public     | promotion_rules           | idx_promotion_rules_deleted_at                             | CREATE INDEX idx_promotion_rules_deleted_at ON public.promotion_rules USING btree (deleted_at)                                                                                                                                                       |
| public     | promotion_rules           | idx_promotion_rules_effective_from                         | CREATE INDEX idx_promotion_rules_effective_from ON public.promotion_rules USING btree (effective_from)                                                                                                                                               |
| public     | promotion_rules           | idx_promotion_rules_effective_until                        | CREATE INDEX idx_promotion_rules_effective_until ON public.promotion_rules USING btree (effective_until)                                                                                                                                             |
| public     | promotion_rules           | idx_promotion_rules_is_active                              | CREATE INDEX idx_promotion_rules_is_active ON public.promotion_rules USING btree (is_active)                                                                                                                                                         |
| public     | promotion_rules           | idx_promotion_rules_is_inclusion                           | CREATE INDEX idx_promotion_rules_is_inclusion ON public.promotion_rules USING btree (is_inclusion)                                                                                                                                                   |
| public     | promotion_rules           | idx_promotion_rules_priority                               | CREATE INDEX idx_promotion_rules_priority ON public.promotion_rules USING btree (priority)                                                                                                                                                           |
| public     | promotion_rules           | idx_promotion_rules_promotion_id                           | CREATE INDEX idx_promotion_rules_promotion_id ON public.promotion_rules USING btree (promotion_id)                                                                                                                                                   |
| public     | promotion_rules           | idx_promotion_rules_public_id                              | CREATE INDEX idx_promotion_rules_public_id ON public.promotion_rules USING btree (public_id)                                                                                                                                                         |
| public     | promotion_rules           | idx_promotion_rules_rule_type                              | CREATE INDEX idx_promotion_rules_rule_type ON public.promotion_rules USING btree (rule_type)                                                                                                                                                         |
| public     | promotion_rules           | idx_promotion_rules_target_categories_gin                  | CREATE INDEX idx_promotion_rules_target_categories_gin ON public.promotion_rules USING gin (target_categories)                                                                                                                                       |
| public     | promotion_rules           | idx_promotion_rules_target_client_types_gin                | CREATE INDEX idx_promotion_rules_target_client_types_gin ON public.promotion_rules USING gin (target_client_types)                                                                                                                                   |
| public     | promotion_rules           | idx_promotion_rules_target_clients_gin                     | CREATE INDEX idx_promotion_rules_target_clients_gin ON public.promotion_rules USING gin (target_clients)                                                                                                                                             |
| public     | promotion_rules           | idx_promotion_rules_target_commercial_structures_gin       | CREATE INDEX idx_promotion_rules_target_commercial_structures_gin ON public.promotion_rules USING gin (target_commercial_structures)                                                                                                                 |
| public     | promotion_rules           | idx_promotion_rules_target_markets_gin                     | CREATE INDEX idx_promotion_rules_target_markets_gin ON public.promotion_rules USING gin (target_markets)                                                                                                                                             |
| public     | promotion_rules           | idx_promotion_rules_target_products_gin                    | CREATE INDEX idx_promotion_rules_target_products_gin ON public.promotion_rules USING gin (target_products)                                                                                                                                           |
| public     | promotion_rules           | idx_promotion_rules_target_states_gin                      | CREATE INDEX idx_promotion_rules_target_states_gin ON public.promotion_rules USING gin (target_states)                                                                                                                                               |
| public     | promotion_rules           | idx_promotion_rules_target_tiers_gin                       | CREATE INDEX idx_promotion_rules_target_tiers_gin ON public.promotion_rules USING gin (target_tiers)                                                                                                                                                 |
| public     | promotion_rules           | idx_promotion_rules_target_zones_gin                       | CREATE INDEX idx_promotion_rules_target_zones_gin ON public.promotion_rules USING gin (target_zones)                                                                                                                                                 |
| public     | promotion_rules           | idx_promotion_rules_tenant_id                              | CREATE INDEX idx_promotion_rules_tenant_id ON public.promotion_rules USING btree (tenant_id)                                                                                                                                                         |
| public     | promotion_rules           | promotion_rules_pkey                                       | CREATE UNIQUE INDEX promotion_rules_pkey ON public.promotion_rules USING btree (id)                                                                                                                                                                  |
| public     | promotion_rules           | promotion_rules_public_id_key                              | CREATE UNIQUE INDEX promotion_rules_public_id_key ON public.promotion_rules USING btree (public_id)                                                                                                                                                  |
| public     | promotions                | idx_promotions_approved_by                                 | CREATE INDEX idx_promotions_approved_by ON public.promotions USING btree (approved_by)                                                                                                                                                               |
| public     | promotions                | idx_promotions_auto_apply                                  | CREATE INDEX idx_promotions_auto_apply ON public.promotions USING btree (auto_apply)                                                                                                                                                                 |
| public     | promotions                | idx_promotions_brand_id                                    | CREATE INDEX idx_promotions_brand_id ON public.promotions USING btree (brand_id)                                                                                                                                                                     |
| public     | promotions                | idx_promotions_campaign_id                                 | CREATE INDEX idx_promotions_campaign_id ON public.promotions USING btree (campaign_id)                                                                                                                                                               |
| public     | promotions                | idx_promotions_created_at                                  | CREATE INDEX idx_promotions_created_at ON public.promotions USING btree (created_at)                                                                                                                                                                 |
| public     | promotions                | idx_promotions_created_by                                  | CREATE INDEX idx_promotions_created_by ON public.promotions USING btree (created_by)                                                                                                                                                                 |
| public     | promotions                | idx_promotions_creative_assets_gin                         | CREATE INDEX idx_promotions_creative_assets_gin ON public.promotions USING gin (creative_assets)                                                                                                                                                     |
| public     | promotions                | idx_promotions_days_of_week_gin                            | CREATE INDEX idx_promotions_days_of_week_gin ON public.promotions USING gin (days_of_week)                                                                                                                                                           |
| public     | promotions                | idx_promotions_deleted_at                                  | CREATE INDEX idx_promotions_deleted_at ON public.promotions USING btree (deleted_at)                                                                                                                                                                 |
| public     | promotions                | idx_promotions_end_date                                    | CREATE INDEX idx_promotions_end_date ON public.promotions USING btree (end_date)                                                                                                                                                                     |
| public     | promotions                | idx_promotions_performance_metrics_gin                     | CREATE INDEX idx_promotions_performance_metrics_gin ON public.promotions USING gin (performance_metrics)                                                                                                                                             |
| public     | promotions                | idx_promotions_priority                                    | CREATE INDEX idx_promotions_priority ON public.promotions USING btree (priority)                                                                                                                                                                     |
| public     | promotions                | idx_promotions_promo_code                                  | CREATE INDEX idx_promotions_promo_code ON public.promotions USING btree (promo_code)                                                                                                                                                                 |
| public     | promotions                | idx_promotions_promotion_type                              | CREATE INDEX idx_promotions_promotion_type ON public.promotions USING btree (promotion_type)                                                                                                                                                         |
| public     | promotions                | idx_promotions_public_id                                   | CREATE INDEX idx_promotions_public_id ON public.promotions USING btree (public_id)                                                                                                                                                                   |
| public     | promotions                | idx_promotions_requires_code                               | CREATE INDEX idx_promotions_requires_code ON public.promotions USING btree (requires_code)                                                                                                                                                           |
| public     | promotions                | idx_promotions_stackable                                   | CREATE INDEX idx_promotions_stackable ON public.promotions USING btree (stackable)                                                                                                                                                                   |
| public     | promotions                | idx_promotions_start_date                                  | CREATE INDEX idx_promotions_start_date ON public.promotions USING btree (start_date)                                                                                                                                                                 |
| public     | promotions                | idx_promotions_status                                      | CREATE INDEX idx_promotions_status ON public.promotions USING btree (status)                                                                                                                                                                         |
| public     | promotions                | idx_promotions_tenant_id                                   | CREATE INDEX idx_promotions_tenant_id ON public.promotions USING btree (tenant_id)                                                                                                                                                                   |
| public     | promotions                | idx_promotions_usage_count_total                           | CREATE INDEX idx_promotions_usage_count_total ON public.promotions USING btree (usage_count_total)                                                                                                                                                   |
| public     | promotions                | promotions_pkey                                            | CREATE UNIQUE INDEX promotions_pkey ON public.promotions USING btree (id)                                                                                                                                                                            |
| public     | promotions                | promotions_public_id_key                                   | CREATE UNIQUE INDEX promotions_public_id_key ON public.promotions USING btree (public_id)                                                                                                                                                            |
| public     | reward_redemptions        | idx_reward_redemptions_applied_to_order_id                 | CREATE INDEX idx_reward_redemptions_applied_to_order_id ON public.reward_redemptions USING btree (applied_to_order_id)                                                                                                                               |
| public     | reward_redemptions        | idx_reward_redemptions_cancelled_by                        | CREATE INDEX idx_reward_redemptions_cancelled_by ON public.reward_redemptions USING btree (cancelled_by)                                                                                                                                             |
| public     | reward_redemptions        | idx_reward_redemptions_client_brand_membership_id          | CREATE INDEX idx_reward_redemptions_client_brand_membership_id ON public.reward_redemptions USING btree (client_brand_membership_id)                                                                                                                 |
| public     | reward_redemptions        | idx_reward_redemptions_created_at                          | CREATE INDEX idx_reward_redemptions_created_at ON public.reward_redemptions USING btree (created_at)                                                                                                                                                 |
| public     | reward_redemptions        | idx_reward_redemptions_deleted_at                          | CREATE INDEX idx_reward_redemptions_deleted_at ON public.reward_redemptions USING btree (deleted_at)                                                                                                                                                 |
| public     | reward_redemptions        | idx_reward_redemptions_expiration_date                     | CREATE INDEX idx_reward_redemptions_expiration_date ON public.reward_redemptions USING btree (expiration_date)                                                                                                                                       |
| public     | reward_redemptions        | idx_reward_redemptions_metadata_gin                        | CREATE INDEX idx_reward_redemptions_metadata_gin ON public.reward_redemptions USING gin (metadata)                                                                                                                                                   |
| public     | reward_redemptions        | idx_reward_redemptions_notification_sent                   | CREATE INDEX idx_reward_redemptions_notification_sent ON public.reward_redemptions USING btree (notification_sent)                                                                                                                                   |
| public     | reward_redemptions        | idx_reward_redemptions_points_transaction_id               | CREATE INDEX idx_reward_redemptions_points_transaction_id ON public.reward_redemptions USING btree (points_transaction_id)                                                                                                                           |
| public     | reward_redemptions        | idx_reward_redemptions_public_id                           | CREATE INDEX idx_reward_redemptions_public_id ON public.reward_redemptions USING btree (public_id)                                                                                                                                                   |
| public     | reward_redemptions        | idx_reward_redemptions_redeemed_by                         | CREATE INDEX idx_reward_redemptions_redeemed_by ON public.reward_redemptions USING btree (redeemed_by)                                                                                                                                               |
| public     | reward_redemptions        | idx_reward_redemptions_redemption_code                     | CREATE INDEX idx_reward_redemptions_redemption_code ON public.reward_redemptions USING btree (redemption_code)                                                                                                                                       |
| public     | reward_redemptions        | idx_reward_redemptions_redemption_date                     | CREATE INDEX idx_reward_redemptions_redemption_date ON public.reward_redemptions USING btree (redemption_date)                                                                                                                                       |
| public     | reward_redemptions        | idx_reward_redemptions_redemption_status                   | CREATE INDEX idx_reward_redemptions_redemption_status ON public.reward_redemptions USING btree (redemption_status)                                                                                                                                   |
| public     | reward_redemptions        | idx_reward_redemptions_refund_transaction_id               | CREATE INDEX idx_reward_redemptions_refund_transaction_id ON public.reward_redemptions USING btree (refund_transaction_id)                                                                                                                           |
| public     | reward_redemptions        | idx_reward_redemptions_reward_id                           | CREATE INDEX idx_reward_redemptions_reward_id ON public.reward_redemptions USING btree (reward_id)                                                                                                                                                   |
| public     | reward_redemptions        | idx_reward_redemptions_tenant_id                           | CREATE INDEX idx_reward_redemptions_tenant_id ON public.reward_redemptions USING btree (tenant_id)                                                                                                                                                   |
| public     | reward_redemptions        | idx_reward_redemptions_used_date                           | CREATE INDEX idx_reward_redemptions_used_date ON public.reward_redemptions USING btree (used_date)                                                                                                                                                   |
| public     | reward_redemptions        | idx_reward_redemptions_validated_by                        | CREATE INDEX idx_reward_redemptions_validated_by ON public.reward_redemptions USING btree (validated_by)                                                                                                                                             |
| public     | reward_redemptions        | reward_redemptions_pkey                                    | CREATE UNIQUE INDEX reward_redemptions_pkey ON public.reward_redemptions USING btree (id)                                                                                                                                                            |
| public     | reward_redemptions        | reward_redemptions_public_id_key                           | CREATE UNIQUE INDEX reward_redemptions_public_id_key ON public.reward_redemptions USING btree (public_id)                                                                                                                                            |
| public     | reward_redemptions        | reward_redemptions_redemption_code_key                     | CREATE UNIQUE INDEX reward_redemptions_redemption_code_key ON public.reward_redemptions USING btree (redemption_code)                                                                                                                                |
| public     | rewards                   | idx_rewards_applicable_categories_gin                      | CREATE INDEX idx_rewards_applicable_categories_gin ON public.rewards USING gin (applicable_categories)                                                                                                                                               |
| public     | rewards                   | idx_rewards_applicable_products_gin                        | CREATE INDEX idx_rewards_applicable_products_gin ON public.rewards USING gin (applicable_products)                                                                                                                                                   |
| public     | rewards                   | idx_rewards_auto_apply                                     | CREATE INDEX idx_rewards_auto_apply ON public.rewards USING btree (auto_apply)                                                                                                                                                                       |
| public     | rewards                   | idx_rewards_brand_id                                       | CREATE INDEX idx_rewards_brand_id ON public.rewards USING btree (brand_id)                                                                                                                                                                           |
| public     | rewards                   | idx_rewards_created_at                                     | CREATE INDEX idx_rewards_created_at ON public.rewards USING btree (created_at)                                                                                                                                                                       |
| public     | rewards                   | idx_rewards_deleted_at                                     | CREATE INDEX idx_rewards_deleted_at ON public.rewards USING btree (deleted_at)                                                                                                                                                                       |
| public     | rewards                   | idx_rewards_is_active                                      | CREATE INDEX idx_rewards_is_active ON public.rewards USING btree (is_active)                                                                                                                                                                         |
| public     | rewards                   | idx_rewards_is_featured                                    | CREATE INDEX idx_rewards_is_featured ON public.rewards USING btree (is_featured)                                                                                                                                                                     |
| public     | rewards                   | idx_rewards_points_cost                                    | CREATE INDEX idx_rewards_points_cost ON public.rewards USING btree (points_cost)                                                                                                                                                                     |
| public     | rewards                   | idx_rewards_product_id                                     | CREATE INDEX idx_rewards_product_id ON public.rewards USING btree (product_id)                                                                                                                                                                       |
| public     | rewards                   | idx_rewards_product_variant_id                             | CREATE INDEX idx_rewards_product_variant_id ON public.rewards USING btree (product_variant_id)                                                                                                                                                       |
| public     | rewards                   | idx_rewards_promotion_id                                   | CREATE INDEX idx_rewards_promotion_id ON public.rewards USING btree (promotion_id)                                                                                                                                                                   |
| public     | rewards                   | idx_rewards_public_id                                      | CREATE INDEX idx_rewards_public_id ON public.rewards USING btree (public_id)                                                                                                                                                                         |
| public     | rewards                   | idx_rewards_reward_type                                    | CREATE INDEX idx_rewards_reward_type ON public.rewards USING btree (reward_type)                                                                                                                                                                     |
| public     | rewards                   | idx_rewards_sort_order                                     | CREATE INDEX idx_rewards_sort_order ON public.rewards USING btree (sort_order)                                                                                                                                                                       |
| public     | rewards                   | idx_rewards_tenant_id                                      | CREATE INDEX idx_rewards_tenant_id ON public.rewards USING btree (tenant_id)                                                                                                                                                                         |
| public     | rewards                   | idx_rewards_tier_requirements_gin                          | CREATE INDEX idx_rewards_tier_requirements_gin ON public.rewards USING gin (tier_requirements)                                                                                                                                                       |
| public     | rewards                   | idx_rewards_usage_count_total                              | CREATE INDEX idx_rewards_usage_count_total ON public.rewards USING btree (usage_count_total)                                                                                                                                                         |
| public     | rewards                   | idx_rewards_valid_from                                     | CREATE INDEX idx_rewards_valid_from ON public.rewards USING btree (valid_from)                                                                                                                                                                       |
| public     | rewards                   | idx_rewards_valid_until                                    | CREATE INDEX idx_rewards_valid_until ON public.rewards USING btree (valid_until)                                                                                                                                                                     |
| public     | rewards                   | rewards_pkey                                               | CREATE UNIQUE INDEX rewards_pkey ON public.rewards USING btree (id)                                                                                                                                                                                  |
| public     | rewards                   | rewards_public_id_key                                      | CREATE UNIQUE INDEX rewards_public_id_key ON public.rewards USING btree (public_id)                                                                                                                                                                  |
| public     | tenants                   | idx_tenants_deleted_at                                     | CREATE INDEX idx_tenants_deleted_at ON public.tenants USING btree (deleted_at)                                                                                                                                                                       |
| public     | tenants                   | idx_tenants_public_id                                      | CREATE INDEX idx_tenants_public_id ON public.tenants USING btree (public_id)                                                                                                                                                                         |
| public     | tenants                   | idx_tenants_slug                                           | CREATE INDEX idx_tenants_slug ON public.tenants USING btree (slug)                                                                                                                                                                                   |
| public     | tenants                   | idx_tenants_status                                         | CREATE INDEX idx_tenants_status ON public.tenants USING btree (status)                                                                                                                                                                               |
| public     | tenants                   | tenants_pkey                                               | CREATE UNIQUE INDEX tenants_pkey ON public.tenants USING btree (id)                                                                                                                                                                                  |
| public     | tenants                   | tenants_public_id_key                                      | CREATE UNIQUE INDEX tenants_public_id_key ON public.tenants USING btree (public_id)                                                                                                                                                                  |
| public     | tenants                   | tenants_slug_key                                           | CREATE UNIQUE INDEX tenants_slug_key ON public.tenants USING btree (slug)                                                                                                                                                                            |
| public     | tiers                     | idx_tiers_auto_assignment_enabled                          | CREATE INDEX idx_tiers_auto_assignment_enabled ON public.tiers USING btree (auto_assignment_enabled)                                                                                                                                                 |
| public     | tiers                     | idx_tiers_auto_assignment_rules_gin                        | CREATE INDEX idx_tiers_auto_assignment_rules_gin ON public.tiers USING gin (auto_assignment_rules)                                                                                                                                                   |
| public     | tiers                     | idx_tiers_benefits_gin                                     | CREATE INDEX idx_tiers_benefits_gin ON public.tiers USING gin (benefits)                                                                                                                                                                             |
| public     | tiers                     | idx_tiers_brand_id                                         | CREATE INDEX idx_tiers_brand_id ON public.tiers USING btree (brand_id)                                                                                                                                                                               |
| public     | tiers                     | idx_tiers_code                                             | CREATE INDEX idx_tiers_code ON public.tiers USING btree (code)                                                                                                                                                                                       |
| public     | tiers                     | idx_tiers_deleted_at                                       | CREATE INDEX idx_tiers_deleted_at ON public.tiers USING btree (deleted_at)                                                                                                                                                                           |
| public     | tiers                     | idx_tiers_is_active                                        | CREATE INDEX idx_tiers_is_active ON public.tiers USING btree (is_active)                                                                                                                                                                             |
| public     | tiers                     | idx_tiers_is_default                                       | CREATE INDEX idx_tiers_is_default ON public.tiers USING btree (is_default)                                                                                                                                                                           |
| public     | tiers                     | idx_tiers_min_points_required                              | CREATE INDEX idx_tiers_min_points_required ON public.tiers USING btree (min_points_required)                                                                                                                                                         |
| public     | tiers                     | idx_tiers_public_id                                        | CREATE INDEX idx_tiers_public_id ON public.tiers USING btree (public_id)                                                                                                                                                                             |
| public     | tiers                     | idx_tiers_requirements_gin                                 | CREATE INDEX idx_tiers_requirements_gin ON public.tiers USING gin (requirements)                                                                                                                                                                     |
| public     | tiers                     | idx_tiers_sort_order                                       | CREATE INDEX idx_tiers_sort_order ON public.tiers USING btree (sort_order)                                                                                                                                                                           |
| public     | tiers                     | idx_tiers_tenant_id                                        | CREATE INDEX idx_tiers_tenant_id ON public.tiers USING btree (tenant_id)                                                                                                                                                                             |
| public     | tiers                     | idx_tiers_tier_level                                       | CREATE INDEX idx_tiers_tier_level ON public.tiers USING btree (tier_level)                                                                                                                                                                           |
| public     | tiers                     | tiers_pkey                                                 | CREATE UNIQUE INDEX tiers_pkey ON public.tiers USING btree (id)                                                                                                                                                                                      |
| public     | tiers                     | tiers_public_id_key                                        | CREATE UNIQUE INDEX tiers_public_id_key ON public.tiers USING btree (public_id)                                                                                                                                                                      |
| public     | tiers                     | tiers_tenant_brand_code_unique                             | CREATE UNIQUE INDEX tiers_tenant_brand_code_unique ON public.tiers USING btree (tenant_id, brand_id, code)                                                                                                                                           |
| public     | tiers                     | tiers_tenant_brand_level_unique                            | CREATE UNIQUE INDEX tiers_tenant_brand_level_unique ON public.tiers USING btree (tenant_id, brand_id, tier_level)                                                                                                                                    |
| public     | user_profiles             | idx_user_profiles_deleted_at                               | CREATE INDEX idx_user_profiles_deleted_at ON public.user_profiles USING btree (deleted_at)                                                                                                                                                           |
| public     | user_profiles             | idx_user_profiles_email                                    | CREATE INDEX idx_user_profiles_email ON public.user_profiles USING btree (email)                                                                                                                                                                     |
| public     | user_profiles             | idx_user_profiles_employee_code                            | CREATE INDEX idx_user_profiles_employee_code ON public.user_profiles USING btree (employee_code)                                                                                                                                                     |
| public     | user_profiles             | idx_user_profiles_manager_id                               | CREATE INDEX idx_user_profiles_manager_id ON public.user_profiles USING btree (manager_id)                                                                                                                                                           |
| public     | user_profiles             | idx_user_profiles_public_id                                | CREATE INDEX idx_user_profiles_public_id ON public.user_profiles USING btree (public_id)                                                                                                                                                             |
| public     | user_profiles             | idx_user_profiles_status                                   | CREATE INDEX idx_user_profiles_status ON public.user_profiles USING btree (status)                                                                                                                                                                   |
| public     | user_profiles             | idx_user_profiles_user_id                                  | CREATE INDEX idx_user_profiles_user_id ON public.user_profiles USING btree (user_id)                                                                                                                                                                 |
| public     | user_profiles             | user_profiles_employee_code_key                            | CREATE UNIQUE INDEX user_profiles_employee_code_key ON public.user_profiles USING btree (employee_code)                                                                                                                                              |
| public     | user_profiles             | user_profiles_pkey                                         | CREATE UNIQUE INDEX user_profiles_pkey ON public.user_profiles USING btree (id)                                                                                                                                                                      |
| public     | user_profiles             | user_profiles_public_id_key                                | CREATE UNIQUE INDEX user_profiles_public_id_key ON public.user_profiles USING btree (public_id)                                                                                                                                                      |
| public     | user_profiles             | user_profiles_user_id_key                                  | CREATE UNIQUE INDEX user_profiles_user_id_key ON public.user_profiles USING btree (user_id)                                                                                                                                                          |
| public     | user_roles                | idx_user_roles_active_lookup                               | CREATE INDEX idx_user_roles_active_lookup ON public.user_roles USING btree (user_profile_id, tenant_id, brand_id, status) WHERE (deleted_at IS NULL)                                                                                                 |
| public     | user_roles                | idx_user_roles_brand_id                                    | CREATE INDEX idx_user_roles_brand_id ON public.user_roles USING btree (brand_id)                                                                                                                                                                     |
| public     | user_roles                | idx_user_roles_deleted_at                                  | CREATE INDEX idx_user_roles_deleted_at ON public.user_roles USING btree (deleted_at)                                                                                                                                                                 |
| public     | user_roles                | idx_user_roles_expiration_active                           | CREATE INDEX idx_user_roles_expiration_active ON public.user_roles USING btree (expires_at, status) WHERE ((status = 'active'::user_role_status_enum) AND (expires_at IS NOT NULL) AND (deleted_at IS NULL))                                         |
| public     | user_roles                | idx_user_roles_expires_at                                  | CREATE INDEX idx_user_roles_expires_at ON public.user_roles USING btree (expires_at)                                                                                                                                                                 |
| public     | user_roles                | idx_user_roles_is_primary                                  | CREATE INDEX idx_user_roles_is_primary ON public.user_roles USING btree (is_primary)                                                                                                                                                                 |
| public     | user_roles                | idx_user_roles_role                                        | CREATE INDEX idx_user_roles_role ON public.user_roles USING btree (role)                                                                                                                                                                             |
| public     | user_roles                | idx_user_roles_scope                                       | CREATE INDEX idx_user_roles_scope ON public.user_roles USING btree (scope)                                                                                                                                                                           |
| public     | user_roles                | idx_user_roles_status                                      | CREATE INDEX idx_user_roles_status ON public.user_roles USING btree (status)                                                                                                                                                                         |
| public     | user_roles                | idx_user_roles_tenant_id                                   | CREATE INDEX idx_user_roles_tenant_id ON public.user_roles USING btree (tenant_id)                                                                                                                                                                   |
| public     | user_roles                | idx_user_roles_user_profile_id                             | CREATE INDEX idx_user_roles_user_profile_id ON public.user_roles USING btree (user_profile_id)                                                                                                                                                       |
| public     | user_roles                | user_roles_pkey                                            | CREATE UNIQUE INDEX user_roles_pkey ON public.user_roles USING btree (id)                                                                                                                                                                            |
| public     | user_roles                | user_roles_unique_assignment                               | CREATE UNIQUE INDEX user_roles_unique_assignment ON public.user_roles USING btree (user_profile_id, tenant_id, brand_id, role)                                                                                                                       |
| public     | visit_assessments         | idx_visit_assessments_assessment_type                      | CREATE INDEX idx_visit_assessments_assessment_type ON public.visit_assessments USING btree (assessment_type)                                                                                                                                         |
| public     | visit_assessments         | idx_visit_assessments_competitor_present                   | CREATE INDEX idx_visit_assessments_competitor_present ON public.visit_assessments USING btree (competitor_present)                                                                                                                                   |
| public     | visit_assessments         | idx_visit_assessments_competitor_prices_gin                | CREATE INDEX idx_visit_assessments_competitor_prices_gin ON public.visit_assessments USING gin (competitor_prices)                                                                                                                                   |
| public     | visit_assessments         | idx_visit_assessments_competitor_products_gin              | CREATE INDEX idx_visit_assessments_competitor_products_gin ON public.visit_assessments USING gin (competitor_products)                                                                                                                               |
| public     | visit_assessments         | idx_visit_assessments_created_at                           | CREATE INDEX idx_visit_assessments_created_at ON public.visit_assessments USING btree (created_at)                                                                                                                                                   |
| public     | visit_assessments         | idx_visit_assessments_deleted_at                           | CREATE INDEX idx_visit_assessments_deleted_at ON public.visit_assessments USING btree (deleted_at)                                                                                                                                                   |
| public     | visit_assessments         | idx_visit_assessments_is_present                           | CREATE INDEX idx_visit_assessments_is_present ON public.visit_assessments USING btree (is_present)                                                                                                                                                   |
| public     | visit_assessments         | idx_visit_assessments_product_id                           | CREATE INDEX idx_visit_assessments_product_id ON public.visit_assessments USING btree (product_id)                                                                                                                                                   |
| public     | visit_assessments         | idx_visit_assessments_product_variant_id                   | CREATE INDEX idx_visit_assessments_product_variant_id ON public.visit_assessments USING btree (product_variant_id)                                                                                                                                   |
| public     | visit_assessments         | idx_visit_assessments_promotional_materials_gin            | CREATE INDEX idx_visit_assessments_promotional_materials_gin ON public.visit_assessments USING gin (promotional_materials)                                                                                                                           |
| public     | visit_assessments         | idx_visit_assessments_public_id                            | CREATE INDEX idx_visit_assessments_public_id ON public.visit_assessments USING btree (public_id)                                                                                                                                                     |
| public     | visit_assessments         | idx_visit_assessments_recommended_actions_gin              | CREATE INDEX idx_visit_assessments_recommended_actions_gin ON public.visit_assessments USING gin (recommended_actions)                                                                                                                               |
| public     | visit_assessments         | idx_visit_assessments_requires_action                      | CREATE INDEX idx_visit_assessments_requires_action ON public.visit_assessments USING btree (requires_action)                                                                                                                                         |
| public     | visit_assessments         | idx_visit_assessments_stock_level                          | CREATE INDEX idx_visit_assessments_stock_level ON public.visit_assessments USING btree (stock_level)                                                                                                                                                 |
| public     | visit_assessments         | idx_visit_assessments_tenant_id                            | CREATE INDEX idx_visit_assessments_tenant_id ON public.visit_assessments USING btree (tenant_id)                                                                                                                                                     |
| public     | visit_assessments         | idx_visit_assessments_visit_id                             | CREATE INDEX idx_visit_assessments_visit_id ON public.visit_assessments USING btree (visit_id)                                                                                                                                                       |
| public     | visit_assessments         | visit_assessments_pkey                                     | CREATE UNIQUE INDEX visit_assessments_pkey ON public.visit_assessments USING btree (id)                                                                                                                                                              |
| public     | visit_assessments         | visit_assessments_public_id_key                            | CREATE UNIQUE INDEX visit_assessments_public_id_key ON public.visit_assessments USING btree (public_id)                                                                                                                                              |
| public     | visit_communication_plans | idx_visit_communication_plans_brand_id                     | CREATE INDEX idx_visit_communication_plans_brand_id ON public.visit_communication_plans USING btree (brand_id)                                                                                                                                       |
| public     | visit_communication_plans | idx_visit_communication_plans_campaign_duration_gin        | CREATE INDEX idx_visit_communication_plans_campaign_duration_gin ON public.visit_communication_plans USING gin (campaign_duration)                                                                                                                   |
| public     | visit_communication_plans | idx_visit_communication_plans_campaign_id                  | CREATE INDEX idx_visit_communication_plans_campaign_id ON public.visit_communication_plans USING btree (campaign_id)                                                                                                                                 |
| public     | visit_communication_plans | idx_visit_communication_plans_client_approval              | CREATE INDEX idx_visit_communication_plans_client_approval ON public.visit_communication_plans USING btree (client_approval)                                                                                                                         |
| public     | visit_communication_plans | idx_visit_communication_plans_created_at                   | CREATE INDEX idx_visit_communication_plans_created_at ON public.visit_communication_plans USING btree (created_at)                                                                                                                                   |
| public     | visit_communication_plans | idx_visit_communication_plans_current_status               | CREATE INDEX idx_visit_communication_plans_current_status ON public.visit_communication_plans USING btree (current_status)                                                                                                                           |
| public     | visit_communication_plans | idx_visit_communication_plans_deleted_at                   | CREATE INDEX idx_visit_communication_plans_deleted_at ON public.visit_communication_plans USING btree (deleted_at)                                                                                                                                   |
| public     | visit_communication_plans | idx_visit_communication_plans_follow_up_date               | CREATE INDEX idx_visit_communication_plans_follow_up_date ON public.visit_communication_plans USING btree (follow_up_date)                                                                                                                           |
| public     | visit_communication_plans | idx_visit_communication_plans_follow_up_required           | CREATE INDEX idx_visit_communication_plans_follow_up_required ON public.visit_communication_plans USING btree (follow_up_required)                                                                                                                   |
| public     | visit_communication_plans | idx_visit_communication_plans_installation_date_actual     | CREATE INDEX idx_visit_communication_plans_installation_date_actual ON public.visit_communication_plans USING btree (installation_date_actual)                                                                                                       |
| public     | visit_communication_plans | idx_visit_communication_plans_installation_date_planned    | CREATE INDEX idx_visit_communication_plans_installation_date_planned ON public.visit_communication_plans USING btree (installation_date_planned)                                                                                                     |
| public     | visit_communication_plans | idx_visit_communication_plans_installed_by                 | CREATE INDEX idx_visit_communication_plans_installed_by ON public.visit_communication_plans USING btree (installed_by)                                                                                                                               |
| public     | visit_communication_plans | idx_visit_communication_plans_material_type                | CREATE INDEX idx_visit_communication_plans_material_type ON public.visit_communication_plans USING btree (material_type)                                                                                                                             |
| public     | visit_communication_plans | idx_visit_communication_plans_photo_after_urls_gin         | CREATE INDEX idx_visit_communication_plans_photo_after_urls_gin ON public.visit_communication_plans USING gin (photo_after_urls)                                                                                                                     |
| public     | visit_communication_plans | idx_visit_communication_plans_photo_before_urls_gin        | CREATE INDEX idx_visit_communication_plans_photo_before_urls_gin ON public.visit_communication_plans USING gin (photo_before_urls)                                                                                                                   |
| public     | visit_communication_plans | idx_visit_communication_plans_planned_action               | CREATE INDEX idx_visit_communication_plans_planned_action ON public.visit_communication_plans USING btree (planned_action)                                                                                                                           |
| public     | visit_communication_plans | idx_visit_communication_plans_public_id                    | CREATE INDEX idx_visit_communication_plans_public_id ON public.visit_communication_plans USING btree (public_id)                                                                                                                                     |
| public     | visit_communication_plans | idx_visit_communication_plans_tenant_id                    | CREATE INDEX idx_visit_communication_plans_tenant_id ON public.visit_communication_plans USING btree (tenant_id)                                                                                                                                     |
| public     | visit_communication_plans | idx_visit_communication_plans_visit_id                     | CREATE INDEX idx_visit_communication_plans_visit_id ON public.visit_communication_plans USING btree (visit_id)                                                                                                                                       |
| public     | visit_communication_plans | visit_communication_plans_pkey                             | CREATE UNIQUE INDEX visit_communication_plans_pkey ON public.visit_communication_plans USING btree (id)                                                                                                                                              |
| public     | visit_communication_plans | visit_communication_plans_public_id_key                    | CREATE UNIQUE INDEX visit_communication_plans_public_id_key ON public.visit_communication_plans USING btree (public_id)                                                                                                                              |
| public     | visit_inventories         | idx_visit_inventories_batch_numbers_gin                    | CREATE INDEX idx_visit_inventories_batch_numbers_gin ON public.visit_inventories USING gin (batch_numbers)                                                                                                                                           |
| public     | visit_inventories         | idx_visit_inventories_counted_by                           | CREATE INDEX idx_visit_inventories_counted_by ON public.visit_inventories USING btree (counted_by)                                                                                                                                                   |
| public     | visit_inventories         | idx_visit_inventories_created_at                           | CREATE INDEX idx_visit_inventories_created_at ON public.visit_inventories USING btree (created_at)                                                                                                                                                   |
| public     | visit_inventories         | idx_visit_inventories_current_stock                        | CREATE INDEX idx_visit_inventories_current_stock ON public.visit_inventories USING btree (current_stock)                                                                                                                                             |
| public     | visit_inventories         | idx_visit_inventories_deleted_at                           | CREATE INDEX idx_visit_inventories_deleted_at ON public.visit_inventories USING btree (deleted_at)                                                                                                                                                   |
| public     | visit_inventories         | idx_visit_inventories_expiration_dates_gin                 | CREATE INDEX idx_visit_inventories_expiration_dates_gin ON public.visit_inventories USING gin (expiration_dates)                                                                                                                                     |
| public     | visit_inventories         | idx_visit_inventories_location_in_store                    | CREATE INDEX idx_visit_inventories_location_in_store ON public.visit_inventories USING btree (location_in_store)                                                                                                                                     |
| public     | visit_inventories         | idx_visit_inventories_product_id                           | CREATE INDEX idx_visit_inventories_product_id ON public.visit_inventories USING btree (product_id)                                                                                                                                                   |
| public     | visit_inventories         | idx_visit_inventories_product_variant_id                   | CREATE INDEX idx_visit_inventories_product_variant_id ON public.visit_inventories USING btree (product_variant_id)                                                                                                                                   |
| public     | visit_inventories         | idx_visit_inventories_public_id                            | CREATE INDEX idx_visit_inventories_public_id ON public.visit_inventories USING btree (public_id)                                                                                                                                                     |
| public     | visit_inventories         | idx_visit_inventories_restock_needed                       | CREATE INDEX idx_visit_inventories_restock_needed ON public.visit_inventories USING btree (restock_needed)                                                                                                                                           |
| public     | visit_inventories         | idx_visit_inventories_restock_priority                     | CREATE INDEX idx_visit_inventories_restock_priority ON public.visit_inventories USING btree (restock_priority)                                                                                                                                       |
| public     | visit_inventories         | idx_visit_inventories_storage_conditions_gin               | CREATE INDEX idx_visit_inventories_storage_conditions_gin ON public.visit_inventories USING gin (storage_conditions)                                                                                                                                 |
| public     | visit_inventories         | idx_visit_inventories_tenant_id                            | CREATE INDEX idx_visit_inventories_tenant_id ON public.visit_inventories USING btree (tenant_id)                                                                                                                                                     |
| public     | visit_inventories         | idx_visit_inventories_verified_by                          | CREATE INDEX idx_visit_inventories_verified_by ON public.visit_inventories USING btree (verified_by)                                                                                                                                                 |
| public     | visit_inventories         | idx_visit_inventories_visit_id                             | CREATE INDEX idx_visit_inventories_visit_id ON public.visit_inventories USING btree (visit_id)                                                                                                                                                       |
| public     | visit_inventories         | visit_inventories_pkey                                     | CREATE UNIQUE INDEX visit_inventories_pkey ON public.visit_inventories USING btree (id)                                                                                                                                                              |
| public     | visit_inventories         | visit_inventories_public_id_key                            | CREATE UNIQUE INDEX visit_inventories_public_id_key ON public.visit_inventories USING btree (public_id)                                                                                                                                              |
| public     | visit_inventories         | visit_inventories_visit_product_variant_location_unique    | CREATE UNIQUE INDEX visit_inventories_visit_product_variant_location_unique ON public.visit_inventories USING btree (visit_id, product_id, product_variant_id, location_in_store)                                                                    |
| public     | visit_order_items         | idx_visit_order_items_deleted_at                           | CREATE INDEX idx_visit_order_items_deleted_at ON public.visit_order_items USING btree (deleted_at) WHERE (deleted_at IS NOT NULL)                                                                                                                    |
| public     | visit_order_items         | idx_visit_order_items_metadata                             | CREATE INDEX idx_visit_order_items_metadata ON public.visit_order_items USING gin (metadata)                                                                                                                                                         |
| public     | visit_order_items         | idx_visit_order_items_negotiated                           | CREATE INDEX idx_visit_order_items_negotiated ON public.visit_order_items USING btree (visit_order_id) WHERE ((deleted_at IS NULL) AND (price_negotiated = true))                                                                                    |
| public     | visit_order_items         | idx_visit_order_items_order_line_unique                    | CREATE UNIQUE INDEX idx_visit_order_items_order_line_unique ON public.visit_order_items USING btree (visit_order_id, line_number) WHERE (deleted_at IS NULL)                                                                                         |
| public     | visit_order_items         | idx_visit_order_items_priority                             | CREATE INDEX idx_visit_order_items_priority ON public.visit_order_items USING btree (item_priority) WHERE ((deleted_at IS NULL) AND (item_priority = ANY (ARRAY['high'::visit_order_item_priority_enum, 'urgent'::visit_order_item_priority_enum]))) |
| public     | visit_order_items         | idx_visit_order_items_product_id                           | CREATE INDEX idx_visit_order_items_product_id ON public.visit_order_items USING btree (product_id) WHERE (deleted_at IS NULL)                                                                                                                        |
| public     | visit_order_items         | idx_visit_order_items_product_variant_id                   | CREATE INDEX idx_visit_order_items_product_variant_id ON public.visit_order_items USING btree (product_variant_id) WHERE ((deleted_at IS NULL) AND (product_variant_id IS NOT NULL))                                                                 |
| public     | visit_order_items         | idx_visit_order_items_public_id                            | CREATE INDEX idx_visit_order_items_public_id ON public.visit_order_items USING btree (public_id)                                                                                                                                                     |
| public     | visit_order_items         | idx_visit_order_items_requires_approval                    | CREATE INDEX idx_visit_order_items_requires_approval ON public.visit_order_items USING btree (visit_order_id) WHERE ((deleted_at IS NULL) AND (requires_approval = true) AND (approved_by IS NULL))                                                  |
| public     | visit_order_items         | idx_visit_order_items_sales_techniques                     | CREATE INDEX idx_visit_order_items_sales_techniques ON public.visit_order_items USING btree (visit_order_id) WHERE ((deleted_at IS NULL) AND ((cross_sell_item = true) OR (upsell_item = true)))                                                     |
| public     | visit_order_items         | idx_visit_order_items_samples                              | CREATE INDEX idx_visit_order_items_samples ON public.visit_order_items USING btree (visit_order_id) WHERE ((deleted_at IS NULL) AND (sample_item = true))                                                                                            |
| public     | visit_order_items         | idx_visit_order_items_source                               | CREATE INDEX idx_visit_order_items_source ON public.visit_order_items USING btree (item_source) WHERE (deleted_at IS NULL)                                                                                                                           |
| public     | visit_order_items         | idx_visit_order_items_tenant_id                            | CREATE INDEX idx_visit_order_items_tenant_id ON public.visit_order_items USING btree (tenant_id) WHERE (deleted_at IS NULL)                                                                                                                          |
| public     | visit_order_items         | idx_visit_order_items_visit_order_id                       | CREATE INDEX idx_visit_order_items_visit_order_id ON public.visit_order_items USING btree (visit_order_id) WHERE (deleted_at IS NULL)                                                                                                                |
| public     | visit_order_items         | visit_order_items_pkey                                     | CREATE UNIQUE INDEX visit_order_items_pkey ON public.visit_order_items USING btree (id)                                                                                                                                                              |
| public     | visit_order_items         | visit_order_items_public_id_key                            | CREATE UNIQUE INDEX visit_order_items_public_id_key ON public.visit_order_items USING btree (public_id)                                                                                                                                              |
| public     | visit_orders              | idx_visit_orders_advisor_id                                | CREATE INDEX idx_visit_orders_advisor_id ON public.visit_orders USING btree (advisor_id)                                                                                                                                                             |
| public     | visit_orders              | idx_visit_orders_approved_by                               | CREATE INDEX idx_visit_orders_approved_by ON public.visit_orders USING btree (approved_by)                                                                                                                                                           |
| public     | visit_orders              | idx_visit_orders_attachments_gin                           | CREATE INDEX idx_visit_orders_attachments_gin ON public.visit_orders USING gin (order_attachments)                                                                                                                                                   |
| public     | visit_orders              | idx_visit_orders_client_id                                 | CREATE INDEX idx_visit_orders_client_id ON public.visit_orders USING btree (client_id)                                                                                                                                                               |
| public     | visit_orders              | idx_visit_orders_client_invoice_data_id                    | CREATE INDEX idx_visit_orders_client_invoice_data_id ON public.visit_orders USING btree (client_invoice_data_id)                                                                                                                                     |
| public     | visit_orders              | idx_visit_orders_created_at                                | CREATE INDEX idx_visit_orders_created_at ON public.visit_orders USING btree (created_at)                                                                                                                                                             |
| public     | visit_orders              | idx_visit_orders_deleted_at                                | CREATE INDEX idx_visit_orders_deleted_at ON public.visit_orders USING btree (deleted_at)                                                                                                                                                             |
| public     | visit_orders              | idx_visit_orders_delivery_date                             | CREATE INDEX idx_visit_orders_delivery_date ON public.visit_orders USING btree (delivery_date)                                                                                                                                                       |
| public     | visit_orders              | idx_visit_orders_external_order_id                         | CREATE INDEX idx_visit_orders_external_order_id ON public.visit_orders USING btree (external_order_id)                                                                                                                                               |
| public     | visit_orders              | idx_visit_orders_invoice_required                          | CREATE INDEX idx_visit_orders_invoice_required ON public.visit_orders USING btree (invoice_required)                                                                                                                                                 |
| public     | visit_orders              | idx_visit_orders_order_date                                | CREATE INDEX idx_visit_orders_order_date ON public.visit_orders USING btree (order_date)                                                                                                                                                             |
| public     | visit_orders              | idx_visit_orders_order_number                              | CREATE INDEX idx_visit_orders_order_number ON public.visit_orders USING btree (order_number)                                                                                                                                                         |
| public     | visit_orders              | idx_visit_orders_order_status                              | CREATE INDEX idx_visit_orders_order_status ON public.visit_orders USING btree (order_status)                                                                                                                                                         |
| public     | visit_orders              | idx_visit_orders_order_type                                | CREATE INDEX idx_visit_orders_order_type ON public.visit_orders USING btree (order_type)                                                                                                                                                             |
| public     | visit_orders              | idx_visit_orders_public_id                                 | CREATE INDEX idx_visit_orders_public_id ON public.visit_orders USING btree (public_id)                                                                                                                                                               |
| public     | visit_orders              | idx_visit_orders_requires_approval                         | CREATE INDEX idx_visit_orders_requires_approval ON public.visit_orders USING btree (requires_approval)                                                                                                                                               |
| public     | visit_orders              | idx_visit_orders_tenant_id                                 | CREATE INDEX idx_visit_orders_tenant_id ON public.visit_orders USING btree (tenant_id)                                                                                                                                                               |
| public     | visit_orders              | idx_visit_orders_visit_id                                  | CREATE INDEX idx_visit_orders_visit_id ON public.visit_orders USING btree (visit_id)                                                                                                                                                                 |
| public     | visit_orders              | visit_orders_pkey                                          | CREATE UNIQUE INDEX visit_orders_pkey ON public.visit_orders USING btree (id)                                                                                                                                                                        |
| public     | visit_orders              | visit_orders_public_id_key                                 | CREATE UNIQUE INDEX visit_orders_public_id_key ON public.visit_orders USING btree (public_id)                                                                                                                                                        |
| public     | visits                    | idx_visits_advisor_id                                      | CREATE INDEX idx_visits_advisor_id ON public.visits USING btree (advisor_id)                                                                                                                                                                         |
| public     | visits                    | idx_visits_attachments_gin                                 | CREATE INDEX idx_visits_attachments_gin ON public.visits USING gin (visit_attachments)                                                                                                                                                               |
| public     | visits                    | idx_visits_check_in_time                                   | CREATE INDEX idx_visits_check_in_time ON public.visits USING btree (check_in_time)                                                                                                                                                                   |
| public     | visits                    | idx_visits_client_id                                       | CREATE INDEX idx_visits_client_id ON public.visits USING btree (client_id)                                                                                                                                                                           |
| public     | visits                    | idx_visits_coordinates_gist                                | CREATE INDEX idx_visits_coordinates_gist ON public.visits USING gist (location_coordinates)                                                                                                                                                          |
| public     | visits                    | idx_visits_deleted_at                                      | CREATE INDEX idx_visits_deleted_at ON public.visits USING btree (deleted_at)                                                                                                                                                                         |
| public     | visits                    | idx_visits_metadata_gin                                    | CREATE INDEX idx_visits_metadata_gin ON public.visits USING gin (metadata)                                                                                                                                                                           |
| public     | visits                    | idx_visits_next_visit_date                                 | CREATE INDEX idx_visits_next_visit_date ON public.visits USING btree (next_visit_date)                                                                                                                                                               |
| public     | visits                    | idx_visits_public_id                                       | CREATE INDEX idx_visits_public_id ON public.visits USING btree (public_id)                                                                                                                                                                           |
| public     | visits                    | idx_visits_requires_follow_up                              | CREATE INDEX idx_visits_requires_follow_up ON public.visits USING btree (requires_follow_up)                                                                                                                                                         |
| public     | visits                    | idx_visits_tenant_id                                       | CREATE INDEX idx_visits_tenant_id ON public.visits USING btree (tenant_id)                                                                                                                                                                           |
| public     | visits                    | idx_visits_visit_date                                      | CREATE INDEX idx_visits_visit_date ON public.visits USING btree (visit_date)                                                                                                                                                                         |
| public     | visits                    | idx_visits_visit_status                                    | CREATE INDEX idx_visits_visit_status ON public.visits USING btree (visit_status)                                                                                                                                                                     |
| public     | visits                    | idx_visits_visit_type                                      | CREATE INDEX idx_visits_visit_type ON public.visits USING btree (visit_type)                                                                                                                                                                         |
| public     | visits                    | idx_visits_workflow_status                                 | CREATE INDEX idx_visits_workflow_status ON public.visits USING btree (workflow_status)                                                                                                                                                               |
| public     | visits                    | visits_pkey                                                | CREATE UNIQUE INDEX visits_pkey ON public.visits USING btree (id)                                                                                                                                                                                    |
| public     | visits                    | visits_public_id_key                                       | CREATE UNIQUE INDEX visits_public_id_key ON public.visits USING btree (public_id)                                                                                                                                                                    |
| public     | zones                     | idx_zones_cities_gin                                       | CREATE INDEX idx_zones_cities_gin ON public.zones USING gin (cities)                                                                                                                                                                                 |
| public     | zones                     | idx_zones_code                                             | CREATE INDEX idx_zones_code ON public.zones USING btree (code)                                                                                                                                                                                       |
| public     | zones                     | idx_zones_coordinates_gin                                  | CREATE INDEX idx_zones_coordinates_gin ON public.zones USING gin (coordinates)                                                                                                                                                                       |
| public     | zones                     | idx_zones_country_state                                    | CREATE INDEX idx_zones_country_state ON public.zones USING btree (country, state)                                                                                                                                                                    |
| public     | zones                     | idx_zones_deleted_at                                       | CREATE INDEX idx_zones_deleted_at ON public.zones USING btree (deleted_at)                                                                                                                                                                           |
| public     | zones                     | idx_zones_is_active                                        | CREATE INDEX idx_zones_is_active ON public.zones USING btree (is_active)                                                                                                                                                                             |
| public     | zones                     | idx_zones_parent_zone_id                                   | CREATE INDEX idx_zones_parent_zone_id ON public.zones USING btree (parent_zone_id)                                                                                                                                                                   |
| public     | zones                     | idx_zones_postal_codes_gin                                 | CREATE INDEX idx_zones_postal_codes_gin ON public.zones USING gin (postal_codes)                                                                                                                                                                     |
| public     | zones                     | idx_zones_public_id                                        | CREATE INDEX idx_zones_public_id ON public.zones USING btree (public_id)                                                                                                                                                                             |
| public     | zones                     | idx_zones_sort_order                                       | CREATE INDEX idx_zones_sort_order ON public.zones USING btree (tenant_id, sort_order)                                                                                                                                                                |
| public     | zones                     | idx_zones_tenant_id                                        | CREATE INDEX idx_zones_tenant_id ON public.zones USING btree (tenant_id)                                                                                                                                                                             |
| public     | zones                     | idx_zones_zone_type                                        | CREATE INDEX idx_zones_zone_type ON public.zones USING btree (zone_type)                                                                                                                                                                             |
| public     | zones                     | zones_pkey                                                 | CREATE UNIQUE INDEX zones_pkey ON public.zones USING btree (id)                                                                                                                                                                                      |
| public     | zones                     | zones_public_id_key                                        | CREATE UNIQUE INDEX zones_public_id_key ON public.zones USING btree (public_id)                                                                                                                                                                      |
| public     | zones                     | zones_tenant_code_unique                                   | CREATE UNIQUE INDEX zones_tenant_code_unique ON public.zones USING btree (tenant_id, code)                                                                                                                                                           |

## 8. Triggers

| table_name                | trigger_name                                       | event_manipulation | action_statement                                                |
| ------------------------- | -------------------------------------------------- | ------------------ | --------------------------------------------------------------- |
| brands                    | trigger_brand_role_soft_delete_cascade             | UPDATE             | EXECUTE FUNCTION cascade_brand_role_soft_delete()               |
| brands                    | trigger_brands_updated_at                          | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| campaigns                 | trigger_campaigns_updated_at                       | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| campaigns                 | trigger_validate_campaign_data                     | UPDATE             | EXECUTE FUNCTION validate_campaign_data()                       |
| campaigns                 | trigger_validate_campaign_data                     | INSERT             | EXECUTE FUNCTION validate_campaign_data()                       |
| client_brand_memberships  | trigger_client_brand_memberships_updated_at        | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| client_brand_memberships  | trigger_validate_client_brand_membership_data      | INSERT             | EXECUTE FUNCTION validate_client_brand_membership_data()        |
| client_brand_memberships  | trigger_validate_client_brand_membership_data      | UPDATE             | EXECUTE FUNCTION validate_client_brand_membership_data()        |
| client_brand_memberships  | trigger_validate_primary_brand_unique              | UPDATE             | EXECUTE FUNCTION validate_primary_brand_unique()                |
| client_brand_memberships  | trigger_validate_primary_brand_unique              | INSERT             | EXECUTE FUNCTION validate_primary_brand_unique()                |
| client_invoice_data       | trigger_client_invoice_data_updated_at             | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| client_invoice_data       | trigger_validate_client_invoice_data               | INSERT             | EXECUTE FUNCTION validate_client_invoice_data()                 |
| client_invoice_data       | trigger_validate_client_invoice_data               | UPDATE             | EXECUTE FUNCTION validate_client_invoice_data()                 |
| client_invoice_data       | trigger_validate_preferred_invoice_data_unique     | UPDATE             | EXECUTE FUNCTION validate_preferred_invoice_data_unique()       |
| client_invoice_data       | trigger_validate_preferred_invoice_data_unique     | INSERT             | EXECUTE FUNCTION validate_preferred_invoice_data_unique()       |
| client_tier_assignments   | trigger_client_tier_assignments_updated_at         | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| client_tier_assignments   | trigger_update_membership_current_tier             | DELETE             | EXECUTE FUNCTION update_membership_current_tier()               |
| client_tier_assignments   | trigger_update_membership_current_tier             | INSERT             | EXECUTE FUNCTION update_membership_current_tier()               |
| client_tier_assignments   | trigger_update_membership_current_tier             | UPDATE             | EXECUTE FUNCTION update_membership_current_tier()               |
| client_tier_assignments   | trigger_validate_client_tier_assignment_data       | UPDATE             | EXECUTE FUNCTION validate_client_tier_assignment_data()         |
| client_tier_assignments   | trigger_validate_client_tier_assignment_data       | INSERT             | EXECUTE FUNCTION validate_client_tier_assignment_data()         |
| client_tier_assignments   | trigger_validate_current_tier_assignment_unique    | INSERT             | EXECUTE FUNCTION validate_current_tier_assignment_unique()      |
| client_tier_assignments   | trigger_validate_current_tier_assignment_unique    | UPDATE             | EXECUTE FUNCTION validate_current_tier_assignment_unique()      |
| client_types              | trigger_client_types_updated_at                    | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| client_types              | trigger_validate_client_type_data                  | UPDATE             | EXECUTE FUNCTION validate_client_type_data()                    |
| client_types              | trigger_validate_client_type_data                  | INSERT             | EXECUTE FUNCTION validate_client_type_data()                    |
| clients                   | trigger_clients_updated_at                         | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| clients                   | trigger_sync_email_from_clients_to_auth            | UPDATE             | EXECUTE FUNCTION sync_client_email()                            |
| clients                   | trigger_validate_client_data                       | UPDATE             | EXECUTE FUNCTION validate_client_data()                         |
| clients                   | trigger_validate_client_data                       | INSERT             | EXECUTE FUNCTION validate_client_data()                         |
| commercial_structures     | trigger_commercial_structures_updated_at           | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| commercial_structures     | trigger_validate_commercial_structure_data         | INSERT             | EXECUTE FUNCTION validate_commercial_structure_data()           |
| commercial_structures     | trigger_validate_commercial_structure_data         | UPDATE             | EXECUTE FUNCTION validate_commercial_structure_data()           |
| markets                   | trigger_markets_updated_at                         | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| markets                   | trigger_validate_market_data                       | INSERT             | EXECUTE FUNCTION validate_market_data()                         |
| markets                   | trigger_validate_market_data                       | UPDATE             | EXECUTE FUNCTION validate_market_data()                         |
| order_items               | trg_order_items_update_order_totals                | UPDATE             | EXECUTE FUNCTION update_order_totals_from_items()               |
| order_items               | trg_order_items_update_order_totals                | INSERT             | EXECUTE FUNCTION update_order_totals_from_items()               |
| order_items               | trg_order_items_update_order_totals                | DELETE             | EXECUTE FUNCTION update_order_totals_from_items()               |
| order_items               | trg_order_items_updated_at                         | UPDATE             | EXECUTE FUNCTION update_order_items_updated_at()                |
| order_items               | trg_order_items_validate_calculations              | UPDATE             | EXECUTE FUNCTION validate_order_item_calculations()             |
| order_items               | trg_order_items_validate_calculations              | INSERT             | EXECUTE FUNCTION validate_order_item_calculations()             |
| order_items               | trg_order_items_validate_metadata                  | INSERT             | EXECUTE FUNCTION validate_order_item_metadata()                 |
| order_items               | trg_order_items_validate_metadata                  | UPDATE             | EXECUTE FUNCTION validate_order_item_metadata()                 |
| order_items               | trg_order_items_validate_tenant                    | UPDATE             | EXECUTE FUNCTION validate_order_item_tenant_consistency()       |
| order_items               | trg_order_items_validate_tenant                    | INSERT             | EXECUTE FUNCTION validate_order_item_tenant_consistency()       |
| orders                    | trigger_auto_generate_order_number                 | INSERT             | EXECUTE FUNCTION auto_generate_order_number()                   |
| orders                    | trigger_calculate_order_total                      | INSERT             | EXECUTE FUNCTION calculate_order_total()                        |
| orders                    | trigger_calculate_order_total                      | UPDATE             | EXECUTE FUNCTION calculate_order_total()                        |
| orders                    | trigger_orders_updated_at                          | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| orders                    | trigger_validate_order_data                        | INSERT             | EXECUTE FUNCTION validate_order_data()                          |
| orders                    | trigger_validate_order_data                        | UPDATE             | EXECUTE FUNCTION validate_order_data()                          |
| points_transactions       | trigger_calculate_points_balance                   | INSERT             | EXECUTE FUNCTION calculate_points_balance()                     |
| points_transactions       | trigger_mark_transaction_reversed                  | INSERT             | EXECUTE FUNCTION mark_transaction_reversed()                    |
| points_transactions       | trigger_points_transactions_updated_at             | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| points_transactions       | trigger_update_membership_points                   | INSERT             | EXECUTE FUNCTION update_membership_points()                     |
| points_transactions       | trigger_validate_points_transaction_data           | INSERT             | EXECUTE FUNCTION validate_points_transaction_data()             |
| points_transactions       | trigger_validate_points_transaction_data           | UPDATE             | EXECUTE FUNCTION validate_points_transaction_data()             |
| product_categories        | trigger_product_categories_updated_at              | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| product_categories        | trigger_validate_product_category_data             | INSERT             | EXECUTE FUNCTION validate_product_category_data()               |
| product_categories        | trigger_validate_product_category_data             | UPDATE             | EXECUTE FUNCTION validate_product_category_data()               |
| product_variants          | trigger_product_variants_updated_at                | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| product_variants          | trigger_validate_default_variant_unique            | INSERT             | EXECUTE FUNCTION validate_default_variant_unique()              |
| product_variants          | trigger_validate_default_variant_unique            | UPDATE             | EXECUTE FUNCTION validate_default_variant_unique()              |
| product_variants          | trigger_validate_product_variant_data              | UPDATE             | EXECUTE FUNCTION validate_product_variant_data()                |
| product_variants          | trigger_validate_product_variant_data              | INSERT             | EXECUTE FUNCTION validate_product_variant_data()                |
| products                  | trigger_products_updated_at                        | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| products                  | trigger_validate_product_data                      | INSERT             | EXECUTE FUNCTION validate_product_data()                        |
| products                  | trigger_validate_product_data                      | UPDATE             | EXECUTE FUNCTION validate_product_data()                        |
| promotion_redemptions     | trigger_promotion_redemptions_updated_at           | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| promotion_redemptions     | trigger_update_promotion_usage                     | DELETE             | EXECUTE FUNCTION update_promotion_usage()                       |
| promotion_redemptions     | trigger_update_promotion_usage                     | INSERT             | EXECUTE FUNCTION update_promotion_usage()                       |
| promotion_redemptions     | trigger_update_promotion_usage                     | UPDATE             | EXECUTE FUNCTION update_promotion_usage()                       |
| promotion_redemptions     | trigger_validate_promotion_redemption_data         | UPDATE             | EXECUTE FUNCTION validate_promotion_redemption_data()           |
| promotion_redemptions     | trigger_validate_promotion_redemption_data         | INSERT             | EXECUTE FUNCTION validate_promotion_redemption_data()           |
| promotion_rules           | trigger_calculate_promotion_rule_reach             | UPDATE             | EXECUTE FUNCTION calculate_promotion_rule_reach()               |
| promotion_rules           | trigger_calculate_promotion_rule_reach             | INSERT             | EXECUTE FUNCTION calculate_promotion_rule_reach()               |
| promotion_rules           | trigger_handle_promotion_rule_toggles              | UPDATE             | EXECUTE FUNCTION handle_promotion_rule_toggles()                |
| promotion_rules           | trigger_handle_promotion_rule_toggles              | INSERT             | EXECUTE FUNCTION handle_promotion_rule_toggles()                |
| promotion_rules           | trigger_promotion_rules_updated_at                 | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| promotion_rules           | trigger_validate_promotion_rule_data               | INSERT             | EXECUTE FUNCTION validate_promotion_rule_data()                 |
| promotion_rules           | trigger_validate_promotion_rule_data               | UPDATE             | EXECUTE FUNCTION validate_promotion_rule_data()                 |
| promotions                | trigger_promotions_updated_at                      | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| promotions                | trigger_update_campaign_budget_spent               | DELETE             | EXECUTE FUNCTION update_campaign_budget_spent()                 |
| promotions                | trigger_update_campaign_budget_spent               | UPDATE             | EXECUTE FUNCTION update_campaign_budget_spent()                 |
| promotions                | trigger_update_campaign_budget_spent               | INSERT             | EXECUTE FUNCTION update_campaign_budget_spent()                 |
| promotions                | trigger_validate_promotion_data                    | UPDATE             | EXECUTE FUNCTION validate_promotion_data()                      |
| promotions                | trigger_validate_promotion_data                    | INSERT             | EXECUTE FUNCTION validate_promotion_data()                      |
| reward_redemptions        | trigger_create_redemption_points_transaction       | INSERT             | EXECUTE FUNCTION create_redemption_points_transaction()         |
| reward_redemptions        | trigger_reward_redemptions_updated_at              | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| reward_redemptions        | trigger_update_reward_usage_count                  | INSERT             | EXECUTE FUNCTION update_reward_usage_count()                    |
| reward_redemptions        | trigger_update_reward_usage_count                  | DELETE             | EXECUTE FUNCTION update_reward_usage_count()                    |
| reward_redemptions        | trigger_validate_reward_redemption_data            | UPDATE             | EXECUTE FUNCTION validate_reward_redemption_data()              |
| reward_redemptions        | trigger_validate_reward_redemption_data            | INSERT             | EXECUTE FUNCTION validate_reward_redemption_data()              |
| rewards                   | trigger_rewards_updated_at                         | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| rewards                   | trigger_validate_reward_data                       | UPDATE             | EXECUTE FUNCTION validate_reward_data()                         |
| rewards                   | trigger_validate_reward_data                       | INSERT             | EXECUTE FUNCTION validate_reward_data()                         |
| tenants                   | trigger_tenant_soft_delete_cascade                 | UPDATE             | EXECUTE FUNCTION cascade_tenant_soft_delete()                   |
| tenants                   | trigger_tenants_updated_at                         | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| tiers                     | trigger_tiers_updated_at                           | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| tiers                     | trigger_validate_default_tier_unique               | UPDATE             | EXECUTE FUNCTION validate_default_tier_unique()                 |
| tiers                     | trigger_validate_default_tier_unique               | INSERT             | EXECUTE FUNCTION validate_default_tier_unique()                 |
| tiers                     | trigger_validate_tier_data                         | INSERT             | EXECUTE FUNCTION validate_tier_data()                           |
| tiers                     | trigger_validate_tier_data                         | UPDATE             | EXECUTE FUNCTION validate_tier_data()                           |
| user_profiles             | trigger_check_manager_hierarchy                    | INSERT             | EXECUTE FUNCTION check_manager_hierarchy()                      |
| user_profiles             | trigger_check_manager_hierarchy                    | UPDATE             | EXECUTE FUNCTION check_manager_hierarchy()                      |
| user_profiles             | trigger_sync_email_from_profile                    | UPDATE             | EXECUTE FUNCTION sync_user_profile_email()                      |
| user_profiles             | trigger_user_profiles_updated_at                   | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| user_roles                | trigger_user_roles_updated_at                      | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| user_roles                | trigger_validate_role_expiration_critical          | UPDATE             | EXECUTE FUNCTION validate_role_expiration_on_critical_ops()     |
| user_roles                | trigger_validate_role_expiration_critical          | INSERT             | EXECUTE FUNCTION validate_role_expiration_on_critical_ops()     |
| user_roles                | trigger_validate_single_primary_role               | UPDATE             | EXECUTE FUNCTION validate_single_primary_role()                 |
| user_roles                | trigger_validate_single_primary_role               | INSERT             | EXECUTE FUNCTION validate_single_primary_role()                 |
| visit_assessments         | trigger_calculate_price_variance                   | INSERT             | EXECUTE FUNCTION calculate_price_variance()                     |
| visit_assessments         | trigger_calculate_price_variance                   | UPDATE             | EXECUTE FUNCTION calculate_price_variance()                     |
| visit_assessments         | trigger_update_visit_workflow_status               | INSERT             | EXECUTE FUNCTION update_visit_workflow_status()                 |
| visit_assessments         | trigger_update_visit_workflow_status               | DELETE             | EXECUTE FUNCTION update_visit_workflow_status()                 |
| visit_assessments         | trigger_validate_visit_assessment_data             | INSERT             | EXECUTE FUNCTION validate_visit_assessment_data()               |
| visit_assessments         | trigger_validate_visit_assessment_data             | UPDATE             | EXECUTE FUNCTION validate_visit_assessment_data()               |
| visit_assessments         | trigger_visit_assessments_updated_at               | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| visit_communication_plans | trigger_update_visit_workflow_status_communication | DELETE             | EXECUTE FUNCTION update_visit_workflow_status_communication()   |
| visit_communication_plans | trigger_update_visit_workflow_status_communication | INSERT             | EXECUTE FUNCTION update_visit_workflow_status_communication()   |
| visit_communication_plans | trigger_validate_visit_communication_plan_data     | UPDATE             | EXECUTE FUNCTION validate_visit_communication_plan_data()       |
| visit_communication_plans | trigger_validate_visit_communication_plan_data     | INSERT             | EXECUTE FUNCTION validate_visit_communication_plan_data()       |
| visit_communication_plans | trigger_visit_communication_plans_updated_at       | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| visit_inventories         | trigger_update_visit_workflow_status_inventory     | INSERT             | EXECUTE FUNCTION update_visit_workflow_status_inventory()       |
| visit_inventories         | trigger_update_visit_workflow_status_inventory     | DELETE             | EXECUTE FUNCTION update_visit_workflow_status_inventory()       |
| visit_inventories         | trigger_validate_visit_inventory_data              | UPDATE             | EXECUTE FUNCTION validate_visit_inventory_data()                |
| visit_inventories         | trigger_validate_visit_inventory_data              | INSERT             | EXECUTE FUNCTION validate_visit_inventory_data()                |
| visit_inventories         | trigger_visit_inventories_updated_at               | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| visit_order_items         | trg_visit_order_items_update_order_totals          | UPDATE             | EXECUTE FUNCTION update_visit_order_totals_from_items()         |
| visit_order_items         | trg_visit_order_items_update_order_totals          | INSERT             | EXECUTE FUNCTION update_visit_order_totals_from_items()         |
| visit_order_items         | trg_visit_order_items_update_order_totals          | DELETE             | EXECUTE FUNCTION update_visit_order_totals_from_items()         |
| visit_order_items         | trg_visit_order_items_updated_at                   | UPDATE             | EXECUTE FUNCTION update_visit_order_items_updated_at()          |
| visit_order_items         | trg_visit_order_items_validate_calculations        | UPDATE             | EXECUTE FUNCTION validate_visit_order_item_calculations()       |
| visit_order_items         | trg_visit_order_items_validate_calculations        | INSERT             | EXECUTE FUNCTION validate_visit_order_item_calculations()       |
| visit_order_items         | trg_visit_order_items_validate_metadata            | UPDATE             | EXECUTE FUNCTION validate_visit_order_item_metadata()           |
| visit_order_items         | trg_visit_order_items_validate_metadata            | INSERT             | EXECUTE FUNCTION validate_visit_order_item_metadata()           |
| visit_order_items         | trg_visit_order_items_validate_tenant              | INSERT             | EXECUTE FUNCTION validate_visit_order_item_tenant_consistency() |
| visit_order_items         | trg_visit_order_items_validate_tenant              | UPDATE             | EXECUTE FUNCTION validate_visit_order_item_tenant_consistency() |
| visit_orders              | trigger_update_visit_workflow_status_orders        | INSERT             | EXECUTE FUNCTION update_visit_workflow_status_orders()          |
| visit_orders              | trigger_update_visit_workflow_status_orders        | DELETE             | EXECUTE FUNCTION update_visit_workflow_status_orders()          |
| visit_orders              | trigger_validate_visit_order_data                  | INSERT             | EXECUTE FUNCTION validate_visit_order_data()                    |
| visit_orders              | trigger_validate_visit_order_data                  | UPDATE             | EXECUTE FUNCTION validate_visit_order_data()                    |
| visit_orders              | trigger_visit_orders_updated_at                    | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| visits                    | trigger_calculate_visit_duration                   | INSERT             | EXECUTE FUNCTION calculate_visit_duration()                     |
| visits                    | trigger_calculate_visit_duration                   | UPDATE             | EXECUTE FUNCTION calculate_visit_duration()                     |
| visits                    | trigger_validate_visit_data                        | UPDATE             | EXECUTE FUNCTION validate_visit_data()                          |
| visits                    | trigger_validate_visit_data                        | INSERT             | EXECUTE FUNCTION validate_visit_data()                          |
| visits                    | trigger_visits_updated_at                          | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
| zones                     | trigger_validate_zone_data                         | INSERT             | EXECUTE FUNCTION validate_zone_data()                           |
| zones                     | trigger_validate_zone_data                         | UPDATE             | EXECUTE FUNCTION validate_zone_data()                           |
| zones                     | trigger_zones_updated_at                           | UPDATE             | EXECUTE FUNCTION update_updated_at_column()                     |
